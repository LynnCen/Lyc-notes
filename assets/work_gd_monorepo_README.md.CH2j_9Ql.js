import{_ as s,c as n,o as l,a7 as i}from"./chunks/framework.BQb8NfN9.js";const u=JSON.parse('{"title":"Monorepo 工作流体系文档","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/monorepo/README.md","filePath":"work/gd/monorepo/README.md","lastUpdated":1770085732000}'),e={name:"work/gd/monorepo/README.md"};function t(r,a,o,p,h,d){return l(),n("div",null,a[0]||(a[0]=[i(`<h1 id="monorepo-工作流体系文档" tabindex="-1">Monorepo 工作流体系文档 <a class="header-anchor" href="#monorepo-工作流体系文档" aria-label="Permalink to &quot;Monorepo 工作流体系文档&quot;">​</a></h1><h2 id="📖-文档概述" tabindex="-1">📖 文档概述 <a class="header-anchor" href="#📖-文档概述" aria-label="Permalink to &quot;📖 文档概述&quot;">​</a></h2><p>本目录包含稿定平台 Monorepo 的完整工作流体系文档，涵盖核心概念、工作流设计、最佳实践。这些文档基于主干开发、特性开关、基础设施即代码（IaC）等现代 DevOps 最佳实践，是一次<strong>模式级别的改变</strong>。</p><hr><h2 id="🗂️-文档结构" tabindex="-1">🗂️ 文档结构 <a class="header-anchor" href="#🗂️-文档结构" aria-label="Permalink to &quot;🗂️ 文档结构&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>monorepo/</span></span>
<span class="line"><span>├── README.md                              # 本文件：文档导航</span></span>
<span class="line"><span>├── 01-核心概念/                           # 核心概念层</span></span>
<span class="line"><span>│   └── 主干开发与最佳实践.md              # 主干开发、特性开关、IaC</span></span>
<span class="line"><span>├── 02-工作流设计/                         # 工作流设计层</span></span>
<span class="line"><span>│   └── CI-CD工作流设计.md                # CI/CD 完整工作流</span></span>
<span class="line"><span>├── 03-实践指南/                          # 实践指南层</span></span>
<span class="line"><span>│   └── Docker镜像构建指南.md             # Docker + pnpm + Turbo</span></span>
<span class="line"><span>└── attachments/                          # 图片附件</span></span>
<span class="line"><span>    ├── image2025-2-13_23-15-49.png</span></span>
<span class="line"><span>    ├── image2025-2-17_23-26-51.png</span></span>
<span class="line"><span>    └── ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><hr><h2 id="📚-阅读指南" tabindex="-1">📚 阅读指南 <a class="header-anchor" href="#📚-阅读指南" aria-label="Permalink to &quot;📚 阅读指南&quot;">​</a></h2><h3 id="方式一-按角色阅读" tabindex="-1">方式一：按角色阅读 <a class="header-anchor" href="#方式一-按角色阅读" aria-label="Permalink to &quot;方式一：按角色阅读&quot;">​</a></h3><h4 id="技术负责人-架构师" tabindex="-1">技术负责人 / 架构师 <a class="header-anchor" href="#技术负责人-架构师" aria-label="Permalink to &quot;技术负责人 / 架构师&quot;">​</a></h4><ol><li><p><strong>必读</strong>：<a href="./01-核心概念/主干开发与最佳实践">主干开发与最佳实践</a></p><ul><li>理解主干开发模式</li><li>理解特性开关的价值</li><li>理解基础设施即代码</li></ul></li><li><p><strong>必读</strong>：<a href="./02-工作流设计/CI-CD工作流设计">CI/CD 工作流设计</a></p><ul><li>了解完整的工作流设计</li><li>理解角色和职责划分</li><li>理解自动化流程</li></ul></li><li><p><strong>推荐</strong>：<a href="./03-实践指南/Docker镜像构建指南">Docker 镜像构建指南</a></p><ul><li>了解 Monorepo 中的 Docker 构建策略</li><li>理解预构建和容器化流程</li></ul></li></ol><h4 id="开发者" tabindex="-1">开发者 <a class="header-anchor" href="#开发者" aria-label="Permalink to &quot;开发者&quot;">​</a></h4><ol><li><p><strong>必读</strong>：<a href="./01-核心概念/主干开发与最佳实践">主干开发与最佳实践</a></p><ul><li>理解新的开发模式</li><li>学习特性开关的使用</li></ul></li><li><p><strong>必读</strong>：<a href="./02-工作流设计/CI-CD工作流设计">CI/CD 工作流设计</a></p><ul><li>学习如何创建变更集</li><li>学习 PR 工作流程</li><li>学习发布流程</li></ul></li><li><p><strong>推荐</strong>：<a href="./03-实践指南/Docker镜像构建指南">Docker 镜像构建指南</a></p><ul><li>学习如何在 Monorepo 中构建 Docker 镜像</li><li>理解预构建策略</li></ul></li></ol><h4 id="devops-运维" tabindex="-1">DevOps / 运维 <a class="header-anchor" href="#devops-运维" aria-label="Permalink to &quot;DevOps / 运维&quot;">​</a></h4><ol><li><p><strong>必读</strong>：<a href="./02-工作流设计/CI-CD工作流设计">CI/CD 工作流设计</a></p><ul><li>了解 CI/CD 流水线设计</li><li>理解环境管理策略</li><li>理解部署流程</li></ul></li><li><p><strong>必读</strong>：<a href="./03-实践指南/Docker镜像构建指南">Docker 镜像构建指南</a></p><ul><li>掌握 Monorepo 中的 Docker 构建流程</li><li>学习构建优化策略</li><li>了解 CI/CD 集成方案</li></ul></li><li><p><strong>推荐</strong>：<a href="./01-核心概念/主干开发与最佳实践">主干开发与最佳实践</a></p><ul><li>理解 IaC 理念</li><li>理解主干开发模式</li></ul></li></ol><h4 id="测试工程师" tabindex="-1">测试工程师 <a class="header-anchor" href="#测试工程师" aria-label="Permalink to &quot;测试工程师&quot;">​</a></h4><ol><li><p><strong>推荐</strong>：<a href="./01-核心概念/主干开发与最佳实践">主干开发与最佳实践</a></p><ul><li>理解新的测试模式</li><li>理解特性开关与测试</li></ul></li><li><p><strong>推荐</strong>：<a href="./02-工作流设计/CI-CD工作流设计">CI/CD 工作流设计</a></p><ul><li>了解预览环境测试流程</li><li>了解发布流程</li></ul></li></ol><h3 id="方式二-按顺序阅读" tabindex="-1">方式二：按顺序阅读 <a class="header-anchor" href="#方式二-按顺序阅读" aria-label="Permalink to &quot;方式二：按顺序阅读&quot;">​</a></h3><h4 id="第一阶段-理解概念-30-40分钟" tabindex="-1">第一阶段：理解概念（30-40分钟） <a class="header-anchor" href="#第一阶段-理解概念-30-40分钟" aria-label="Permalink to &quot;第一阶段：理解概念（30-40分钟）&quot;">​</a></h4><ol><li><a href="./01-核心概念/主干开发与最佳实践">主干开发与最佳实践</a><ul><li>什么是主干开发</li><li>为什么采用主干开发</li><li>特性开关的作用</li><li>基础设施即代码</li></ul></li></ol><h4 id="第二阶段-掌握流程-40-50分钟" tabindex="-1">第二阶段：掌握流程（40-50分钟） <a class="header-anchor" href="#第二阶段-掌握流程-40-50分钟" aria-label="Permalink to &quot;第二阶段：掌握流程（40-50分钟）&quot;">​</a></h4><ol start="2"><li><a href="./02-工作流设计/CI-CD工作流设计">CI/CD 工作流设计</a><ul><li>完整的工作流设计</li><li>角色和职责</li><li>变更集管理</li><li>CI/CD 流水线</li></ul></li></ol><h4 id="第三阶段-实践应用-30-40分钟" tabindex="-1">第三阶段：实践应用（30-40分钟） <a class="header-anchor" href="#第三阶段-实践应用-30-40分钟" aria-label="Permalink to &quot;第三阶段：实践应用（30-40分钟）&quot;">​</a></h4><ol start="3"><li><a href="./03-实践指南/Docker镜像构建指南">Docker 镜像构建指南</a><ul><li>pnpm + Turbo + Docker 配合</li><li>预构建策略与多阶段构建</li><li>CI/CD 集成方案</li><li>最佳实践和优化技巧</li></ul></li></ol><hr><h2 id="🎯-核心概念速览" tabindex="-1">🎯 核心概念速览 <a class="header-anchor" href="#🎯-核心概念速览" aria-label="Permalink to &quot;🎯 核心概念速览&quot;">​</a></h2><h3 id="主干开发-trunk-based-development" tabindex="-1">主干开发（Trunk-Based Development） <a class="header-anchor" href="#主干开发-trunk-based-development" aria-label="Permalink to &quot;主干开发（Trunk-Based Development）&quot;">​</a></h3><ul><li><strong>定义</strong>：开发人员围绕着主干分支上协作和编写代码，而没有其它共享的长期分支</li><li><strong>目标</strong>：持续集成、持续发布</li><li><strong>模式</strong>：小型团队直接提交，成规模团队使用短期特性分支</li></ul><h3 id="特性开关-feature-flags" tabindex="-1">特性开关（Feature Flags） <a class="header-anchor" href="#特性开关-feature-flags" aria-label="Permalink to &quot;特性开关（Feature Flags）&quot;">​</a></h3><ul><li><strong>定义</strong>：通过特性标志在不部署新版本的情况下切换特性</li><li><strong>目标</strong>：解耦部署和发布，实现灰度发布和 A/B 测试</li><li><strong>应用</strong>：结合 AB 实验、灰度发布、版本管理</li></ul><h3 id="基础设施即代码-iac" tabindex="-1">基础设施即代码（IaC） <a class="header-anchor" href="#基础设施即代码-iac" aria-label="Permalink to &quot;基础设施即代码（IaC）&quot;">​</a></h3><ul><li><strong>定义</strong>：将基础架构资源编码为文本文件并提交到版本控制系统</li><li><strong>目标</strong>：版本控制、一致性、可复现性、团队协作</li><li><strong>实践</strong>：构建流水线、环境配置、阿波罗配置</li></ul><h3 id="变更集-changeset" tabindex="-1">变更集（Changeset） <a class="header-anchor" href="#变更集-changeset" aria-label="Permalink to &quot;变更集（Changeset）&quot;">​</a></h3><ul><li><strong>定义</strong>：描述代码变更的 Markdown 文件</li><li><strong>作用</strong>：驱动版本发布，生成 CHANGELOG</li><li><strong>格式</strong>：包含包名、变更类型、变更描述</li></ul><hr><h2 id="🚀-快速开始" tabindex="-1">🚀 快速开始 <a class="header-anchor" href="#🚀-快速开始" aria-label="Permalink to &quot;🚀 快速开始&quot;">​</a></h2><h3 id="开发者快速开始" tabindex="-1">开发者快速开始 <a class="header-anchor" href="#开发者快速开始" aria-label="Permalink to &quot;开发者快速开始&quot;">​</a></h3><p><strong>1. 创建特性分支</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> checkout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feature/add-button-component</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>2. 完成开发</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开发代码...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>3. 创建变更集</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> changeset</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 选择变更的包和类型</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 填写变更描述</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>4. 提交并创建 PR</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;feat: 添加按钮组件&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> feature/add-button-component</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 GitHub/GitLab 创建 PR</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>5. 等待审查和合并</strong></p><ul><li>PR 会自动部署到预览环境</li><li>评审者审查代码</li><li>合并后自动触发版本管理流程</li></ul><h3 id="devops-快速开始" tabindex="-1">DevOps 快速开始 <a class="header-anchor" href="#devops-快速开始" aria-label="Permalink to &quot;DevOps 快速开始&quot;">​</a></h3><p><strong>1. 配置 CI/CD 流水线</strong></p><ul><li>复制工作流配置文件到 <code>.github/workflows/</code></li><li>配置 Secrets（NPM_TOKEN、DEPLOY_WEBHOOK_URL 等）</li><li>配置环境（preview、stage、production）</li></ul><p><strong>2. 验证流水线</strong></p><ul><li>创建测试 PR，验证预览发布</li><li>合并 PR，验证版本管理</li><li>合并版本 PR，验证正式发布</li></ul><hr><h2 id="📋-分支模型" tabindex="-1">📋 分支模型 <a class="header-anchor" href="#📋-分支模型" aria-label="Permalink to &quot;📋 分支模型&quot;">​</a></h2><h3 id="分支类型" tabindex="-1">分支类型 <a class="header-anchor" href="#分支类型" aria-label="Permalink to &quot;分支类型&quot;">​</a></h3><table tabindex="0"><thead><tr><th>分支类型</th><th>命名规范</th><th>生命周期</th><th>用途</th></tr></thead><tbody><tr><td><strong>主干分支</strong></td><td><code>main</code></td><td>永久</td><td>唯一的长期分支</td></tr><tr><td><strong>特性分支</strong></td><td><code>feature/*</code></td><td>短期（几天）</td><td>开发新特性</td></tr><tr><td><strong>修复分支</strong></td><td><code>bugfix/*</code></td><td>短期（几天）</td><td>修复问题</td></tr><tr><td><strong>发布分支</strong></td><td><code>release/*</code></td><td>短期（自动创建）</td><td>版本发布（只读）</td></tr><tr><td><strong>版本管理分支</strong></td><td><code>changeset-release/main</code></td><td>短期（自动创建）</td><td>版本 PR</td></tr></tbody></table><h3 id="分支约束" tabindex="-1">分支约束 <a class="header-anchor" href="#分支约束" aria-label="Permalink to &quot;分支约束&quot;">​</a></h3><p><strong>允许：</strong></p><ul><li>✅ 从 main 创建短期特性分支</li><li>✅ 特性分支允许&quot;结对编程&quot;</li><li>✅ 自动化工具创建发布分支</li></ul><p><strong>禁止：</strong></p><ul><li>❌ 除了&quot;结对编程&quot;之外的共享分支</li><li>❌ 主干之外的长期分支</li><li>❌ 开发者在发布分支上提交代码</li></ul><hr><h2 id="🔄-工作流程" tabindex="-1">🔄 工作流程 <a class="header-anchor" href="#🔄-工作流程" aria-label="Permalink to &quot;🔄 工作流程&quot;">​</a></h2><h3 id="开发流程" tabindex="-1">开发流程 <a class="header-anchor" href="#开发流程" aria-label="Permalink to &quot;开发流程&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 创建特性分支</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. 完成代码开发</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. 运行 pnpm changeset</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>4. 提交代码并创建 PR</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>5. 自动发布预览版</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>6. 代码评审</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>7. 合并到 main</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="发布流程" tabindex="-1">发布流程 <a class="header-anchor" href="#发布流程" aria-label="Permalink to &quot;发布流程&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 合并特性 PR 到 main</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. Action 收集变更集</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. Action 生成版本 PR</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>4. 评审版本 PR</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>5. 合并版本 PR</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>6. Action 发布到 npm</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>7. Action 创建 Git Tags</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>8. Action 构建 Docker 镜像</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>9. Action 通知部署系统</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>10. DeploySystem 部署生产环境</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><hr><h2 id="👥-角色和职责" tabindex="-1">👥 角色和职责 <a class="header-anchor" href="#👥-角色和职责" aria-label="Permalink to &quot;👥 角色和职责&quot;">​</a></h2><h3 id="人类角色" tabindex="-1">人类角色 <a class="header-anchor" href="#人类角色" aria-label="Permalink to &quot;人类角色&quot;">​</a></h3><table tabindex="0"><thead><tr><th>角色</th><th>职责</th><th>关键动作</th></tr></thead><tbody><tr><td><strong>PR Author</strong></td><td>创建和维护 PR</td><td>创建变更集、提交 PR、响应评审</td></tr><tr><td><strong>PR Reviewer</strong></td><td>代码评审</td><td>审查代码、提出意见、批准 PR</td></tr><tr><td><strong>PR Assignee</strong></td><td>PR 合并决策</td><td>合并特性 PR、合并版本 PR</td></tr></tbody></table><h3 id="自动化角色" tabindex="-1">自动化角色 <a class="header-anchor" href="#自动化角色" aria-label="Permalink to &quot;自动化角色&quot;">​</a></h3><table tabindex="0"><thead><tr><th>角色</th><th>职责</th><th>关键动作</th></tr></thead><tbody><tr><td><strong>Action</strong></td><td>自动化构建和发布</td><td>运行测试、发布预览、生成版本、发布正式版</td></tr><tr><td><strong>DeploySystem</strong></td><td>应用部署</td><td>部署预览环境、部署生产环境、服务监控</td></tr></tbody></table><hr><h2 id="🔗-相关资源" tabindex="-1">🔗 相关资源 <a class="header-anchor" href="#🔗-相关资源" aria-label="Permalink to &quot;🔗 相关资源&quot;">​</a></h2><h3 id="内部资源" tabindex="-1">内部资源 <a class="header-anchor" href="#内部资源" aria-label="Permalink to &quot;内部资源&quot;">​</a></h3><ul><li><strong>MVP 验证仓库</strong>：<a href="https://gitlab.gaoding.com/gdesign/monorepo-workflows-example" target="_blank" rel="noreferrer">https://gitlab.gaoding.com/gdesign/monorepo-workflows-example</a></li><li><strong>PingCode 任务管理</strong>：关联任务使用 <code>#PINGCODE-ID</code> 格式</li></ul><h3 id="外部资源" tabindex="-1">外部资源 <a class="header-anchor" href="#外部资源" aria-label="Permalink to &quot;外部资源&quot;">​</a></h3><p><strong>主干开发：</strong></p><ul><li>Paul Hammant: 基于主干开发</li><li>Google Cloud: 基于主干开发</li></ul><p><strong>基础设施即代码：</strong></p><ul><li>Amazon: 什么是基础设施即代码</li><li>Atlassian: 基础设施即代码</li><li>Google Cloud 上的基础架构即代码</li></ul><p><strong>特性开关：</strong></p><ul><li>Martin Fowler: Feature Toggles</li><li>LaunchDarkly: 特性开关管理平台</li><li>Unleash: 开源特性开关平台</li></ul><p><strong>Changesets：</strong></p><ul><li>Changesets 官方文档</li><li>Changesets GitHub 仓库</li></ul><hr><h2 id="❓-常见问题" tabindex="-1">❓ 常见问题 <a class="header-anchor" href="#❓-常见问题" aria-label="Permalink to &quot;❓ 常见问题&quot;">​</a></h2><h3 id="q1-为什么要采用主干开发模式" tabindex="-1">Q1: 为什么要采用主干开发模式？ <a class="header-anchor" href="#q1-为什么要采用主干开发模式" aria-label="Permalink to &quot;Q1: 为什么要采用主干开发模式？&quot;">​</a></h3><p><strong>A:</strong> 主干开发是持续集成、持续发布的最佳实践：</p><ul><li>减少集成冲突</li><li>提高部署频率</li><li>加快问题发现</li><li>适用于各种规模的团队</li></ul><h3 id="q2-什么是变更集-为什么需要它" tabindex="-1">Q2: 什么是变更集？为什么需要它？ <a class="header-anchor" href="#q2-什么是变更集-为什么需要它" aria-label="Permalink to &quot;Q2: 什么是变更集？为什么需要它？&quot;">​</a></h3><p><strong>A:</strong> 变更集是描述代码变更的文件：</p><ul><li>驱动版本发布</li><li>自动生成 CHANGELOG</li><li>明确变更影响范围</li><li>遵循语义化版本规范</li></ul><h3 id="q3-如何处理紧急修复" tabindex="-1">Q3: 如何处理紧急修复？ <a class="header-anchor" href="#q3-如何处理紧急修复" aria-label="Permalink to &quot;Q3: 如何处理紧急修复？&quot;">​</a></h3><p><strong>A:</strong> 紧急修复也遵循同样的流程：</p><ol><li>创建 bugfix 分支</li><li>快速修复并测试</li><li>创建变更集（patch 类型）</li><li>提交 PR 进行快速评审</li><li>合并后自动发布</li></ol><h3 id="q4-预览环境什么时候创建和销毁" tabindex="-1">Q4: 预览环境什么时候创建和销毁？ <a class="header-anchor" href="#q4-预览环境什么时候创建和销毁" aria-label="Permalink to &quot;Q4: 预览环境什么时候创建和销毁？&quot;">​</a></h3><p><strong>A:</strong> 预览环境生命周期：</p><ul><li><strong>创建</strong>：PR 创建或更新时自动创建</li><li><strong>销毁</strong>：PR 关闭或合并后自动销毁</li><li><strong>注意</strong>：stage 环境是共享的，需要协调使用</li></ul><h3 id="q5-如何回滚版本" tabindex="-1">Q5: 如何回滚版本？ <a class="header-anchor" href="#q5-如何回滚版本" aria-label="Permalink to &quot;Q5: 如何回滚版本？&quot;">​</a></h3><p><strong>A:</strong> 回滚策略：</p><ul><li><strong>应用回滚</strong>：通过 DeploySystem 回滚到上一个版本</li><li><strong>代码回滚</strong>：创建 revert PR，走正常发布流程</li><li><strong>快速回滚</strong>：可以使用 DeploySystem 的快速回滚功能</li></ul><h3 id="q6-特性开关会不会增加技术债务" tabindex="-1">Q6: 特性开关会不会增加技术债务？ <a class="header-anchor" href="#q6-特性开关会不会增加技术债务" aria-label="Permalink to &quot;Q6: 特性开关会不会增加技术债务？&quot;">​</a></h3><p><strong>A:</strong> 需要注意管理：</p><ul><li>定期清理已稳定的特性标志</li><li>保持特性标志的可搜索性</li><li>使用工具自动检测过期标志</li><li>文档记录特性标志的生命周期</li></ul><hr><h2 id="📝-最佳实践" tabindex="-1">📝 最佳实践 <a class="header-anchor" href="#📝-最佳实践" aria-label="Permalink to &quot;📝 最佳实践&quot;">​</a></h2><h3 id="开发最佳实践" tabindex="-1">开发最佳实践 <a class="header-anchor" href="#开发最佳实践" aria-label="Permalink to &quot;开发最佳实践&quot;">​</a></h3><p><strong>变更集：</strong></p><ul><li>✅ 每个 PR 都包含变更集</li><li>✅ 变更描述清晰明了</li><li>✅ 关联 PingCode 任务</li><li>✅ 选择正确的变更类型</li></ul><p><strong>PR：</strong></p><ul><li>✅ PR 保持小而专注（200-400 行）</li><li>✅ PR 标题和描述清晰</li><li>✅ 及时响应评审意见</li><li>✅ 合并后删除特性分支</li></ul><p><strong>分支：</strong></p><ul><li>✅ 特性分支生命周期不超过几天</li><li>✅ 及时同步 main 分支的变更</li><li>✅ 分支命名规范清晰</li></ul><h3 id="发布最佳实践" tabindex="-1">发布最佳实践 <a class="header-anchor" href="#发布最佳实践" aria-label="Permalink to &quot;发布最佳实践&quot;">​</a></h3><p><strong>发布频率：</strong></p><ul><li>✅ 定期发布，避免积累</li><li>✅ 小批量频繁发布</li><li>✅ 发布前充分测试</li></ul><p><strong>发布流程：</strong></p><ul><li>✅ 准备好回滚方案</li><li>✅ 使用灰度发布策略</li><li>✅ 发布后监控服务状态</li><li>✅ 及时响应问题</li></ul><p><strong>版本管理：</strong></p><ul><li>✅ 遵循语义化版本规范</li><li>✅ 维护清晰的 CHANGELOG</li><li>✅ 创建有意义的 Git Tags</li></ul><hr><h2 id="🎓-学习路径" tabindex="-1">🎓 学习路径 <a class="header-anchor" href="#🎓-学习路径" aria-label="Permalink to &quot;🎓 学习路径&quot;">​</a></h2><h3 id="新人入门-1-2-天" tabindex="-1">新人入门（1-2 天） <a class="header-anchor" href="#新人入门-1-2-天" aria-label="Permalink to &quot;新人入门（1-2 天）&quot;">​</a></h3><ol><li>阅读 <a href="./01-核心概念/主干开发与最佳实践">主干开发与最佳实践</a></li><li>理解基本概念和术语</li><li>观看现有 PR 的流程</li></ol><h3 id="实践操作-3-5-天" tabindex="-1">实践操作（3-5 天） <a class="header-anchor" href="#实践操作-3-5-天" aria-label="Permalink to &quot;实践操作（3-5 天）&quot;">​</a></h3><ol><li>创建第一个 PR</li><li>学习创建变更集</li><li>体验预览环境</li><li>参与代码评审</li></ol><h3 id="深入理解-1-2-周" tabindex="-1">深入理解（1-2 周） <a class="header-anchor" href="#深入理解-1-2-周" aria-label="Permalink to &quot;深入理解（1-2 周）&quot;">​</a></h3><ol><li>阅读 <a href="./02-工作流设计/CI-CD工作流设计">CI/CD 工作流设计</a></li><li>理解 CI/CD 流水线</li><li>学习环境管理</li><li>参与版本发布</li></ol><h3 id="实践应用-持续" tabindex="-1">实践应用（持续） <a class="header-anchor" href="#实践应用-持续" aria-label="Permalink to &quot;实践应用（持续）&quot;">​</a></h3><ol><li>阅读 <a href="./03-实践指南/Docker镜像构建指南">Docker 镜像构建指南</a></li><li>配置项目的 Docker 构建</li><li>优化构建性能</li><li>集成到 CI/CD 流程</li></ol><hr><h2 id="📅-更新记录" tabindex="-1">📅 更新记录 <a class="header-anchor" href="#📅-更新记录" aria-label="Permalink to &quot;📅 更新记录&quot;">​</a></h2><table tabindex="0"><thead><tr><th>版本</th><th>日期</th><th>更新内容</th><th>更新人</th></tr></thead><tbody><tr><td>v1.0</td><td>2025-01-25</td><td>初始版本，整合 RFC 17 和主干开发文档</td><td>AI</td></tr></tbody></table><hr><h2 id="📞-联系方式" tabindex="-1">📞 联系方式 <a class="header-anchor" href="#📞-联系方式" aria-label="Permalink to &quot;📞 联系方式&quot;">​</a></h2><ul><li><strong>技术问题</strong>：联系 DevOps 团队</li><li><strong>流程问题</strong>：联系技术负责人</li><li><strong>工具问题</strong>：查看 MVP 验证仓库或提交 Issue</li></ul><hr><p><em>最后更新：2025-01-25</em></p>`,140)]))}const b=s(e,[["render",t]]);export{u as __pageData,b as default};

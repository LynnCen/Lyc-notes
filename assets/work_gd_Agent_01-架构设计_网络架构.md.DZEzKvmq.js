import{_ as e,C as s,c as r,o as l,a7 as t,b as o,w as n,a as d,G as g,a9 as h}from"./chunks/framework.BQb8NfN9.js";const f=JSON.parse('{"title":"Agent 网络架构设计","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/Agent/01-架构设计/网络架构.md","filePath":"work/gd/Agent/01-架构设计/网络架构.md","lastUpdated":1770085732000}'),E={name:"work/gd/Agent/01-架构设计/网络架构.md"};function A(p,a,u,c,b,B){const i=s("Mermaid");return l(),r("div",null,[a[1]||(a[1]=t('<h1 id="agent-网络架构设计" tabindex="-1">Agent 网络架构设计 <a class="header-anchor" href="#agent-网络架构设计" aria-label="Permalink to &quot;Agent 网络架构设计&quot;">​</a></h1><h2 id="一、架构概述" tabindex="-1">一、架构概述 <a class="header-anchor" href="#一、架构概述" aria-label="Permalink to &quot;一、架构概述&quot;">​</a></h2><p>稿定 AI Agent 采用分层架构设计，通过短连接和长连接集群分离，实现高效的服务调度和资源管理。本文档详细描述了 Agent 系统的网络架构、服务组件和调用关系。</p><hr><h2 id="二、整体架构图" tabindex="-1">二、整体架构图 <a class="header-anchor" href="#二、整体架构图" aria-label="Permalink to &quot;二、整体架构图&quot;">​</a></h2>',5)),(l(),o(h,null,{default:n(()=>[g(i,{id:"mermaid-13",class:"mermaid",graph:"graph%20TD%0Asubgraph%20%22%E7%9F%AD%E8%BF%9E%E6%8E%A5%E9%AB%98%20QPS%20%E6%9C%8D%E5%8A%A1%EF%BC%8C%E9%BB%98%E8%AE%A4%E9%9B%86%E7%BE%A4%22%0Adirection%20TB%0Asubgraph%20%22%E7%9F%AD%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%22%0Agdesign-tool%5B%22gdesign-tool%0A(%E7%9F%AD%E8%BF%9E%E6%8E%A5%2C%20%E9%AB%98%20QPS)%0A%22%5D%0Alightboat%5B%22%E8%BD%BB%E8%88%9F%0A(%E7%9F%AD%E8%BF%9E%E6%8E%A5%2C%20%E9%AB%98%20QPS)%22%5D%0Acrc%5B%22CRC%0A(%E7%9F%AD%E8%BF%9E%E6%8E%A5%2C%20%E9%AB%98%20QPS)%22%5D%0Aend%0Aend%0A%0Asubgraph%20%22%E9%9D%A2%E5%90%91%20Agent%20%E4%B8%9A%E5%8A%A1%E7%9A%84%E9%9B%86%E7%BE%A4%22%0Adirection%20TB%0A%0Aagent%5B%22Agent%20%E6%9C%8D%E5%8A%A1%22%5D%0Agdesign-tool-async%5B%22gdesign-tool%0A(%E9%95%BF%E8%BF%9E%E6%8E%A5%E9%9B%86%E7%BE%A4)%0AAgent%20%E5%B7%A5%E5%85%B7%E6%9C%8D%E5%8A%A1%22%5D%0Aend%0A%0Asubgraph%20%22AI%20%E8%83%BD%E5%8A%9B%E5%AF%B9%E6%8E%A5%E5%B1%82%22%0Adirection%20TB%0A%0Aai-gateway%5B%22AI%20Gateway%0A(LLM%20%E7%BD%91%E5%85%B3)%22%5D%0A%0Adify%5B%22Dify%20%E5%BA%94%E7%94%A8%E5%B9%B3%E5%8F%B0%22%5D%0Aend%0A%0Asubgraph%20%22%20%22%0A%0Asubgraph%20%22LLM%20%E5%B9%B3%E5%8F%B0%22%0Avolc%5B%22%E7%81%AB%E5%B1%B1%E5%BC%95%E6%93%8E%22%5D%0Aali%5B%22%E9%98%BF%E9%87%8C%E7%99%BE%E7%82%BC%22%5D%0Aplatform%5B%22%E5%85%B6%E4%BB%96%E5%B9%B3%E5%8F%B0%22%5D%0Aend%0A%0Asubgraph%20%22%E5%9F%BA%E7%A1%80%E6%A8%A1%E5%9E%8B%22%0Adoubao%5B%22Doubao%22%5D%0Aqwen%5B%22Qwen%22%5D%0Amodel%5B%22%E5%85%B6%E4%BB%96%E6%A8%A1%E5%9E%8B%22%5D%0Aend%0Aend%0A%0Asubgraph%20%22%E7%BD%91%E5%85%B3%E5%B1%82%22%0Akong%5B%22Kong%20%E7%BD%91%E5%85%B3%0A(%E7%9F%AD%E8%BF%9E%E6%8E%A5)%22%5D%0Akong-sse%5B%22Kong%20%E7%BD%91%E5%85%B3%0A(SSE%20%E4%B8%93%E7%94%A8%2C%20%E9%95%BF%E8%BF%9E%E6%8E%A5)%22%5D%0Aend%0A%0A%25%25%20%E7%9F%AD%E8%BF%9E%E6%8E%A5%E9%93%BE%E8%B7%AF%0Akong%20--%3E%7C%E7%9F%AD%E8%BF%9E%E6%8E%A5%0A%E8%B6%85%E6%97%B6%3A%2060s%0A%E9%AB%98%20QPS%7C%20gdesign-tool%0Agdesign-tool%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20lightboat%0Agdesign-tool%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20crc%0Agdesign-tool%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20dify%0A%0A%25%25%20%E9%95%BF%E8%BF%9E%E6%8E%A5%E9%93%BE%E8%B7%AF%0Akong-sse%20--%3E%7C%E9%95%BF%E8%BF%9E%E6%8E%A5%0A%E8%B6%85%E6%97%B6%3A%2015mins%0ASSE%7C%20agent%0Aagent%20--%3E%7C%E9%95%BF%E4%BB%BB%E5%8A%A1%E5%A4%84%E7%90%86%0A%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%7C%20gdesign-tool-async%0Agdesign-tool-async%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20dify%0Agdesign-tool-async%20--%3E%7C%E8%B0%83%E7%94%A8%7C%20lightboat%0A%0A%25%25%20LLM%E8%B0%83%E7%94%A8%E9%93%BE%E8%B7%AF%0Adify%20--%3E%7C%E8%B7%AF%E7%94%B1%7C%20ai-gateway%0Aai-gateway%20--%3E%7C%E6%A8%A1%E5%9E%8B%E8%B7%AF%E7%94%B1%7C%20volc%0Aai-gateway%20--%3E%7C%E6%A8%A1%E5%9E%8B%E8%B7%AF%E7%94%B1%7C%20ali%0Aai-gateway%20--%3E%7C%E6%A8%A1%E5%9E%8B%E8%B7%AF%E7%94%B1%7C%20platform%0Avolc%20--%3E%7C%E5%BA%95%E5%B1%82%E6%A8%A1%E5%9E%8B%7C%20doubao%0Aali%20--%3E%7C%E5%BA%95%E5%B1%82%E6%A8%A1%E5%9E%8B%7C%20qwen%0Aplatform%20--%3E%7C%E5%BA%95%E5%B1%82%E6%A8%A1%E5%9E%8B%7C%20model%0A%0Aagent%20--%3E%7C%E9%95%BF%E6%97%B6%E5%A4%84%E7%90%86%0ALLM%20%E8%B0%83%E7%94%A8%7C%20ai-gateway%0A%0AclassDef%20shortConnection%20fill%3A%23e8f5e8%2Cstroke%3A%234caf50%0AclassDef%20longConnection%20fill%3A%23fff3e0%2Cstroke%3A%23ff9800%0AclassDef%20gateway%20fill%3A%23e3f2fd%2Cstroke%3A%232196f3%0AclassDef%20mainEntry%20fill%3A%23e8f5e8%2Cstroke%3A%23ff5722%2Cstroke-width%3A2px%0AclassDef%20platformService%20fill%3A%23f3e5f5%2Cstroke%3A%239c27b0%0AclassDef%20llmService%20fill%3A%23f3f3f3%2Cstroke%3A%23a3a3a3%0A%0Aclass%20lightboat%2Ccrc%20shortConnection%0Aclass%20agent%20longConnection%0Aclass%20kong%2Ckong-sse%20gateway%0Aclass%20gdesign-tool%2Cgdesign-tool-async%20mainEntry%0Aclass%20dify%2Cai-gateway%20platformService%0Aclass%20volc%2Cali%2Cplatform%2Cdoubao%2Cqwen%2Cmodel%20llmService%0A"})]),fallback:n(()=>a[0]||(a[0]=[d(" Loading... ")])),_:1})),a[2]||(a[2]=t(`<hr><h2 id="三、架构分层" tabindex="-1">三、架构分层 <a class="header-anchor" href="#三、架构分层" aria-label="Permalink to &quot;三、架构分层&quot;">​</a></h2><h3 id="_3-1-网关层" tabindex="-1">3.1 网关层 <a class="header-anchor" href="#_3-1-网关层" aria-label="Permalink to &quot;3.1 网关层&quot;">​</a></h3><h4 id="kong-网关-短连接" tabindex="-1">Kong 网关（短连接） <a class="header-anchor" href="#kong-网关-短连接" aria-label="Permalink to &quot;Kong 网关（短连接）&quot;">​</a></h4><ul><li><strong>功能</strong>：处理常规的短连接请求</li><li><strong>超时设置</strong>：60 秒</li><li><strong>特点</strong>：高 QPS，快速响应</li><li><strong>服务对象</strong>：gdesign-tool 等短连接服务</li></ul><h4 id="kong-网关-sse-专用-长连接" tabindex="-1">Kong 网关（SSE 专用，长连接） <a class="header-anchor" href="#kong-网关-sse-专用-长连接" aria-label="Permalink to &quot;Kong 网关（SSE 专用，长连接）&quot;">​</a></h4><ul><li><strong>功能</strong>：专门处理 Server-Sent Events (SSE) 长连接</li><li><strong>超时设置</strong>：15 分钟</li><li><strong>特点</strong>：支持流式数据传输</li><li><strong>服务对象</strong>：Agent 服务</li></ul><p><strong>设计理由：</strong></p><ul><li>短连接和长连接分离，避免资源竞争</li><li>SSE 专用网关优化长连接处理</li><li>独立的超时配置满足不同业务需求</li></ul><hr><h3 id="_3-2-服务层" tabindex="-1">3.2 服务层 <a class="header-anchor" href="#_3-2-服务层" aria-label="Permalink to &quot;3.2 服务层&quot;">​</a></h3><h4 id="短连接高-qps-服务集群" tabindex="-1">短连接高 QPS 服务集群 <a class="header-anchor" href="#短连接高-qps-服务集群" aria-label="Permalink to &quot;短连接高 QPS 服务集群&quot;">​</a></h4><p><strong>gdesign-tool（短连接）</strong></p><ul><li><strong>类型</strong>：短连接，高 QPS</li><li><strong>职责</strong>：常规设计工具服务，快速响应</li><li><strong>调用关系</strong>： <ul><li>→ 轻舟（Lightboat）</li><li>→ CRC</li><li>→ Dify</li></ul></li></ul><p><strong>轻舟（Lightboat）</strong></p><ul><li><strong>类型</strong>：短连接，高 QPS</li><li><strong>职责</strong>：提供基础设计能力</li></ul><p><strong>CRC</strong></p><ul><li><strong>类型</strong>：短连接，高 QPS</li><li><strong>职责</strong>：内容审核与合规检查</li></ul><h4 id="agent-业务集群" tabindex="-1">Agent 业务集群 <a class="header-anchor" href="#agent-业务集群" aria-label="Permalink to &quot;Agent 业务集群&quot;">​</a></h4><p><strong>Agent 服务</strong></p><ul><li><strong>类型</strong>：长连接</li><li><strong>职责</strong>：AI Agent 核心服务，处理复杂的多轮对话和任务编排</li><li><strong>调用关系</strong>： <ul><li>→ gdesign-tool（长连接集群）</li><li>→ AI Gateway</li></ul></li><li><strong>特点</strong>： <ul><li>支持 SSE 流式输出</li><li>长时任务处理</li><li>智能工具调用</li></ul></li></ul><p><strong>gdesign-tool（长连接集群）</strong></p><ul><li><strong>类型</strong>：长连接</li><li><strong>职责</strong>：为 Agent 提供工具调用能力</li><li><strong>调用关系</strong>： <ul><li>→ Dify</li><li>→ 轻舟</li></ul></li><li><strong>特点</strong>： <ul><li>与短连接集群隔离</li><li>优化长时任务处理</li><li>支持异步调用</li></ul></li></ul><hr><h3 id="_3-3-ai-能力对接层" tabindex="-1">3.3 AI 能力对接层 <a class="header-anchor" href="#_3-3-ai-能力对接层" aria-label="Permalink to &quot;3.3 AI 能力对接层&quot;">​</a></h3><h4 id="ai-gateway-llm-网关" tabindex="-1">AI Gateway（LLM 网关） <a class="header-anchor" href="#ai-gateway-llm-网关" aria-label="Permalink to &quot;AI Gateway（LLM 网关）&quot;">​</a></h4><ul><li><strong>职责</strong>：LLM 模型路由和统一接入</li><li><strong>功能</strong>： <ul><li>模型选择和负载均衡</li><li>请求转发和响应聚合</li><li>统一的 API 接口</li></ul></li><li><strong>支持平台</strong>： <ul><li>火山引擎 → Doubao</li><li>阿里百炼 → Qwen</li><li>其他平台 → 其他模型</li></ul></li></ul><h4 id="dify-应用平台" tabindex="-1">Dify 应用平台 <a class="header-anchor" href="#dify-应用平台" aria-label="Permalink to &quot;Dify 应用平台&quot;">​</a></h4><ul><li><strong>职责</strong>：AI 应用编排平台</li><li><strong>功能</strong>： <ul><li>Workflow 编排</li><li>Prompt 管理</li><li>应用发布</li></ul></li><li><strong>集成</strong>：与 AI Gateway 协同工作</li></ul><hr><h3 id="_3-4-llm-平台层" tabindex="-1">3.4 LLM 平台层 <a class="header-anchor" href="#_3-4-llm-平台层" aria-label="Permalink to &quot;3.4 LLM 平台层&quot;">​</a></h3><h4 id="llm-平台" tabindex="-1">LLM 平台 <a class="header-anchor" href="#llm-平台" aria-label="Permalink to &quot;LLM 平台&quot;">​</a></h4><table tabindex="0"><thead><tr><th>平台</th><th>基础模型</th><th>特点</th></tr></thead><tbody><tr><td>火山引擎</td><td>Doubao</td><td>高性能，低成本</td></tr><tr><td>阿里百炼</td><td>Qwen</td><td>开源生态，灵活部署</td></tr><tr><td>其他平台</td><td>其他模型</td><td>多模态能力</td></tr></tbody></table><hr><h2 id="四、调用链路" tabindex="-1">四、调用链路 <a class="header-anchor" href="#四、调用链路" aria-label="Permalink to &quot;四、调用链路&quot;">​</a></h2><h3 id="_4-1-短连接链路" tabindex="-1">4.1 短连接链路 <a class="header-anchor" href="#_4-1-短连接链路" aria-label="Permalink to &quot;4.1 短连接链路&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户请求 </span></span>
<span class="line"><span>  → Kong 网关（短连接，60s 超时）</span></span>
<span class="line"><span>  → gdesign-tool（短连接集群）</span></span>
<span class="line"><span>  → [轻舟 / CRC / Dify]</span></span>
<span class="line"><span>  → 快速响应</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>特点：</strong></p><ul><li>✅ 快速响应（秒级）</li><li>✅ 高 QPS 支持</li><li>✅ 适合简单任务</li></ul><p><strong>适用场景：</strong></p><ul><li>单次工具调用</li><li>快速查询</li><li>状态查询</li></ul><hr><h3 id="_4-2-长连接链路-sse" tabindex="-1">4.2 长连接链路（SSE） <a class="header-anchor" href="#_4-2-长连接链路-sse" aria-label="Permalink to &quot;4.2 长连接链路（SSE）&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>用户请求 </span></span>
<span class="line"><span>  → Kong 网关（SSE 专用，15mins 超时）</span></span>
<span class="line"><span>  → Agent 服务</span></span>
<span class="line"><span>  → gdesign-tool（长连接集群）</span></span>
<span class="line"><span>  → [Dify / 轻舟]</span></span>
<span class="line"><span>  → 流式响应</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>特点：</strong></p><ul><li>✅ 支持流式输出</li><li>✅ 长时任务处理（分钟级）</li><li>✅ 实时反馈</li></ul><p><strong>适用场景：</strong></p><ul><li>多轮对话</li><li>复杂任务编排</li><li>流式内容生成</li></ul><hr><h3 id="_4-3-llm-调用链路" tabindex="-1">4.3 LLM 调用链路 <a class="header-anchor" href="#_4-3-llm-调用链路" aria-label="Permalink to &quot;4.3 LLM 调用链路&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Agent 服务 / Dify</span></span>
<span class="line"><span>  → AI Gateway</span></span>
<span class="line"><span>  → [火山引擎 / 阿里百炼 / 其他平台]</span></span>
<span class="line"><span>  → [Doubao / Qwen / 其他模型]</span></span>
<span class="line"><span>  → LLM 响应</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>特点：</strong></p><ul><li>✅ 统一接入</li><li>✅ 模型路由</li><li>✅ 负载均衡</li></ul><hr><h2 id="五、架构设计原则" tabindex="-1">五、架构设计原则 <a class="header-anchor" href="#五、架构设计原则" aria-label="Permalink to &quot;五、架构设计原则&quot;">​</a></h2><h3 id="_5-1-集群隔离" tabindex="-1">5.1 集群隔离 <a class="header-anchor" href="#_5-1-集群隔离" aria-label="Permalink to &quot;5.1 集群隔离&quot;">​</a></h3><p><strong>短连接集群 vs 长连接集群</strong></p><table tabindex="0"><thead><tr><th>维度</th><th>短连接集群</th><th>长连接集群</th></tr></thead><tbody><tr><td>超时时间</td><td>60s</td><td>15mins</td></tr><tr><td>QPS</td><td>高</td><td>中低</td></tr><tr><td>资源占用</td><td>低</td><td>高</td></tr><tr><td>适用场景</td><td>快速查询</td><td>复杂任务</td></tr></tbody></table><p><strong>隔离好处：</strong></p><ul><li>避免资源竞争</li><li>独立扩缩容</li><li>故障隔离</li></ul><h3 id="_5-2-网关分离" tabindex="-1">5.2 网关分离 <a class="header-anchor" href="#_5-2-网关分离" aria-label="Permalink to &quot;5.2 网关分离&quot;">​</a></h3><p><strong>Kong 短连接网关 vs Kong SSE 网关</strong></p><p><strong>分离理由：</strong></p><ul><li>SSE 长连接占用连接资源更多</li><li>超时配置需求不同</li><li>监控和告警策略不同</li></ul><h3 id="_5-3-服务分层" tabindex="-1">5.3 服务分层 <a class="header-anchor" href="#_5-3-服务分层" aria-label="Permalink to &quot;5.3 服务分层&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>网关层 → 服务层 → AI 能力层 → LLM 平台层</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>优势：</strong></p><ul><li>职责清晰</li><li>易于扩展</li><li>故障隔离</li></ul><hr><h2 id="六、性能与可用性" tabindex="-1">六、性能与可用性 <a class="header-anchor" href="#六、性能与可用性" aria-label="Permalink to &quot;六、性能与可用性&quot;">​</a></h2><h3 id="_6-1-超时策略" tabindex="-1">6.1 超时策略 <a class="header-anchor" href="#_6-1-超时策略" aria-label="Permalink to &quot;6.1 超时策略&quot;">​</a></h3><table tabindex="0"><thead><tr><th>层级</th><th>超时时间</th><th>说明</th></tr></thead><tbody><tr><td>Kong 短连接</td><td>60s</td><td>覆盖 99% 短连接场景</td></tr><tr><td>Kong SSE</td><td>15mins</td><td>支持复杂任务</td></tr><tr><td>gdesign-tool</td><td>可配置</td><td>根据具体工具调整</td></tr><tr><td>AI Gateway</td><td>120s</td><td>LLM 调用超时</td></tr></tbody></table><h3 id="_6-2-高可用设计" tabindex="-1">6.2 高可用设计 <a class="header-anchor" href="#_6-2-高可用设计" aria-label="Permalink to &quot;6.2 高可用设计&quot;">​</a></h3><p><strong>服务层面：</strong></p><ul><li>✅ 多实例部署</li><li>✅ 健康检查</li><li>✅ 自动重启</li></ul><p><strong>网关层面：</strong></p><ul><li>✅ Kong 集群部署</li><li>✅ 负载均衡</li><li>✅ 熔断降级</li></ul><p><strong>LLM 层面：</strong></p><ul><li>✅ 多平台接入</li><li>✅ 模型备份</li><li>✅ 降级策略</li></ul><hr><h2 id="七、扩展性" tabindex="-1">七、扩展性 <a class="header-anchor" href="#七、扩展性" aria-label="Permalink to &quot;七、扩展性&quot;">​</a></h2><h3 id="_7-1-横向扩展" tabindex="-1">7.1 横向扩展 <a class="header-anchor" href="#_7-1-横向扩展" aria-label="Permalink to &quot;7.1 横向扩展&quot;">​</a></h3><p><strong>服务扩展：</strong></p><ul><li>Agent 服务可独立扩容</li><li>gdesign-tool 集群可独立扩容</li><li>AI Gateway 支持横向扩展</li></ul><p><strong>LLM 扩展：</strong></p><ul><li>新增 LLM 平台接入</li><li>新增基础模型支持</li><li>模型版本管理</li></ul><h3 id="_7-2-功能扩展" tabindex="-1">7.2 功能扩展 <a class="header-anchor" href="#_7-2-功能扩展" aria-label="Permalink to &quot;7.2 功能扩展&quot;">​</a></h3><p><strong>工具生态：</strong></p><ul><li>新增工具通过 gdesign-tool 统一接入</li><li>支持自定义工具</li><li>工具版本管理</li></ul><p><strong>应用编排：</strong></p><ul><li>Dify 支持复杂 Workflow</li><li>可视化编排</li><li>低代码开发</li></ul><hr><h2 id="八、监控与告警" tabindex="-1">八、监控与告警 <a class="header-anchor" href="#八、监控与告警" aria-label="Permalink to &quot;八、监控与告警&quot;">​</a></h2><h3 id="_8-1-关键指标" tabindex="-1">8.1 关键指标 <a class="header-anchor" href="#_8-1-关键指标" aria-label="Permalink to &quot;8.1 关键指标&quot;">​</a></h3><p><strong>网关层：</strong></p><ul><li>请求 QPS</li><li>响应时间</li><li>错误率</li></ul><p><strong>服务层：</strong></p><ul><li>Agent 服务可用性</li><li>gdesign-tool 调用成功率</li><li>工具调用延迟</li></ul><p><strong>LLM 层：</strong></p><ul><li>AI Gateway 可用性</li><li>模型调用成功率</li><li>Token 消耗</li></ul><h3 id="_8-2-告警规则" tabindex="-1">8.2 告警规则 <a class="header-anchor" href="#_8-2-告警规则" aria-label="Permalink to &quot;8.2 告警规则&quot;">​</a></h3><table tabindex="0"><thead><tr><th>指标</th><th>阈值</th><th>告警级别</th></tr></thead><tbody><tr><td>服务可用性</td><td>&lt; 99%</td><td>P0</td></tr><tr><td>请求成功率</td><td>&lt; 95%</td><td>P1</td></tr><tr><td>响应时间 P99</td><td>&gt; 10s</td><td>P2</td></tr><tr><td>LLM 调用失败率</td><td>&gt; 5%</td><td>P1</td></tr></tbody></table><hr><h2 id="九、总结" tabindex="-1">九、总结 <a class="header-anchor" href="#九、总结" aria-label="Permalink to &quot;九、总结&quot;">​</a></h2><h3 id="_9-1-核心设计" tabindex="-1">9.1 核心设计 <a class="header-anchor" href="#_9-1-核心设计" aria-label="Permalink to &quot;9.1 核心设计&quot;">​</a></h3><ol><li><strong>集群隔离</strong>：短连接和长连接集群分离</li><li><strong>网关分离</strong>：SSE 专用网关独立部署</li><li><strong>服务分层</strong>：清晰的分层架构</li><li><strong>统一接入</strong>：AI Gateway 统一 LLM 接入</li></ol><h3 id="_9-2-架构优势" tabindex="-1">9.2 架构优势 <a class="header-anchor" href="#_9-2-架构优势" aria-label="Permalink to &quot;9.2 架构优势&quot;">​</a></h3><ul><li>✅ 高性能：短连接高 QPS，长连接流式输出</li><li>✅ 高可用：多层级故障隔离</li><li>✅ 易扩展：模块化设计，支持横向扩展</li><li>✅ 易维护：职责清晰，监控完善</li></ul><hr><p><em>文档版本：v1.0</em><br><em>最后更新：2025-01-26</em></p>`,110))])}const C=e(E,[["render",A]]);export{f as __pageData,C as default};

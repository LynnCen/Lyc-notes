import{_ as a,c as n,o as i,a7 as l}from"./chunks/framework.BQb8NfN9.js";const c=JSON.parse('{"title":"Import Map 技术文档集","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/import-map/README.md","filePath":"work/gd/import-map/README.md","lastUpdated":1770085732000}'),t={name:"work/gd/import-map/README.md"};function e(p,s,r,h,o,d){return i(),n("div",null,s[0]||(s[0]=[l(`<h1 id="import-map-技术文档集" tabindex="-1">Import Map 技术文档集 <a class="header-anchor" href="#import-map-技术文档集" aria-label="Permalink to &quot;Import Map 技术文档集&quot;">​</a></h1><blockquote><p><strong>文档集概述</strong><br> 本目录包含了 Import Map 技术的完整文档体系，从基础概念到工具演进，再到实践指南。</p></blockquote><hr><h2 id="📚-文档目录" tabindex="-1">📚 文档目录 <a class="header-anchor" href="#📚-文档目录" aria-label="Permalink to &quot;📚 文档目录&quot;">​</a></h2><h3 id="_1️⃣-基础概念" tabindex="-1">1️⃣ 基础概念 <a class="header-anchor" href="#_1️⃣-基础概念" aria-label="Permalink to &quot;1️⃣ 基础概念&quot;">​</a></h3><p><strong><a href="./01-基础概念-importmap与ESM-CDN介绍">01-基础概念-importmap与ESM-CDN介绍.md</a></strong></p><ul><li>Import Map 基础概念与特性</li><li>ESM CDN 服务介绍</li><li>WPM 工具使用指南</li><li>包规范要求</li><li>实际应用收益</li></ul><p><strong>适合人群</strong>：</p><ul><li>🎯 新手入门</li><li>🎯 了解 Import Map 概念</li><li>🎯 了解 ESM CDN 和 WPM</li></ul><hr><h3 id="_2️⃣-工具演进" tabindex="-1">2️⃣ 工具演进 <a class="header-anchor" href="#_2️⃣-工具演进" aria-label="Permalink to &quot;2️⃣ 工具演进&quot;">​</a></h3><h4 id="_02-工具演进-rfc15-wpm2-md" tabindex="-1"><strong><a href="./02-工具演进-RFC15-WPM2">02-工具演进-RFC15-WPM2.md</a></strong> <a class="header-anchor" href="#_02-工具演进-rfc15-wpm2-md" aria-label="Permalink to &quot;**[02-工具演进-RFC15-WPM2.md](02-工具演进-RFC15-WPM2.md)**&quot;">​</a></h4><p><strong>WPM v1 → WPM2 升级</strong></p><ul><li>WPM v1 的局限性分析</li><li>WPM2 的设计方案</li><li>支持包的子路径入口</li><li>确保依赖版本一致性</li><li>完全自动化的生成流程</li></ul><p><strong>适合人群</strong>：</p><ul><li>🎯 了解 WPM 工具演进</li><li>🎯 需要子路径支持</li><li>🎯 关注版本一致性</li></ul><h4 id="_03-工具演进-rfc20-wpm3-md" tabindex="-1"><strong><a href="./03-工具演进-RFC20-WPM3">03-工具演进-RFC20-WPM3.md</a></strong> <a class="header-anchor" href="#_03-工具演进-rfc20-wpm3-md" aria-label="Permalink to &quot;**[03-工具演进-RFC20-WPM3.md](03-工具演进-RFC20-WPM3.md)**&quot;">​</a></h4><p><strong>WPM2 → WPM3 升级</strong></p><ul><li>Monorepo Workspace 包支持</li><li>使用 Git Commit Hash 作为版本</li><li>Workspace 与 npm 包混合使用</li><li>完整的 CI/CD 集成方案</li></ul><p><strong>适合人群</strong>：</p><ul><li>🎯 Monorepo 项目开发者</li><li>🎯 需要 Workspace 包支持</li><li>🎯 关注 CI/CD 自动化</li></ul><hr><h3 id="_3️⃣-实践指南" tabindex="-1">3️⃣ 实践指南 <a class="header-anchor" href="#_3️⃣-实践指南" aria-label="Permalink to &quot;3️⃣ 实践指南&quot;">​</a></h3><p><strong><a href="./04-实践指南-浏览器兼容性处理">04-实践指南-浏览器兼容性处理.md</a></strong></p><ul><li>ES Module Shims 垫片使用</li><li>标准化的加载方式</li><li>开发与生产环境兼容</li><li>错误处理与性能优化</li></ul><p><strong>适合人群</strong>：</p><ul><li>🎯 需要兼容旧版浏览器</li><li>🎯 处理生产环境部署</li><li>🎯 优化加载性能</li></ul><hr><h2 id="🗂️-目录结构" tabindex="-1">🗂️ 目录结构 <a class="header-anchor" href="#🗂️-目录结构" aria-label="Permalink to &quot;🗂️ 目录结构&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import-map/</span></span>
<span class="line"><span>├── README.md                                      # 本文档</span></span>
<span class="line"><span>├── 01-基础概念-importmap与ESM-CDN介绍.md          # 基础概念</span></span>
<span class="line"><span>├── 02-工具演进-RFC15-WPM2.md                     # WPM2 RFC</span></span>
<span class="line"><span>├── 03-工具演进-RFC20-WPM3.md                     # WPM3 RFC</span></span>
<span class="line"><span>├── 04-实践指南-浏览器兼容性处理.md                 # 兼容性指南</span></span>
<span class="line"><span>└── attachments/                                   # 所有图片附件</span></span>
<span class="line"><span>    ├── image2022-6-16_15-25-5.png                # CDN 工作流程图</span></span>
<span class="line"><span>    ├── image2022-12-7_14-42-24.png               # 插件干扰提示</span></span>
<span class="line"><span>    ├── image2022-12-8_13-41-45.png               # 裸模块导入错误</span></span>
<span class="line"><span>    ├── importmap-workspace.png                    # Workspace 流程图</span></span>
<span class="line"><span>    ├── wpm2 importmap 生成.png                    # WPM2 生成流程</span></span>
<span class="line"><span>    └── ...                                        # 其他图片</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><h2 id="🎯-学习路径" tabindex="-1">🎯 学习路径 <a class="header-anchor" href="#🎯-学习路径" aria-label="Permalink to &quot;🎯 学习路径&quot;">​</a></h2><h3 id="路径-1-新手入门" tabindex="-1">路径 1：新手入门 <a class="header-anchor" href="#路径-1-新手入门" aria-label="Permalink to &quot;路径 1：新手入门&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 阅读基础概念文档</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. 了解浏览器兼容性处理</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. 根据需要深入工具文档</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="路径-2-工具升级" tabindex="-1">路径 2：工具升级 <a class="header-anchor" href="#路径-2-工具升级" aria-label="Permalink to &quot;路径 2：工具升级&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 阅读基础概念（了解背景）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. RFC 15: WPM2（了解第一次升级）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. RFC 20: WPM3（了解 Monorepo 支持）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>4. 实践指南（部署到生产）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="路径-3-快速实践" tabindex="-1">路径 3：快速实践 <a class="header-anchor" href="#路径-3-快速实践" aria-label="Permalink to &quot;路径 3：快速实践&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 基础概念（了解原理）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. 浏览器兼容性处理（立即可用）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. 根据项目类型选择工具文档</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="🔑-关键概念" tabindex="-1">🔑 关键概念 <a class="header-anchor" href="#🔑-关键概念" aria-label="Permalink to &quot;🔑 关键概念&quot;">​</a></h2><h3 id="import-map" tabindex="-1">Import Map <a class="header-anchor" href="#import-map" aria-label="Permalink to &quot;Import Map&quot;">​</a></h3><p><strong>定义</strong>：浏览器中的模块版本管理标准</p><p><strong>核心价值</strong>：</p><ul><li>✅ 支持裸模块导入（Bare Module Imports）</li><li>✅ 浏览器原生运行时模块解析</li><li>✅ 跨应用/跨版本共享依赖</li><li>✅ 无构建更新</li></ul><h3 id="esm-cdn" tabindex="-1">ESM CDN <a class="header-anchor" href="#esm-cdn" aria-label="Permalink to &quot;ESM CDN&quot;">​</a></h3><p><strong>定义</strong>：以 npm 作为托管中心、原生 ES Module 格式的 CDN 服务</p><p><strong>核心服务</strong>：</p><ul><li>📦 <strong>esm.dancf.com</strong>：稿定自建 CDN</li><li>🌐 <strong>ga.jspm.io</strong>：JSPM 公共 CDN</li></ul><p><strong>URL 格式</strong>：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://esm.dancf.com/npm:package@version/file</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="wpm-系列工具" tabindex="-1">WPM 系列工具 <a class="header-anchor" href="#wpm-系列工具" aria-label="Permalink to &quot;WPM 系列工具&quot;">​</a></h3><p><strong>演进路径</strong>：</p><table tabindex="0"><thead><tr><th>工具</th><th>核心能力</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>WPM v1</strong></td><td>基础 Import Map 生成</td><td>简单项目</td></tr><tr><td><strong>WPM2</strong></td><td>子路径 + 版本一致性</td><td>npm 包项目</td></tr><tr><td><strong>WPM3</strong></td><td>Workspace + Git 版本</td><td>Monorepo 项目</td></tr></tbody></table><hr><h2 id="📊-技术对比" tabindex="-1">📊 技术对比 <a class="header-anchor" href="#📊-技术对比" aria-label="Permalink to &quot;📊 技术对比&quot;">​</a></h2><h3 id="import-map-vs-传统构建" tabindex="-1">Import Map vs 传统构建 <a class="header-anchor" href="#import-map-vs-传统构建" aria-label="Permalink to &quot;Import Map vs 传统构建&quot;">​</a></h3><table tabindex="0"><thead><tr><th>对比项</th><th>传统构建</th><th>Import Map</th></tr></thead><tbody><tr><td><strong>缓存策略</strong></td><td>深度依赖更新导致全部失效</td><td>依赖独立缓存</td></tr><tr><td><strong>更新方式</strong></td><td>重新构建整个项目</td><td>只更新 Import Map</td></tr><tr><td><strong>跨应用共享</strong></td><td>不支持</td><td>✅ 原生支持</td></tr><tr><td><strong>构建时间</strong></td><td>需要构建</td><td>无需构建</td></tr><tr><td><strong>包标准</strong></td><td>较松散</td><td>严格规范</td></tr></tbody></table><h3 id="wpm-工具对比" tabindex="-1">WPM 工具对比 <a class="header-anchor" href="#wpm-工具对比" aria-label="Permalink to &quot;WPM 工具对比&quot;">​</a></h3><table tabindex="0"><thead><tr><th>特性</th><th>WPM v1</th><th>WPM2</th><th>WPM3</th></tr></thead><tbody><tr><td><strong>npm 包</strong></td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td><strong>子路径</strong></td><td>❌</td><td>✅</td><td>✅</td></tr><tr><td><strong>版本一致性</strong></td><td>⚠️ 易出错</td><td>✅ 保证</td><td>✅ 保证</td></tr><tr><td><strong>Workspace</strong></td><td>❌</td><td>❌</td><td>✅</td></tr><tr><td><strong>Git 版本</strong></td><td>❌</td><td>❌</td><td>✅</td></tr><tr><td><strong>CI/CD 集成</strong></td><td>简单</td><td>简单</td><td>完整</td></tr></tbody></table><hr><h2 id="🛠️-快速开始" tabindex="-1">🛠️ 快速开始 <a class="header-anchor" href="#🛠️-快速开始" aria-label="Permalink to &quot;🛠️ 快速开始&quot;">​</a></h2><h3 id="场景-1-简单项目" tabindex="-1">场景 1：简单项目 <a class="header-anchor" href="#场景-1-简单项目" aria-label="Permalink to &quot;场景 1：简单项目&quot;">​</a></h3><p><strong>使用 WPM2 + Import Map</strong></p><ol><li>安装工具</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @growing-web/wpm2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li>配置 package.json</li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;browserImportMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;packages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;defaultProvider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dancf&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;postinstall&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wpm2&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="3"><li>生成 Import Map</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="4"><li>在 HTML 中使用</li></ol><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;importmap&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/importmap.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>详细文档</strong>：<a href="./02-工具演进-RFC15-WPM2">02-工具演进-RFC15-WPM2.md</a></p><h3 id="场景-2-monorepo-项目" tabindex="-1">场景 2：Monorepo 项目 <a class="header-anchor" href="#场景-2-monorepo-项目" aria-label="Permalink to &quot;场景 2：Monorepo 项目&quot;">​</a></h3><p><strong>使用 WPM3 + CI/CD</strong></p><ol><li>配置 package.json</li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;browserImportMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;packages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;react&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>配置 CI/CD 流程</li></ol><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build workspace packages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm build:packages</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Generate Import Map</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm wpm3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>详细文档</strong>：<a href="./03-工具演进-RFC20-WPM3">03-工具演进-RFC20-WPM3.md</a></p><h3 id="场景-3-兼容旧浏览器" tabindex="-1">场景 3：兼容旧浏览器 <a class="header-anchor" href="#场景-3-兼容旧浏览器" aria-label="Permalink to &quot;场景 3：兼容旧浏览器&quot;">​</a></h3><p><strong>使用 ES Module Shims</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- 引入垫片 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTMLScriptElement.supports </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HTMLScriptElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">supports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;importmap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 垫片代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- Import Map --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;importmap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;imports&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &quot;vue&quot;: &quot;https://esm.dancf.com/npm:vue@2.7.13/dist/vue.runtime.esm.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>详细文档</strong>：<a href="./04-实践指南-浏览器兼容性处理">04-实践指南-浏览器兼容性处理.md</a></p><hr><h2 id="🔗-相关资源" tabindex="-1">🔗 相关资源 <a class="header-anchor" href="#🔗-相关资源" aria-label="Permalink to &quot;🔗 相关资源&quot;">​</a></h2><h3 id="官方文档" tabindex="-1">官方文档 <a class="header-anchor" href="#官方文档" aria-label="Permalink to &quot;官方文档&quot;">​</a></h3><ul><li><a href="https://github.com/WICG/import-maps" target="_blank" rel="noreferrer">WICG Import Maps Spec</a></li><li><a href="https://github.com/guybedford/es-module-shims" target="_blank" rel="noreferrer">ES Module Shims</a></li><li><a href="https://github.com/jspm/generator" target="_blank" rel="noreferrer">JSPM Generator</a></li></ul><h3 id="cdn-服务" tabindex="-1">CDN 服务 <a class="header-anchor" href="#cdn-服务" aria-label="Permalink to &quot;CDN 服务&quot;">​</a></h3><ul><li><a href="https://esm.dancf.com" target="_blank" rel="noreferrer">esm.dancf.com</a> - 稿定 ESM CDN</li><li><a href="https://ga.jspm.io" target="_blank" rel="noreferrer">ga.jspm.io</a> - JSPM CDN</li><li><a href="https://www.jsdelivr.com/" target="_blank" rel="noreferrer">jsDelivr</a> - 公共 CDN</li></ul><h3 id="工具资源" tabindex="-1">工具资源 <a class="header-anchor" href="#工具资源" aria-label="Permalink to &quot;工具资源&quot;">​</a></h3><ul><li><a href="https://generator.jspm.io/" target="_blank" rel="noreferrer">JSPM Generator Online</a></li><li><a href="https://jspm.org/import-map-viewer" target="_blank" rel="noreferrer">Import Map Viewer</a></li></ul><hr><h2 id="📝-文档维护" tabindex="-1">📝 文档维护 <a class="header-anchor" href="#📝-文档维护" aria-label="Permalink to &quot;📝 文档维护&quot;">​</a></h2><p><strong>维护团队</strong>：前端基建团队<br><strong>整理日期</strong>：2025-01-24<br><strong>文档版本</strong>：v1.0</p><p><strong>更新记录</strong>：</p><ul><li>2025-01-24：初始版本，整合 4 篇 Import Map 相关文档</li></ul><hr><h2 id="💡-贡献指南" tabindex="-1">💡 贡献指南 <a class="header-anchor" href="#💡-贡献指南" aria-label="Permalink to &quot;💡 贡献指南&quot;">​</a></h2><p>如果你发现文档有误或需要补充：</p><ol><li>在 Confluence 原文档提出修改建议</li><li>联系前端基建团队更新</li><li>定期同步最新版本到本地</li></ol><hr><h2 id="❓-常见问题" tabindex="-1">❓ 常见问题 <a class="header-anchor" href="#❓-常见问题" aria-label="Permalink to &quot;❓ 常见问题&quot;">​</a></h2><h3 id="q1-应该使用哪个版本的-wpm" tabindex="-1">Q1：应该使用哪个版本的 WPM？ <a class="header-anchor" href="#q1-应该使用哪个版本的-wpm" aria-label="Permalink to &quot;Q1：应该使用哪个版本的 WPM？&quot;">​</a></h3><p><strong>答案</strong>：</p><ul><li>非 Monorepo 项目 → <strong>WPM2</strong></li><li>Monorepo 项目 → <strong>WPM3</strong></li></ul><h3 id="q2-import-map-兼容性如何" tabindex="-1">Q2：Import Map 兼容性如何？ <a class="header-anchor" href="#q2-import-map-兼容性如何" aria-label="Permalink to &quot;Q2：Import Map 兼容性如何？&quot;">​</a></h3><p><strong>答案</strong>：</p><ul><li>现代浏览器（Chrome 89+）原生支持</li><li>旧版浏览器使用 ES Module Shims 垫片</li><li>参考：<a href="./04-实践指南-浏览器兼容性处理">浏览器兼容性处理</a></li></ul><h3 id="q3-如何处理包的子路径" tabindex="-1">Q3：如何处理包的子路径？ <a class="header-anchor" href="#q3-如何处理包的子路径" aria-label="Permalink to &quot;Q3：如何处理包的子路径？&quot;">​</a></h3><p><strong>答案</strong>：</p><p>WPM2+ 原生支持，在 <code>packages</code> 中直接指定：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;browserImportMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;packages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;lit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;lit/decorators.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 子路径</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;lit/html.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="q4-workspace-包如何使用-import-map" tabindex="-1">Q4：Workspace 包如何使用 Import Map？ <a class="header-anchor" href="#q4-workspace-包如何使用-import-map" aria-label="Permalink to &quot;Q4：Workspace 包如何使用 Import Map？&quot;">​</a></h3><p><strong>答案</strong>：</p><p>使用 WPM3，自动支持 Workspace 包，使用 Git Commit Hash 作为版本。</p><p>详见：<a href="./03-工具演进-RFC20-WPM3">RFC 20: WPM3</a></p><hr><p><strong>Happy Coding! 🚀</strong></p>`,118)]))}const u=a(t,[["render",e]]);export{c as __pageData,u as default};

import{_ as a,c as n,o as i,a7 as l}from"./chunks/framework.BQb8NfN9.js";const b=JSON.parse('{"title":"前端基础架构文档","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/前端基础架构/README.md","filePath":"work/gd/前端基础架构/README.md","lastUpdated":1770085732000}'),e={name:"work/gd/前端基础架构/README.md"};function t(p,s,r,h,o,d){return i(),n("div",null,s[0]||(s[0]=[l(`<h1 id="前端基础架构文档" tabindex="-1">前端基础架构文档 <a class="header-anchor" href="#前端基础架构文档" aria-label="Permalink to &quot;前端基础架构文档&quot;">​</a></h1><h2 id="📖-文档概述" tabindex="-1">📖 文档概述 <a class="header-anchor" href="#📖-文档概述" aria-label="Permalink to &quot;📖 文档概述&quot;">​</a></h2><p>本文档介绍稿定前端可生长架构（微前端架构实现），涵盖基础设施、工具链、集成层和应用层的完整技术方案。这是一个<strong>技术栈无关、易于扩展、持续演进</strong>的前端生态系统设计。</p><hr><h2 id="🗂️-文档结构" tabindex="-1">🗂️ 文档结构 <a class="header-anchor" href="#🗂️-文档结构" aria-label="Permalink to &quot;🗂️ 文档结构&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>前端基础架构/</span></span>
<span class="line"><span>├── README.md                              # 本文件：文档导航</span></span>
<span class="line"><span>├── 前端可生长架构设计.md                   # RFC 0：完整架构设计</span></span>
<span class="line"><span>├── Widget系统设计.md                      # RFC 1：Widget 插件系统</span></span>
<span class="line"><span>└── attachments/                          # 图片附件</span></span>
<span class="line"><span>    ├── image2023-3-30_11-18-35.png      # 架构全景图</span></span>
<span class="line"><span>    ├── image2023-3-15_14-25-0.png       # Monorepo 结构</span></span>
<span class="line"><span>    ├── image2023-2-28_20-46-2.png       # Widget 编辑模式</span></span>
<span class="line"><span>    └── ...</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h2 id="📚-阅读指南" tabindex="-1">📚 阅读指南 <a class="header-anchor" href="#📚-阅读指南" aria-label="Permalink to &quot;📚 阅读指南&quot;">​</a></h2><h3 id="快速开始-5分钟" tabindex="-1">快速开始（5分钟） <a class="header-anchor" href="#快速开始-5分钟" aria-label="Permalink to &quot;快速开始（5分钟）&quot;">​</a></h3><ol><li><p><strong>了解核心理念</strong></p><ul><li>尊重 Web 标准</li><li>避免技术栈污染</li><li>减少构建依赖</li></ul></li><li><p><strong>理解架构分层</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>应用层 → 集成层 → 工具链层 → 基础设施层</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>掌握关键技术</strong></p><ul><li>Monorepo（单体仓库）</li><li>Importmap（模块集成）</li><li>挂件系统（微前端）</li></ul></li></ol><h3 id="深入学习-60-80分钟" tabindex="-1">深入学习（60-80分钟） <a class="header-anchor" href="#深入学习-60-80分钟" aria-label="Permalink to &quot;深入学习（60-80分钟）&quot;">​</a></h3><h4 id="第一阶段-理解整体架构-30-40分钟" tabindex="-1">第一阶段：理解整体架构（30-40分钟） <a class="header-anchor" href="#第一阶段-理解整体架构-30-40分钟" aria-label="Permalink to &quot;第一阶段：理解整体架构（30-40分钟）&quot;">​</a></h4><p>阅读 <a href="./前端可生长架构设计">前端可生长架构设计</a>（RFC 0），了解：</p><p><strong>第一部分：基础设施层（10分钟）</strong></p><ul><li>Monorepo 的优势和实施策略</li><li>DevOps 集成方案</li></ul><p><strong>第二部分：工具链层（10分钟）</strong></p><ul><li>Pnpm 包管理</li><li>Turborepo 构建系统</li><li>Wpm 和 ESM CDN</li></ul><p><strong>第三部分：集成层（5分钟）</strong></p><ul><li>Importmap 使用</li><li>挂件容器</li><li>Iliad 编辑器</li></ul><p><strong>第四部分：应用层（10分钟）</strong></p><ul><li>包的标准</li><li>代码资产定义</li><li>挂件规范</li></ul><p><strong>第五部分：未来规划（5分钟）</strong></p><ul><li>设计系统</li><li>元框架</li></ul><h4 id="第二阶段-掌握-widget-系统-30-40分钟" tabindex="-1">第二阶段：掌握 Widget 系统（30-40分钟） <a class="header-anchor" href="#第二阶段-掌握-widget-系统-30-40分钟" aria-label="Permalink to &quot;第二阶段：掌握 Widget 系统（30-40分钟）&quot;">​</a></h4><p>阅读 <a href="./Widget系统设计">Widget系统设计</a>（RFC 1），了解：</p><p><strong>第一部分：概念与动机（5分钟）</strong></p><ul><li>Widget 定义和应用场景</li><li>设计动机和核心理念</li></ul><p><strong>第二部分：基本模式（10分钟）</strong></p><ul><li>编辑模式（有限编辑、可配置）</li><li>开发模式（技术栈无关）</li><li>格式模式（NPM 包结构）</li></ul><p><strong>第三部分：技术实现（10分钟）</strong></p><ul><li>生命周期管理</li><li>ESM CDN 与 Importmap</li><li>依赖共享机制</li></ul><p><strong>第四部分：安全策略（10分钟）</strong></p><ul><li>Iframe Sandbox 模式</li><li>Web Worker + SSR 模式</li><li>Web Sandbox 模式</li><li>方案对比</li></ul><p><strong>第五部分：未来可能性（5分钟）</strong></p><ul><li>服务器端批量生成</li><li>插槽组合</li></ul><hr><h2 id="🎯-核心概念" tabindex="-1">🎯 核心概念 <a class="header-anchor" href="#🎯-核心概念" aria-label="Permalink to &quot;🎯 核心概念&quot;">​</a></h2><h3 id="架构分层" tabindex="-1">架构分层 <a class="header-anchor" href="#架构分层" aria-label="Permalink to &quot;架构分层&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌────────────────────────────────────────┐</span></span>
<span class="line"><span>│           应用层                        │</span></span>
<span class="line"><span>│   页面 / 挂件 / 组件 / SDK              │</span></span>
<span class="line"><span>└────────────────────────────────────────┘</span></span>
<span class="line"><span>                 ↓</span></span>
<span class="line"><span>┌────────────────────────────────────────┐</span></span>
<span class="line"><span>│           集成层                        │</span></span>
<span class="line"><span>│   Importmap / 挂件容器 / Iliad         │</span></span>
<span class="line"><span>└────────────────────────────────────────┘</span></span>
<span class="line"><span>                 ↓</span></span>
<span class="line"><span>┌────────────────────────────────────────┐</span></span>
<span class="line"><span>│          工具链层                       │</span></span>
<span class="line"><span>│   Pnpm / Turborepo / Wpm / ESM CDN    │</span></span>
<span class="line"><span>└────────────────────────────────────────┘</span></span>
<span class="line"><span>                 ↓</span></span>
<span class="line"><span>┌────────────────────────────────────────┐</span></span>
<span class="line"><span>│        基础设施层                       │</span></span>
<span class="line"><span>│       Monorepo / DevOps                │</span></span>
<span class="line"><span>└────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="monorepo" tabindex="-1">Monorepo <a class="header-anchor" href="#monorepo" aria-label="Permalink to &quot;Monorepo&quot;">​</a></h3><p><strong>定义：</strong><br> 一个仓库包含多个项目，以包颗粒度进行独立发布与部署</p><p><strong>核心优势：</strong></p><ul><li>✅ 可见性：跨团队协作</li><li>✅ 依赖管理：唯一依赖源</li><li>✅ 一致性：统一代码规范</li><li>✅ 原子提交：大规模重构</li><li>✅ 统一 CI/CD：相同部署流程</li></ul><h3 id="importmap" tabindex="-1">Importmap <a class="header-anchor" href="#importmap" aria-label="Permalink to &quot;Importmap&quot;">​</a></h3><p><strong>定义：</strong><br> Web 标准，在浏览器中映射模块标识符到 URL</p><p><strong>核心优势：</strong></p><ul><li>✅ 跨业务共享代码资产</li><li>✅ 无需打包，直接使用 CDN</li><li>✅ 依赖去重，只加载一次</li></ul><p><strong>示例：</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;importmap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;imports&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;react&quot;: &quot;https://esm.gaoding.com/react@18.0.0/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="挂件-widget" tabindex="-1">挂件（Widget） <a class="header-anchor" href="#挂件-widget" aria-label="Permalink to &quot;挂件（Widget）&quot;">​</a></h3><p><strong>定义：</strong><br> 前端中的微服务，通过容器运行在不同技术栈中。Widget 是为 Web 编辑器设计的插件类型，是一个由开发者代码实现的小区块。</p><p><strong>应用场景：</strong></p><ul><li>📊 数据驱动的图表、排行榜</li><li>🎰 交互式小游戏</li><li>📝 表单和数据提交</li></ul><p><strong>格式级别：</strong></p><ul><li><strong>Level 1</strong>：基础组件（Vue/React）</li><li><strong>Level 2</strong>：跨技术栈挂件（技术栈无关）</li><li><strong>Level 3</strong>：NoCode 可视化组件（提供清单）</li></ul><p><strong>生命周期：</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bootstrap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props) {},  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 初始化（首次挂载前）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(container, props) {},  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 挂载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(props) {},  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {},  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 卸载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 移除</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>核心特性：</strong></p><ul><li>✅ 基于 Web 标准（NPM、ESM、Importmap）</li><li>✅ 技术栈无关（支持 React、Vue 等）</li><li>✅ 依赖共享（peerDependencies）</li><li>✅ Shadow DOM 隔离</li><li>✅ 安全沙盒机制</li></ul><hr><h2 id="🚀-技术栈" tabindex="-1">🚀 技术栈 <a class="header-anchor" href="#🚀-技术栈" aria-label="Permalink to &quot;🚀 技术栈&quot;">​</a></h2><h3 id="基础设施" tabindex="-1">基础设施 <a class="header-anchor" href="#基础设施" aria-label="Permalink to &quot;基础设施&quot;">​</a></h3><table tabindex="0"><thead><tr><th>技术</th><th>说明</th></tr></thead><tbody><tr><td><strong>Monorepo</strong></td><td>单体仓库，统一代码管理</td></tr><tr><td><strong>DevOps</strong></td><td>CI/CD、多环境、灰度发布</td></tr></tbody></table><h3 id="工具链" tabindex="-1">工具链 <a class="header-anchor" href="#工具链" aria-label="Permalink to &quot;工具链&quot;">​</a></h3><table tabindex="0"><thead><tr><th>技术</th><th>说明</th><th>官网</th></tr></thead><tbody><tr><td><strong>Pnpm</strong></td><td>包管理工具</td><td><a href="https://pnpm.io/" target="_blank" rel="noreferrer">https://pnpm.io/</a></td></tr><tr><td><strong>Turborepo</strong></td><td>构建系统</td><td><a href="https://turbo.build/" target="_blank" rel="noreferrer">https://turbo.build/</a></td></tr><tr><td><strong>Vite</strong></td><td>推荐打包工具</td><td><a href="https://vitejs.dev/" target="_blank" rel="noreferrer">https://vitejs.dev/</a></td></tr><tr><td><strong>Rollup</strong></td><td>ESM 打包器</td><td><a href="https://rollupjs.org/" target="_blank" rel="noreferrer">https://rollupjs.org/</a></td></tr><tr><td><strong>Wpm</strong></td><td>Web 包管理工具（稿定自研）</td><td>-</td></tr><tr><td><strong>ESM CDN</strong></td><td>ESM Npm CDN（稿定自研）</td><td>-</td></tr></tbody></table><h3 id="集成" tabindex="-1">集成 <a class="header-anchor" href="#集成" aria-label="Permalink to &quot;集成&quot;">​</a></h3><table tabindex="0"><thead><tr><th>技术</th><th>说明</th></tr></thead><tbody><tr><td><strong>Importmap</strong></td><td>Web 标准模块映射</td></tr><tr><td><strong>Web Widget Container</strong></td><td>挂件运行容器（稿定自研）</td></tr><tr><td><strong>Iliad</strong></td><td>可视化编辑器（稿定自研）</td></tr></tbody></table><hr><h2 id="💡-设计原则" tabindex="-1">💡 设计原则 <a class="header-anchor" href="#💡-设计原则" aria-label="Permalink to &quot;💡 设计原则&quot;">​</a></h2><h3 id="核心理念" tabindex="-1">核心理念 <a class="header-anchor" href="#核心理念" aria-label="Permalink to &quot;核心理念&quot;">​</a></h3><ol><li><p><strong>尊重 Web 标准</strong><br> 最大程度避免造私有标准与平台</p></li><li><p><strong>避免技术栈污染</strong><br> 上游技术栈不污染下游</p></li><li><p><strong>减少构建依赖</strong><br> 提高开发效率</p></li><li><p><strong>技术栈无关</strong><br> 适应不同技术栈</p></li><li><p><strong>持续提升抽象层次</strong><br> ProCode 与 NoCode 融合</p></li></ol><h3 id="包的标准" tabindex="-1">包的标准 <a class="header-anchor" href="#包的标准" aria-label="Permalink to &quot;包的标准&quot;">​</a></h3><p><strong>必须满足：</strong></p><ul><li>✅ 语义化版本号</li><li>✅ 使用 <code>exports</code> 字段</li><li>✅ 默认导出 ESM 格式</li><li>✅ 浏览器兼容语法</li><li>✅ 条件导出</li><li>✅ 使用 <code>imports</code> 字段</li><li>✅ peerDependencies 共享依赖</li><li>✅ workspaces 协议</li><li>✅ 优先使用公共 Npm 源</li></ul><hr><h2 id="📋-代码资产" tabindex="-1">📋 代码资产 <a class="header-anchor" href="#📋-代码资产" aria-label="Permalink to &quot;📋 代码资产&quot;">​</a></h2><h3 id="资产类型" tabindex="-1">资产类型 <a class="header-anchor" href="#资产类型" aria-label="Permalink to &quot;资产类型&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>说明</th><th style="text-align:center;">共享</th><th style="text-align:center;">外部耦合</th><th style="text-align:center;">技术栈中立</th><th style="text-align:center;">可视化</th></tr></thead><tbody><tr><td><strong>页面</strong></td><td>与路由关联的模块</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td></tr><tr><td><strong>挂件</strong></td><td>微前端入口</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td><strong>组件</strong></td><td>UI 组件</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">⚠️</td></tr><tr><td><strong>SDK</strong></td><td>纯 API</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td></tr></tbody></table><h3 id="挂件规范" tabindex="-1">挂件规范 <a class="header-anchor" href="#挂件规范" aria-label="Permalink to &quot;挂件规范&quot;">​</a></h3><p><strong>Level 1：基础组件</strong></p><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ content }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>Level 2：跨技术栈</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Level 3：NoCode 可视化</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;组件名&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;props&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h2 id="🔄-工作流程" tabindex="-1">🔄 工作流程 <a class="header-anchor" href="#🔄-工作流程" aria-label="Permalink to &quot;🔄 工作流程&quot;">​</a></h2><h3 id="开发流程" tabindex="-1">开发流程 <a class="header-anchor" href="#开发流程" aria-label="Permalink to &quot;开发流程&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. 创建包</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>2. 遵循包标准</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>3. 本地开发（Vite）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>4. 提交 PR</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>5. CI 自动构建（Turborepo）</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>6. 发布到 Npm</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>7. 同步到 ESM CDN</span></span>
<span class="line"><span>   ↓</span></span>
<span class="line"><span>8. 通过 Importmap 集成</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="发布流程" tabindex="-1">发布流程 <a class="header-anchor" href="#发布流程" aria-label="Permalink to &quot;发布流程&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>本地构建 </span></span>
<span class="line"><span>  → Git 分支策略</span></span>
<span class="line"><span>  → DevOps CI/CD</span></span>
<span class="line"><span>  → 多环境部署</span></span>
<span class="line"><span>  → 灰度发布</span></span>
<span class="line"><span>  → 正式发布</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h2 id="❓-常见问题" tabindex="-1">❓ 常见问题 <a class="header-anchor" href="#❓-常见问题" aria-label="Permalink to &quot;❓ 常见问题&quot;">​</a></h2><h3 id="q1-为什么选择-monorepo" tabindex="-1">Q1: 为什么选择 Monorepo？ <a class="header-anchor" href="#q1-为什么选择-monorepo" aria-label="Permalink to &quot;Q1: 为什么选择 Monorepo？&quot;">​</a></h3><p><strong>A:</strong> Monorepo 提供：</p><ul><li>更好的代码可见性和协作</li><li>简化的依赖管理（唯一依赖源）</li><li>统一的工具链和 CI/CD</li><li>原子提交支持大规模重构</li></ul><h3 id="q2-为什么使用-importmap" tabindex="-1">Q2: 为什么使用 Importmap？ <a class="header-anchor" href="#q2-为什么使用-importmap" aria-label="Permalink to &quot;Q2: 为什么使用 Importmap？&quot;">​</a></h3><p><strong>A:</strong> Importmap 是 Web 标准，可以：</p><ul><li>在浏览器中直接使用 CDN 模块</li><li>跨业务共享代码资产</li><li>依赖去重，提高性能</li></ul><h3 id="q3-什么是挂件" tabindex="-1">Q3: 什么是挂件？ <a class="header-anchor" href="#q3-什么是挂件" aria-label="Permalink to &quot;Q3: 什么是挂件？&quot;">​</a></h3><p><strong>A:</strong> 挂件是稿定定义的微前端概念：</p><ul><li>前端中的微服务</li><li>技术栈无关</li><li>可插拔、可复用</li><li>支持可视化集成</li></ul><h3 id="q4-pnpm-vs-npm" tabindex="-1">Q4: Pnpm vs Npm？ <a class="header-anchor" href="#q4-pnpm-vs-npm" aria-label="Permalink to &quot;Q4: Pnpm vs Npm？&quot;">​</a></h3><p><strong>A:</strong> Pnpm 优势：</p><ul><li>极快的安装速度</li><li>节省磁盘空间（全局存储 + 硬链接）</li><li>更好的 Monorepo 支持</li><li>避免幽灵依赖</li></ul><h3 id="q5-turborepo-vs-lerna" tabindex="-1">Q5: Turborepo vs Lerna？ <a class="header-anchor" href="#q5-turborepo-vs-lerna" aria-label="Permalink to &quot;Q5: Turborepo vs Lerna？&quot;">​</a></h3><p><strong>A:</strong> Turborepo 优势：</p><ul><li>增量构建（只构建变更）</li><li>并行执行（多核 CPU）</li><li>远程缓存（团队共享）</li><li>更好的性能</li></ul><h3 id="q6-如何开始新项目" tabindex="-1">Q6: 如何开始新项目？ <a class="header-anchor" href="#q6-如何开始新项目" aria-label="Permalink to &quot;Q6: 如何开始新项目？&quot;">​</a></h3><p><strong>A:</strong> 步骤：</p><ol><li>加入现有 Monorepo</li><li>创建新包</li><li>遵循包标准</li><li>集成 CI/CD</li><li>灰度发布</li></ol><hr><h2 id="📝-实施指南" tabindex="-1">📝 实施指南 <a class="header-anchor" href="#📝-实施指南" aria-label="Permalink to &quot;📝 实施指南&quot;">​</a></h2><h3 id="新项目接入" tabindex="-1">新项目接入 <a class="header-anchor" href="#新项目接入" aria-label="Permalink to &quot;新项目接入&quot;">​</a></h3><p><strong>Step 1：创建包</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @gaoding/package</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Step 2：配置 package.json</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Step 3：开发和构建</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 本地开发</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 测试</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="现有项目迁移" tabindex="-1">现有项目迁移 <a class="header-anchor" href="#现有项目迁移" aria-label="Permalink to &quot;现有项目迁移&quot;">​</a></h3><p><strong>评估：</strong></p><ul><li>分析依赖</li><li>评估成本</li><li>制定计划</li></ul><p><strong>迁移：</strong></p><ul><li>调整结构</li><li>适配工具</li><li>迁移到 Monorepo</li></ul><p><strong>验证：</strong></p><ul><li>功能测试</li><li>性能测试</li><li>灰度发布</li></ul><hr><h2 id="🔗-参考资源" tabindex="-1">🔗 参考资源 <a class="header-anchor" href="#🔗-参考资源" aria-label="Permalink to &quot;🔗 参考资源&quot;">​</a></h2><h3 id="官方文档" tabindex="-1">官方文档 <a class="header-anchor" href="#官方文档" aria-label="Permalink to &quot;官方文档&quot;">​</a></h3><ul><li><strong>Monorepo Tools</strong>：<a href="https://monorepo.tools/" target="_blank" rel="noreferrer">https://monorepo.tools/</a></li><li><strong>Turborepo</strong>：<a href="https://turbo.build/" target="_blank" rel="noreferrer">https://turbo.build/</a></li><li><strong>Pnpm</strong>：<a href="https://pnpm.io/" target="_blank" rel="noreferrer">https://pnpm.io/</a></li><li><strong>Vite</strong>：<a href="https://vitejs.dev/" target="_blank" rel="noreferrer">https://vitejs.dev/</a></li><li><strong>Importmap</strong>：<a href="https://github.com/WICG/import-maps" target="_blank" rel="noreferrer">https://github.com/WICG/import-maps</a></li></ul><h3 id="延伸阅读" tabindex="-1">延伸阅读 <a class="header-anchor" href="#延伸阅读" aria-label="Permalink to &quot;延伸阅读&quot;">​</a></h3><ul><li>5 分钟搞懂 Monorepo</li><li>微前端架构最佳实践</li><li>ESM 模块系统详解</li><li>设计系统构建指南</li></ul><hr><h2 id="📞-联系方式" tabindex="-1">📞 联系方式 <a class="header-anchor" href="#📞-联系方式" aria-label="Permalink to &quot;📞 联系方式&quot;">​</a></h2><ul><li><strong>架构问题</strong>：联系前端架构团队</li><li><strong>工具问题</strong>：提交 Issue 或联系 DevOps</li><li><strong>业务接入</strong>：查看实施指南或联系对应团队</li></ul><hr><p><em>最后更新：2025-01-26</em><br><em>文档版本：v1.0 (RFC 0)</em></p>`,138)]))}const u=a(e,[["render",t]]);export{b as __pageData,u as default};

import{_ as s,c as a,o as p,a7 as e}from"./chunks/framework.BQb8NfN9.js";const d=JSON.parse('{"title":"02 - 整体架构设计","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/AI+智能设计编辑器架构文档/02-整体架构设计.md","filePath":"work/gd/AI+智能设计编辑器架构文档/02-整体架构设计.md","lastUpdated":1770085732000}'),l={name:"work/gd/AI+智能设计编辑器架构文档/02-整体架构设计.md"};function i(r,n,c,t,b,o){return p(),a("div",null,n[0]||(n[0]=[e(`<h1 id="_02-整体架构设计" tabindex="-1">02 - 整体架构设计 <a class="header-anchor" href="#_02-整体架构设计" aria-label="Permalink to &quot;02 - 整体架构设计&quot;">​</a></h1><blockquote><p><strong>导航</strong>：<a href="./README">📚 返回总目录</a> | <a href="./01-产品全景">⬅️ 上一篇：产品全景</a> | <a href="./03-编辑器基座">➡️ 下一篇：编辑器基座</a></p><p><strong>所属</strong>：AI+ 智能设计编辑器架构文档</p></blockquote><hr><h2 id="_2-1-分层架构-自上而下的设计思想" tabindex="-1">2.1 分层架构 - 自上而下的设计思想 <a class="header-anchor" href="#_2-1-分层架构-自上而下的设计思想" aria-label="Permalink to &quot;2.1 分层架构 - 自上而下的设计思想&quot;">​</a></h2><p>系统采用<strong>经典的五层架构</strong>，每一层职责清晰、边界明确，便于团队协作和长期维护。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌──────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│  📱 应用层 (Apps Layer)                                        │</span></span>
<span class="line"><span>│  ├─ design-ai-plus (国内版)      ← 面向中国用户              │</span></span>
<span class="line"><span>│  └─ insmind-ai-plus (国际版)     ← 面向海外用户              │</span></span>
<span class="line"><span>│  职责：环境配置、登录方式、多语言、支付对接                      │</span></span>
<span class="line"><span>└──────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                              ↓</span></span>
<span class="line"><span>┌──────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│  🎨 业务层 (Business Layer)                                   │</span></span>
<span class="line"><span>│  ├─ AI 聊天面板              ← 核心交互入口                   │</span></span>
<span class="line"><span>│  ├─ 工具栏 &amp; 属性面板        ← 传统编辑能力                   │</span></span>
<span class="line"><span>│  ├─ 历史记录 &amp; 模板库        ← 内容管理                       │</span></span>
<span class="line"><span>│  └─ 协同 &amp; 分享             ← 社交功能                        │</span></span>
<span class="line"><span>│  职责：业务功能实现、用户交互界面、产品差异化                    │</span></span>
<span class="line"><span>└──────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                              ↓</span></span>
<span class="line"><span>┌──────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│  🏗️ 基座层 (Foundation Layer)                                │</span></span>
<span class="line"><span>│  @design/design-foundation                                   │</span></span>
<span class="line"><span>│  ├─ 初始化系统 (installDesign)  ← 统一入口                   │</span></span>
<span class="line"><span>│  ├─ 配置管理                     ← API/权限/扩展              │</span></span>
<span class="line"><span>│  ├─ 生命周期管理                 ← 启动/销毁                  │</span></span>
<span class="line"><span>│  └─ 路由 &amp; 状态管理             ← 全局状态                    │</span></span>
<span class="line"><span>│  职责：提供标准化的编辑器基础设施，屏蔽底层复杂度                │</span></span>
<span class="line"><span>└──────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                              ↓</span></span>
<span class="line"><span>┌──────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│  ⚙️ 引擎层 (Engine Layer)                                     │</span></span>
<span class="line"><span>│  @editor/framework                                           │</span></span>
<span class="line"><span>│  ├─ 数据模型 (Data Model)       ← 元素/页面/模板             │</span></span>
<span class="line"><span>│  ├─ 命令系统 (Command)          ← 撤销/重做                  │</span></span>
<span class="line"><span>│  ├─ 事件系统 (Event Bus)        ← 跨模块通信                 │</span></span>
<span class="line"><span>│  └─ 插件系统 (Plugin)           ← 能力扩展                   │</span></span>
<span class="line"><span>│  职责：编辑器核心能力抽象，不依赖具体业务                        │</span></span>
<span class="line"><span>└──────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                              ↓</span></span>
<span class="line"><span>┌──────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│  🖼️ 渲染层 (Render Layer)                                     │</span></span>
<span class="line"><span>│  @editor/infinite-renderer (基于 PixiJS)                     │</span></span>
<span class="line"><span>│  ├─ 无限画布 (Infinite Canvas)  ← 无限滚动                   │</span></span>
<span class="line"><span>│  ├─ 视口管理 (Viewport)         ← 缩放/平移                  │</span></span>
<span class="line"><span>│  ├─ 虚拟化渲染                   ← 性能优化                   │</span></span>
<span class="line"><span>│  └─ WebGL 加速                  ← 硬件加速                   │</span></span>
<span class="line"><span>│  职责：高性能图形渲染，支持大规模元素流畅操作                    │</span></span>
<span class="line"><span>└──────────────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p><strong>为什么要分层？</strong></p><ol><li><strong>职责清晰</strong>：每层只关注自己的问题，降低复杂度</li><li><strong>解耦合</strong>：上层依赖下层，下层不知道上层，便于替换和测试</li><li><strong>可扩展</strong>：新增功能只需在对应层实现，不影响其他层</li><li><strong>团队协作</strong>：不同团队负责不同层，并行开发互不阻塞</li></ol><hr><h2 id="_2-2-三大核心设计理念" tabindex="-1">2.2 三大核心设计理念 <a class="header-anchor" href="#_2-2-三大核心设计理念" aria-label="Permalink to &quot;2.2 三大核心设计理念&quot;">​</a></h2><h3 id="理念-1-基座化-foundation-based-🏗️" tabindex="-1">理念 1：基座化（Foundation-Based）🏗️ <a class="header-anchor" href="#理念-1-基座化-foundation-based-🏗️" aria-label="Permalink to &quot;理念 1：基座化（Foundation-Based）🏗️&quot;">​</a></h3><p><strong>问题</strong>：多个应用（国内版、国际版、移动版）重复实现编辑器初始化逻辑，维护成本高。</p><p><strong>解决方案</strong>：抽象出统一的&quot;基座&quot;，提供标准化的初始化流程。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>传统方式（每个应用独立实现）：</span></span>
<span class="line"><span>  App A：自己初始化 Vue → 自己配置路由 → 自己注册插件 → 自己挂载</span></span>
<span class="line"><span>  App B：自己初始化 Vue → 自己配置路由 → 自己注册插件 → 自己挂载</span></span>
<span class="line"><span>  App C：...</span></span>
<span class="line"><span></span></span>
<span class="line"><span>基座化方式（统一入口）：</span></span>
<span class="line"><span>  所有应用：调用 installDesign(config) → 基座自动完成所有初始化</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>核心价值</strong>：</p><ul><li>✅ 减少 80% 的初始化代码</li><li>✅ 统一配置标准，避免遗漏</li><li>✅ 一处升级，所有应用受益</li></ul><h3 id="理念-2-插件化-plugin-based-🧩" tabindex="-1">理念 2：插件化（Plugin-Based）🧩 <a class="header-anchor" href="#理念-2-插件化-plugin-based-🧩" aria-label="Permalink to &quot;理念 2：插件化（Plugin-Based）🧩&quot;">​</a></h3><p><strong>问题</strong>：功能越来越多，代码耦合严重，牵一发动全身。</p><p><strong>解决方案</strong>：将功能模块拆分为独立的插件，按需加载。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>核心思想：</span></span>
<span class="line"><span>  编辑器内核（最小可运行） + N 个插件（可选功能）</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  基础版 = 内核                         （画布 + 基础编辑）</span></span>
<span class="line"><span>  标准版 = 内核 + AI 插件                （+ AI 生成）</span></span>
<span class="line"><span>  企业版 = 内核 + AI + 协同 + 品牌插件    （+ 团队协作）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>插件生命周期</strong>：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>加载阶段 → 注册阶段 → 启动阶段 → 运行阶段 → 卸载阶段</span></span>
<span class="line"><span>(Load)    (Register)  (Bootstrap) (Run)     (Unmount)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>核心价值</strong>：</p><ul><li>✅ 按需加载，减少首屏体积</li><li>✅ 功能隔离，互不影响</li><li>✅ 独立开发，独立部署</li></ul><h3 id="理念-3-事件驱动-event-driven-📡" tabindex="-1">理念 3：事件驱动（Event-Driven）📡 <a class="header-anchor" href="#理念-3-事件驱动-event-driven-📡" aria-label="Permalink to &quot;理念 3：事件驱动（Event-Driven）📡&quot;">​</a></h3><p><strong>问题</strong>：模块间直接调用，形成强依赖，难以扩展和测试。</p><p><strong>解决方案</strong>：通过事件总线解耦模块间通信。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>传统方式（直接调用）：</span></span>
<span class="line"><span>  ChatPanel → 直接调用 → CanvasEditor.addImage()</span></span>
<span class="line"><span>  问题：ChatPanel 必须知道 CanvasEditor 的存在和接口</span></span>
<span class="line"><span></span></span>
<span class="line"><span>事件驱动方式：</span></span>
<span class="line"><span>  ChatPanel → 发布事件 → eventBus.emit(&#39;addImage&#39;, data)</span></span>
<span class="line"><span>  CanvasEditor → 订阅事件 → eventBus.on(&#39;addImage&#39;, handler)</span></span>
<span class="line"><span>  优势：两个模块不需要互相引用</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>核心价值</strong>：</p><ul><li>✅ 模块解耦，易于扩展</li><li>✅ 支持一对多通信</li><li>✅ 便于埋点和调试</li></ul><hr><blockquote><p><strong>下一步</strong>：深入了解 <a href="./03-编辑器基座">编辑器基座</a> 的设计与实现。</p></blockquote>`,32)]))}const m=s(l,[["render",i]]);export{d as __pageData,m as default};

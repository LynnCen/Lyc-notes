import{_ as a,c as n,o as i,a7 as p}from"./chunks/framework.BQb8NfN9.js";const l="/Lyc-notes/assets/importmap-workspace.B_j8nf3y.png",e="/Lyc-notes/assets/wpm2%20importmap%20%E7%94%9F%E6%88%90.DjWTWSNF.png",E=JSON.parse('{"title":"RFC 20: Importmap ç”Ÿæˆå·¥å…· WPM3","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/import-map/03-å·¥å…·æ¼”è¿›-RFC20-WPM3.md","filePath":"work/gd/import-map/03-å·¥å…·æ¼”è¿›-RFC20-WPM3.md","lastUpdated":1770089365000}'),t={name:"work/gd/import-map/03-å·¥å…·æ¼”è¿›-RFC20-WPM3.md"};function h(r,s,k,d,c,o){return i(),n("div",null,s[0]||(s[0]=[p(`<h1 id="rfc-20-importmap-ç”Ÿæˆå·¥å…·-wpm3" tabindex="-1">RFC 20: Importmap ç”Ÿæˆå·¥å…· WPM3 <a class="header-anchor" href="#rfc-20-importmap-ç”Ÿæˆå·¥å…·-wpm3" aria-label="Permalink to &quot;RFC 20: Importmap ç”Ÿæˆå·¥å…· WPM3&quot;">â€‹</a></h1><blockquote><p><strong>æ–‡æ¡£æ¥æº</strong><br> Confluence: <a href="https://doc.huanleguang.com/pages/viewpage.action?pageId=485591899" target="_blank" rel="noreferrer">https://doc.huanleguang.com/pages/viewpage.action?pageId=485591899</a></p></blockquote><hr><h2 id="æ–‡æ¡£æ¦‚è¿°" tabindex="-1">æ–‡æ¡£æ¦‚è¿° <a class="header-anchor" href="#æ–‡æ¡£æ¦‚è¿°" aria-label="Permalink to &quot;æ–‡æ¡£æ¦‚è¿°&quot;">â€‹</a></h2><p>æœ¬ RFC æå‡ºäº† <strong>WPM3</strong> çš„è®¾è®¡æ–¹æ¡ˆï¼Œåœ¨ WPM2 çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æ‰©å±•ï¼Œæ”¯æŒ <strong>Monorepo Workspace åŒ…</strong>çš„ Import Map ç”Ÿæˆã€‚</p><p><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼š</p><ul><li>ğŸ“¦ æ”¯æŒ Workspace åŒ…ç®¡ç†æœºåˆ¶</li><li>ğŸ”— æ”¯æŒ Workspace ä¸ npm åŒ…çš„æ··åˆä½¿ç”¨</li><li>ğŸ”„ ä½¿ç”¨ Git Commit Hash ä½œä¸º Workspace åŒ…ç‰ˆæœ¬</li><li>ğŸ¤– å®Œæ•´çš„ CI/CD é›†æˆæ–¹æ¡ˆ</li></ul><hr><h2 id="ä¸€ã€èƒŒæ™¯" tabindex="-1">ä¸€ã€èƒŒæ™¯ <a class="header-anchor" href="#ä¸€ã€èƒŒæ™¯" aria-label="Permalink to &quot;ä¸€ã€èƒŒæ™¯&quot;">â€‹</a></h2><h3 id="_1-1-ç°çŠ¶" tabindex="-1">1.1 ç°çŠ¶ <a class="header-anchor" href="#_1-1-ç°çŠ¶" aria-label="Permalink to &quot;1.1 ç°çŠ¶&quot;">â€‹</a></h3><p><strong>WPM2 çš„èƒ½åŠ›</strong>ï¼š</p><ul><li>âœ… æ”¯æŒ npm åŒ…çš„ Import Map ç”Ÿæˆ</li><li>âœ… åŸºäº npm ç‰ˆæœ¬ä¿¡æ¯ç”Ÿæˆ</li><li>âœ… è‡ªåŠ¨åŒ–çš„ä¾èµ–è§£æ</li></ul><p><strong>è¯¦ç»†è¯´æ˜</strong>ï¼šå‚è§ <a href="./02-å·¥å…·æ¼”è¿›-RFC15-WPM2">RFC 15: WPM2</a></p><h3 id="_1-2-æ–°çš„æŒ‘æˆ˜" tabindex="-1">1.2 æ–°çš„æŒ‘æˆ˜ <a class="header-anchor" href="#_1-2-æ–°çš„æŒ‘æˆ˜" aria-label="Permalink to &quot;1.2 æ–°çš„æŒ‘æˆ˜&quot;">â€‹</a></h3><h4 id="monorepo-æ¶æ„å‡çº§" tabindex="-1">Monorepo æ¶æ„å‡çº§ <a class="header-anchor" href="#monorepo-æ¶æ„å‡çº§" aria-label="Permalink to &quot;Monorepo æ¶æ„å‡çº§&quot;">â€‹</a></h4><p><strong>èƒŒæ™¯</strong>ï¼š</p><ul><li>å·¥ç¨‹ä½“ç³»å‡çº§è‡³ <strong>Monorepo æ¶æ„</strong></li><li>å¼•å…¥ <strong>Workspace åŒ…ç®¡ç†æœºåˆ¶</strong></li></ul><p><strong>Workspace ç‰¹ç‚¹</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>monorepo/</span></span>
<span class="line"><span>â”œâ”€â”€ packages/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ utils/          â† workspace åŒ…</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ components/     â† workspace åŒ…</span></span>
<span class="line"><span>â”‚   â””â”€â”€ hooks/          â† workspace åŒ…</span></span>
<span class="line"><span>â””â”€â”€ apps/</span></span>
<span class="line"><span>    â””â”€â”€ web/            â† ä½¿ç”¨ workspace åŒ…</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ä¾èµ–æ–¹å¼å¯¹æ¯”</strong>ï¼š</p><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>npm åŒ…</th><th>Workspace åŒ…</th></tr></thead><tbody><tr><td><strong>å®‰è£…æ–¹å¼</strong></td><td>ä» npm registry å®‰è£…</td><td>æºç ç›´æ¥å¼•ç”¨</td></tr><tr><td><strong>ç‰ˆæœ¬ä¿¡æ¯</strong></td><td>package.json version</td><td>âŒ æ— ä¼ ç»Ÿç‰ˆæœ¬</td></tr><tr><td><strong>å¼•ç”¨æ–¹å¼</strong></td><td>å›ºå®šç‰ˆæœ¬å·</td><td>workspace:* åè®®</td></tr><tr><td><strong>æ„å»ºäº§ç‰©</strong></td><td>å·²å‘å¸ƒåˆ° npm</td><td>æœ¬åœ°æºç </td></tr></tbody></table><h4 id="wpm2-çš„å±€é™" tabindex="-1">WPM2 çš„å±€é™ <a class="header-anchor" href="#wpm2-çš„å±€é™" aria-label="Permalink to &quot;WPM2 çš„å±€é™&quot;">â€‹</a></h4><p><strong>é—®é¢˜</strong>ï¼šWPM2 ä¾èµ–æ˜ç¡®çš„ npm ç‰ˆæœ¬ä¿¡æ¯</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// WPM2 çš„å·¥ä½œå‰æ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;17.0.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… æœ‰æ˜ç¡®ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // âŒ æ— ä¼ ç»Ÿç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ç°è±¡</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>WPM2 å°è¯•ç”Ÿæˆ @company/utils çš„ Import Map</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>æŸ¥æ‰¾ç‰ˆæœ¬ä¿¡æ¯</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>workspace:* æ— æ³•è½¬æ¢ä¸ºå…·ä½“ç‰ˆæœ¬</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>æ— æ³•ç”Ÿæˆ Import Map âŒ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ç»“è®º</strong>ï¼š</p><ul><li>âŒ Workspace åŒ…ç¼ºä¹ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ç‰ˆæœ¬ä¿¡æ¯</li><li>âŒ å½“å‰å·¥ç¨‹ç¯å¢ƒä¸‹æ— æ³•ç›´æ¥ä½¿ç”¨ WPM2</li></ul><hr><h2 id="äºŒã€æè®®å†…å®¹" tabindex="-1">äºŒã€æè®®å†…å®¹ <a class="header-anchor" href="#äºŒã€æè®®å†…å®¹" aria-label="Permalink to &quot;äºŒã€æè®®å†…å®¹&quot;">â€‹</a></h2><h3 id="_2-1-æ ¸å¿ƒæè®®" tabindex="-1">2.1 æ ¸å¿ƒæè®® <a class="header-anchor" href="#_2-1-æ ¸å¿ƒæè®®" aria-label="Permalink to &quot;2.1 æ ¸å¿ƒæè®®&quot;">â€‹</a></h3><blockquote><p><strong>æè®®</strong></p><ol><li>å¢åŠ å¯¹ Workspace åŒ…ç®¡ç†æœºåˆ¶çš„ Import Map ç”Ÿæˆæ”¯æŒ</li><li>æ”¯æŒå°† Workspace ç”Ÿæˆçš„ Import Map ä¸åŸºäº npm ç‰ˆæœ¬çš„ Import Map åˆå¹¶</li></ol></blockquote><h3 id="_2-2-å…³é”®èƒ½åŠ›" tabindex="-1">2.2 å…³é”®èƒ½åŠ› <a class="header-anchor" href="#_2-2-å…³é”®èƒ½åŠ›" aria-label="Permalink to &quot;2.2 å…³é”®èƒ½åŠ›&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>èƒ½åŠ›</th><th>WPM2</th><th>WPM3</th></tr></thead><tbody><tr><td><strong>npm åŒ…</strong></td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>Workspace åŒ…</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>æ··åˆä½¿ç”¨</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>ç‰ˆæœ¬æœºåˆ¶</strong></td><td>npm ç‰ˆæœ¬å·</td><td>âœ… Git Commit Hash</td></tr></tbody></table><hr><h2 id="ä¸‰ã€å‰ææ¦‚è¦" tabindex="-1">ä¸‰ã€å‰ææ¦‚è¦ <a class="header-anchor" href="#ä¸‰ã€å‰ææ¦‚è¦" aria-label="Permalink to &quot;ä¸‰ã€å‰ææ¦‚è¦&quot;">â€‹</a></h2><h3 id="_3-1-wpm2-çš„-import-map-ç”ŸæˆåŸç†" tabindex="-1">3.1 WPM2 çš„ Import Map ç”ŸæˆåŸç† <a class="header-anchor" href="#_3-1-wpm2-çš„-import-map-ç”ŸæˆåŸç†" aria-label="Permalink to &quot;3.1 WPM2 çš„ Import Map ç”ŸæˆåŸç†&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒæµç¨‹</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. è¯»å–é…ç½®</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>2. è·å–æœ¬åœ° node_modules çš„ç‰ˆæœ¬å·</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>3. é€šè¿‡ç‰ˆæœ¬å·ç”Ÿæˆ CDN åœ°å€</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>4. ä¸‹è½½ CDN èµ„æºå¹¶è§£æä¾èµ–</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>5. é€’å½’å¤„ç†å­ä¾èµ–</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>6. ç”Ÿæˆ Import Map</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>è¯¦ç»†ç¤ºä¾‹</strong>ï¼šä»¥ <code>@gaoding/user-device-id</code> ä¸ºä¾‹</p><h4 id="æ­¥éª¤-1-è·å–æœ¬åœ°ç‰ˆæœ¬" tabindex="-1">æ­¥éª¤ 1ï¼šè·å–æœ¬åœ°ç‰ˆæœ¬ <a class="header-anchor" href="#æ­¥éª¤-1-è·å–æœ¬åœ°ç‰ˆæœ¬" aria-label="Permalink to &quot;æ­¥éª¤ 1ï¼šè·å–æœ¬åœ°ç‰ˆæœ¬&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># node_modules/@gaoding/user-device-id/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;name&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@gaoding/user-device-id&quot;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;version&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;0.5.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>ç»“æœ</strong>ï¼šç‰ˆæœ¬å· <code>0.5.1</code></p><h4 id="æ­¥éª¤-2-ç”Ÿæˆ-cdn-åœ°å€" tabindex="-1">æ­¥éª¤ 2ï¼šç”Ÿæˆ CDN åœ°å€ <a class="header-anchor" href="#æ­¥éª¤-2-ç”Ÿæˆ-cdn-åœ°å€" aria-label="Permalink to &quot;æ­¥éª¤ 2ï¼šç”Ÿæˆ CDN åœ°å€&quot;">â€‹</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://esm.dancf.com/npm:@gaoding/user-device-id@0.5.1/dist/index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="æ­¥éª¤-3-è§£ææºç ä¾èµ–" tabindex="-1">æ­¥éª¤ 3ï¼šè§£ææºç ä¾èµ– <a class="header-anchor" href="#æ­¥éª¤-3-è§£ææºç ä¾èµ–" aria-label="Permalink to &quot;æ­¥éª¤ 3ï¼šè§£ææºç ä¾èµ–&quot;">â€‹</a></h4><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸‹è½½å¹¶è§£ææºç </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Cookies </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;js-cookie&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// â† å‘ç°ä¾èµ–</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="æ­¥éª¤-4-è·å–å­ä¾èµ–ç‰ˆæœ¬" tabindex="-1">æ­¥éª¤ 4ï¼šè·å–å­ä¾èµ–ç‰ˆæœ¬ <a class="header-anchor" href="#æ­¥éª¤-4-è·å–å­ä¾èµ–ç‰ˆæœ¬" aria-label="Permalink to &quot;æ­¥éª¤ 4ï¼šè·å–å­ä¾èµ–ç‰ˆæœ¬&quot;">â€‹</a></h4><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// https://esm.dancf.com/npm:@gaoding/user-device-id@0.5.1/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;js-cookie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^3.0.1&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // â† ç‰ˆæœ¬ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="æ­¥éª¤-5-æ£€æŸ¥-overrides" tabindex="-1">æ­¥éª¤ 5ï¼šæ£€æŸ¥ overrides <a class="header-anchor" href="#æ­¥éª¤-5-æ£€æŸ¥-overrides" aria-label="Permalink to &quot;æ­¥éª¤ 5ï¼šæ£€æŸ¥ overrides&quot;">â€‹</a></h4><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¡¹ç›® package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;overrides&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;js-cookie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3.0.5&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // â† è¦†ç›–ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>ç»“æœ</strong>ï¼šä½¿ç”¨ <code>3.0.5</code> è€Œé <code>^3.0.1</code></p><h4 id="æ­¥éª¤-6-é€’å½’å¤„ç†" tabindex="-1">æ­¥éª¤ 6ï¼šé€’å½’å¤„ç† <a class="header-anchor" href="#æ­¥éª¤-6-é€’å½’å¤„ç†" aria-label="Permalink to &quot;æ­¥éª¤ 6ï¼šé€’å½’å¤„ç†&quot;">â€‹</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>js-cookie@3.0.5</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ CDN èµ„æº</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è§£æå…¶æºç ä¾èµ–</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>å¦‚æœæ— å­ä¾èµ–ï¼Œç»“æŸ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="æ­¥éª¤-7-ç”Ÿæˆ-import-map" tabindex="-1">æ­¥éª¤ 7ï¼šç”Ÿæˆ Import Map <a class="header-anchor" href="#æ­¥éª¤-7-ç”Ÿæˆ-import-map" aria-label="Permalink to &quot;æ­¥éª¤ 7ï¼šç”Ÿæˆ Import Map&quot;">â€‹</a></h4><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@gaoding/user-device-id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:@gaoding/user-device-id@0.5.1/dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scopes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;https://esm.dancf.com/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;js-cookie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:js-cookie@3.0.5/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-2-å…³é”®æŠ€æœ¯ç‚¹" tabindex="-1">3.2 å…³é”®æŠ€æœ¯ç‚¹ <a class="header-anchor" href="#_3-2-å…³é”®æŠ€æœ¯ç‚¹" aria-label="Permalink to &quot;3.2 å…³é”®æŠ€æœ¯ç‚¹&quot;">â€‹</a></h3><p><strong>æŠ€æœ¯æ ˆ</strong>ï¼š</p><ul><li><strong>JSPM Generator</strong>ï¼šåº•å±‚ Import Map ç”Ÿæˆå¼•æ“</li><li><strong>customProviders</strong>ï¼šè‡ªå®šä¹‰ CDN é€‚é…å™¨</li><li><strong>ä¾èµ–è§£æ</strong>ï¼šé€’å½’è§£æä¾èµ–æ ‘</li><li><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šoverrides/catalog æ”¯æŒ</li></ul><hr><h2 id="å››ã€è¯¦ç»†è®¾è®¡" tabindex="-1">å››ã€è¯¦ç»†è®¾è®¡ <a class="header-anchor" href="#å››ã€è¯¦ç»†è®¾è®¡" aria-label="Permalink to &quot;å››ã€è¯¦ç»†è®¾è®¡&quot;">â€‹</a></h2><h3 id="_4-1-ç‰ˆæœ¬æœºåˆ¶è°ƒæ•´" tabindex="-1">4.1 ç‰ˆæœ¬æœºåˆ¶è°ƒæ•´ <a class="header-anchor" href="#_4-1-ç‰ˆæœ¬æœºåˆ¶è°ƒæ•´" aria-label="Permalink to &quot;4.1 ç‰ˆæœ¬æœºåˆ¶è°ƒæ•´&quot;">â€‹</a></h3><h4 id="é—®é¢˜" tabindex="-1">é—®é¢˜ <a class="header-anchor" href="#é—®é¢˜" aria-label="Permalink to &quot;é—®é¢˜&quot;">â€‹</a></h4><p><strong>Workspace åŒ…æ²¡æœ‰ä¼ ç»Ÿç‰ˆæœ¬å·</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// â† æ— æ„ä¹‰çš„å ä½ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // â† æ— å…·ä½“ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="è§£å†³æ–¹æ¡ˆ-git-commit-hash-ä½œä¸ºç‰ˆæœ¬" tabindex="-1">è§£å†³æ–¹æ¡ˆï¼šGit Commit Hash ä½œä¸ºç‰ˆæœ¬ <a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ-git-commit-hash-ä½œä¸ºç‰ˆæœ¬" aria-label="Permalink to &quot;è§£å†³æ–¹æ¡ˆï¼šGit Commit Hash ä½œä¸ºç‰ˆæœ¬&quot;">â€‹</a></h4><p><strong>è®¾è®¡</strong>ï¼š</p><table tabindex="0"><thead><tr><th>è¦ç´ </th><th>ä¼ ç»Ÿ npm åŒ…</th><th>Workspace åŒ…</th></tr></thead><tbody><tr><td><strong>ç‰ˆæœ¬æ ‡è¯†</strong></td><td>npm ç‰ˆæœ¬å·</td><td>Git Commit Hash</td></tr><tr><td><strong>ç‰ˆæœ¬æ¥æº</strong></td><td>package.json</td><td>Git ä»“åº“</td></tr><tr><td><strong>ç‰ˆæœ¬æ ¼å¼</strong></td><td>semver (1.2.3)</td><td>hash (abc1234)</td></tr><tr><td><strong>å˜æ›´æ£€æµ‹</strong></td><td>ç‰ˆæœ¬å·æ›´æ–°</td><td>æºç å˜æ›´</td></tr></tbody></table><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å– Workspace åŒ…çš„ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/utils</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format=%H</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # abc1234567890...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ Commit Hash ä½œä¸ºç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;abc1234&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>URL æ˜ å°„</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm åŒ…:</span></span>
<span class="line"><span>https://esm.dancf.com/npm:@company/utils@1.2.3/dist/index.js</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Workspace åŒ…:</span></span>
<span class="line"><span>https://esm.dancf.com/workspace:@company/utils@abc1234/dist/index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="ç‰ˆæœ¬æ›´æ–°æ£€æµ‹" tabindex="-1">ç‰ˆæœ¬æ›´æ–°æ£€æµ‹ <a class="header-anchor" href="#ç‰ˆæœ¬æ›´æ–°æ£€æµ‹" aria-label="Permalink to &quot;ç‰ˆæœ¬æ›´æ–°æ£€æµ‹&quot;">â€‹</a></h4><p><strong>æ£€æµ‹é€»è¾‘</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>æ£€æŸ¥ Workspace åŒ…ç›®å½•</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è·å–å½“å‰æœ€æ–° Commit Hash</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ä¸ä¸Šæ¬¡æ„å»ºçš„ Hash å¯¹æ¯”</span></span>
<span class="line"><span>   â”œâ”€ ç›¸åŒ â†’ æ— å˜æ›´ï¼Œè·³è¿‡</span></span>
<span class="line"><span>   â””â”€ ä¸åŒ â†’ æœ‰å˜æ›´ï¼Œéœ€è¦æ„å»º</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>åœºæ™¯ 1ï¼šä¿®æ”¹æºç </span></span>
<span class="line"><span>packages/utils/src/date.js æ”¹åŠ¨</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>æ–°çš„ Commit: def5678</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è§†ä¸ºæ–°ç‰ˆæœ¬ï¼Œè§¦å‘æ„å»º</span></span>
<span class="line"><span></span></span>
<span class="line"><span>åœºæ™¯ 2ï¼šæ— æ”¹åŠ¨</span></span>
<span class="line"><span>packages/utils/ ç›®å½•æ— å˜æ›´</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>Commit Hash ä¸ä¸Šæ¬¡ç›¸åŒ</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è·³è¿‡æ„å»ºï¼Œä½¿ç”¨ç¼“å­˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-2-æ„å»ºä¸äº§ç‰©ä¸Šä¼ " tabindex="-1">4.2 æ„å»ºä¸äº§ç‰©ä¸Šä¼  <a class="header-anchor" href="#_4-2-æ„å»ºä¸äº§ç‰©ä¸Šä¼ " aria-label="Permalink to &quot;4.2 æ„å»ºä¸äº§ç‰©ä¸Šä¼ &quot;">â€‹</a></h3><h4 id="ci-cd-æµç¨‹" tabindex="-1">CI/CD æµç¨‹ <a class="header-anchor" href="#ci-cd-æµç¨‹" aria-label="Permalink to &quot;CI/CD æµç¨‹&quot;">â€‹</a></h4><p><strong>æ•´ä½“æµç¨‹</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ä»£ç æäº¤</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>CI/CD è§¦å‘</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>æ£€æµ‹å˜æ›´çš„ Workspace åŒ…</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>å¯¹æ¯ä¸ªå˜æ›´çš„åŒ…ï¼š</span></span>
<span class="line"><span>   â”œâ”€ è·å– Commit Hash</span></span>
<span class="line"><span>   â”œâ”€ æ„å»ºåŒ…</span></span>
<span class="line"><span>   â”œâ”€ ä¸Šä¼ äº§ç‰©åˆ° CDN</span></span>
<span class="line"><span>   â””â”€ ä¸Šä¼  package.json åˆ° CDN</span></span>
<span class="line"><span>      â†“</span></span>
<span class="line"><span>å®Œæˆ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>è¯¦ç»†æ­¥éª¤</strong>ï¼š</p><h4 id="æ­¥éª¤-1-æ£€æµ‹å˜æ›´" tabindex="-1">æ­¥éª¤ 1ï¼šæ£€æµ‹å˜æ›´ <a class="header-anchor" href="#æ­¥éª¤-1-æ£€æµ‹å˜æ›´" aria-label="Permalink to &quot;æ­¥éª¤ 1ï¼šæ£€æµ‹å˜æ›´&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å–å˜æ›´çš„ Workspace åŒ…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[HEAD^]&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --depth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/workspace/packages/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;private&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="æ­¥éª¤-2-è·å–ç‰ˆæœ¬-hash" tabindex="-1">æ­¥éª¤ 2ï¼šè·å–ç‰ˆæœ¬ Hash <a class="header-anchor" href="#æ­¥éª¤-2-è·å–ç‰ˆæœ¬-hash" aria-label="Permalink to &quot;æ­¥éª¤ 2ï¼šè·å–ç‰ˆæœ¬ Hash&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å–åŒ…ç›®å½•çš„æœ€æ–° Commit</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/utils</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">COMMIT_HASH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format=%H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SHORT_HASH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">\${COMMIT_HASH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">8}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Version: </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$SHORT_HASH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Output: Version: abc12345</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="æ­¥éª¤-3-æ„å»ºåŒ…" tabindex="-1">æ­¥éª¤ 3ï¼šæ„å»ºåŒ… <a class="header-anchor" href="#æ­¥éª¤-3-æ„å»ºåŒ…" aria-label="Permalink to &quot;æ­¥éª¤ 3ï¼šæ„å»ºåŒ…&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿›å…¥åŒ…ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> packages/utils</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ„å»º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äº§ç‰©ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># index.js</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># date.js</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># string.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="æ­¥éª¤-4-ä¸Šä¼ åˆ°-cdn" tabindex="-1">æ­¥éª¤ 4ï¼šä¸Šä¼ åˆ° CDN <a class="header-anchor" href="#æ­¥éª¤-4-ä¸Šä¼ åˆ°-cdn" aria-label="Permalink to &quot;æ­¥éª¤ 4ï¼šä¸Šä¼ åˆ° CDN&quot;">â€‹</a></h4><p><strong>ä¸Šä¼ äº§ç‰©</strong>ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸Šä¼ æ•´ä¸ª dist ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sync</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./dist/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  s3://esm-cdn/workspace/@company/utils@abc12345/dist/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”Ÿæˆçš„ URL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># https://esm.dancf.com/workspace:@company/utils@abc12345/dist/index.js</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># https://esm.dancf.com/workspace:@company/utils@abc12345/dist/date.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ä¸Šä¼  package.json</strong>ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸Šä¼  package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aws</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> s3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./package.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  s3://esm-cdn/workspace/@company/utils@abc12345/package.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”Ÿæˆçš„ URL</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># https://esm.dancf.com/workspace:@company/utils@abc12345/package.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>CDN ç›®å½•ç»“æ„</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>esm.dancf.com/</span></span>
<span class="line"><span>â”œâ”€â”€ npm:react@17.0.2/           â† npm åŒ…</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ index.js</span></span>
<span class="line"><span>â”‚   â””â”€â”€ package.json</span></span>
<span class="line"><span>â””â”€â”€ workspace:@company/utils@abc12345/  â† workspace åŒ…</span></span>
<span class="line"><span>    â”œâ”€â”€ dist/</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ index.js</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ date.js</span></span>
<span class="line"><span>    â”‚   â””â”€â”€ string.js</span></span>
<span class="line"><span>    â””â”€â”€ package.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="æ­¥éª¤-5-ç¼“å­˜ç­–ç•¥" tabindex="-1">æ­¥éª¤ 5ï¼šç¼“å­˜ç­–ç•¥ <a class="header-anchor" href="#æ­¥éª¤-5-ç¼“å­˜ç­–ç•¥" aria-label="Permalink to &quot;æ­¥éª¤ 5ï¼šç¼“å­˜ç­–ç•¥&quot;">â€‹</a></h4><p><strong>ç‰ˆæœ¬åŒ– URL çš„ç¼“å­˜</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Cache-Control: public, max-age=31536000, immutable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>âœ… æ°¸ä¹…ç¼“å­˜ï¼ˆ1 å¹´ï¼‰</li><li>âœ… Commit Hash å”¯ä¸€</li><li>âœ… æ–°æäº¤ = æ–° Hash = æ–° URL</li></ul><h3 id="_4-3-import-map-ç”Ÿæˆæœºåˆ¶è°ƒæ•´" tabindex="-1">4.3 Import Map ç”Ÿæˆæœºåˆ¶è°ƒæ•´ <a class="header-anchor" href="#_4-3-import-map-ç”Ÿæˆæœºåˆ¶è°ƒæ•´" aria-label="Permalink to &quot;4.3 Import Map ç”Ÿæˆæœºåˆ¶è°ƒæ•´&quot;">â€‹</a></h3><h4 id="ç”Ÿæˆæ—¶æœºè°ƒæ•´" tabindex="-1">ç”Ÿæˆæ—¶æœºè°ƒæ•´ <a class="header-anchor" href="#ç”Ÿæˆæ—¶æœºè°ƒæ•´" aria-label="Permalink to &quot;ç”Ÿæˆæ—¶æœºè°ƒæ•´&quot;">â€‹</a></h4><p><strong>WPM2 çš„æ—¶æœº</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm install</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è§¦å‘ postinstall</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ç”Ÿæˆ Import Map</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>WPM3 çš„æ—¶æœº</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>æ„å»º Workspace åŒ…</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ä¸Šä¼ äº§ç‰©åˆ° CDN</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>æ‰€æœ‰ Workspace åŒ…æ„å»ºå®Œæˆ</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ç”Ÿæˆ Import Map</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>åŸå› </strong>ï¼š</p><ul><li>âš ï¸ å¿…é¡»ç­‰å¾… Workspace åŒ…æ„å»ºå®Œæˆ</li><li>âš ï¸ å¿…é¡»ç­‰å¾…äº§ç‰©ä¸Šä¼ åˆ° CDN</li><li>âœ… ç¡®ä¿ CDN ä¸Šæœ‰å¯¹åº”çš„èµ„æº</li></ul><h4 id="ç”Ÿæˆé€»è¾‘" tabindex="-1">ç”Ÿæˆé€»è¾‘ <a class="header-anchor" href="#ç”Ÿæˆé€»è¾‘" aria-label="Permalink to &quot;ç”Ÿæˆé€»è¾‘&quot;">â€‹</a></h4><p><strong>å¤„ç†é€»è¾‘</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>è¯»å– browserImportMap é…ç½®</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>å¯¹æ¯ä¸ªåŒ…ï¼š</span></span>
<span class="line"><span>   â”œâ”€ npm åŒ… â†’ ä½¿ç”¨ WPM2 é€»è¾‘</span></span>
<span class="line"><span>   â”‚   â”œâ”€ è·å– node_modules ç‰ˆæœ¬</span></span>
<span class="line"><span>   â”‚   â””â”€ ç”Ÿæˆ CDN URL</span></span>
<span class="line"><span>   â”‚</span></span>
<span class="line"><span>   â””â”€ Workspace åŒ… â†’ ä½¿ç”¨ WPM3 é€»è¾‘</span></span>
<span class="line"><span>       â”œâ”€ è·å– Commit Hash</span></span>
<span class="line"><span>       â””â”€ ç”Ÿæˆ workspace CDN URL</span></span>
<span class="line"><span>          â†“</span></span>
<span class="line"><span>åˆå¹¶ä¸¤ç±» Import Map</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è¾“å‡ºæœ€ç»ˆ importmap.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> generateImportMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> importMap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { imports: {}, scopes: {} };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.packages) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isWorkspacePackage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pkg)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Workspace åŒ…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getCommitHash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pkg);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`https://esm.dancf.com/workspace:\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}@\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/dist/index.js\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      importMap.imports[pkg] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // npm åŒ…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> version</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getInstalledVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pkg);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`https://esm.dancf.com/npm:\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}@\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/index.js\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      importMap.imports[pkg] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> importMap;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="ä¾èµ–è§£æ" tabindex="-1">ä¾èµ–è§£æ <a class="header-anchor" href="#ä¾èµ–è§£æ" aria-label="Permalink to &quot;ä¾èµ–è§£æ&quot;">â€‹</a></h4><p><strong>Workspace åŒ…çš„ä¾èµ–è§£æ</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Workspace åŒ…: @company/utils@abc1234</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>ä¸‹è½½ CDN ä¸Šçš„ package.json</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>https://esm.dancf.com/workspace:@company/utils@abc1234/package.json</span></span>
<span class="line"><span>   â†“</span></span>
<span class="line"><span>è§£æ dependencies</span></span>
<span class="line"><span>   â”œâ”€ Workspace ä¾èµ– â†’ ç»§ç»­é€’å½’</span></span>
<span class="line"><span>   â””â”€ npm ä¾èµ– â†’ èµ° WPM2 é€»è¾‘</span></span>
<span class="line"><span>      â†“</span></span>
<span class="line"><span>æ·»åŠ åˆ° scopes</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// @company/utils@abc1234/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// â† Workspace ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;lodash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^4.17.21&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              // â† npm ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>ç”Ÿæˆçš„ Import Map</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/workspace:@company/utils@abc1234/dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scopes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;https://esm.dancf.com/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/workspace:@company/hooks@def5678/dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;lodash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:lodash@4.17.21/lodash.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-4-æ–¹æ¡ˆæµç¨‹å›¾" tabindex="-1">4.4 æ–¹æ¡ˆæµç¨‹å›¾ <a class="header-anchor" href="#_4-4-æ–¹æ¡ˆæµç¨‹å›¾" aria-label="Permalink to &quot;4.4 æ–¹æ¡ˆæµç¨‹å›¾&quot;">â€‹</a></h3><p><strong>å®Œæ•´æµç¨‹</strong>ï¼š</p><p><img src="`+l+'" alt="Workspace Import Map æµç¨‹"></p><p><strong>WPM2 Import Map ç”Ÿæˆæµç¨‹</strong>ï¼š</p><p><img src="'+e+`" alt="WPM2 æµç¨‹"></p><hr><h2 id="äº”ã€ci-cd-é›†æˆ" tabindex="-1">äº”ã€CI/CD é›†æˆ <a class="header-anchor" href="#äº”ã€ci-cd-é›†æˆ" aria-label="Permalink to &quot;äº”ã€CI/CD é›†æˆ&quot;">â€‹</a></h2><h3 id="_5-1-å®Œæ•´-ci-cd-å·¥ä½œæµ" tabindex="-1">5.1 å®Œæ•´ CI/CD å·¥ä½œæµ <a class="header-anchor" href="#_5-1-å®Œæ•´-ci-cd-å·¥ä½œæµ" aria-label="Permalink to &quot;5.1 å®Œæ•´ CI/CD å·¥ä½œæµ&quot;">â€‹</a></h3><h4 id="pipeline-ç»“æ„" tabindex="-1">Pipeline ç»“æ„ <a class="header-anchor" href="#pipeline-ç»“æ„" aria-label="Permalink to &quot;Pipeline ç»“æ„&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># .github/workflows/build.yml</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build and Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Job 1: æ£€æµ‹å˜æ›´</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  detect-changes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    outputs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ steps.filter.outputs.packages }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Detect changed packages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">filter</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          PACKAGES=$(pnpm --filter=&quot;[HEAD^]&quot; list --depth -1 --json)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          echo &quot;packages=$PACKAGES&quot; &gt;&gt; $GITHUB_OUTPUT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Job 2: æ„å»º Workspace åŒ…</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build-workspace-packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    needs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">detect-changes</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ fromJSON(needs.detect-changes.outputs.packages) }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup Node.js</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Get commit hash</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">hash</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          cd \${{ matrix.package.path }}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          HASH=$(git log -1 --format=%h .)</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          echo &quot;hash=$HASH&quot; &gt;&gt; $GITHUB_OUTPUT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm install</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build package</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          cd \${{ matrix.package.path }}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          pnpm build</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Upload to CDN</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          aws s3 sync \${{ matrix.package.path }}/dist/ \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            s3://esm-cdn/workspace:\${{ matrix.package.name }}@\${{ steps.hash.outputs.hash }}/dist/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          aws s3 cp \${{ matrix.package.path }}/package.json \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            s3://esm-cdn/workspace:\${{ matrix.package.name }}@\${{ steps.hash.outputs.hash }}/package.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Job 3: ç”Ÿæˆ Import Map</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  generate-importmap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    needs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">build-workspace-packages</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Setup Node.js</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm install</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Generate Import Map</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm wpm3 --output public/importmap.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Upload Import Map</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          aws s3 cp public/importmap.json \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            s3://cdn-bucket/importmap.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Job 4: æ„å»ºåº”ç”¨</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  build-app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    needs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">generate-importmap</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Download Import Map</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          mkdir -p public</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          aws s3 cp s3://cdn-bucket/importmap.json public/</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build application</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm deploy</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><h3 id="_5-2-å…³é”®æ­¥éª¤è¯´æ˜" tabindex="-1">5.2 å…³é”®æ­¥éª¤è¯´æ˜ <a class="header-anchor" href="#_5-2-å…³é”®æ­¥éª¤è¯´æ˜" aria-label="Permalink to &quot;5.2 å…³é”®æ­¥éª¤è¯´æ˜&quot;">â€‹</a></h3><h4 id="æ­¥éª¤-1-æ£€æµ‹å˜æ›´-1" tabindex="-1">æ­¥éª¤ 1ï¼šæ£€æµ‹å˜æ›´ <a class="header-anchor" href="#æ­¥éª¤-1-æ£€æµ‹å˜æ›´-1" aria-label="Permalink to &quot;æ­¥éª¤ 1ï¼šæ£€æµ‹å˜æ›´&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨ pnpm çš„å˜æ›´æ£€æµ‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --filter=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[HEAD^]&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --depth</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¾“å‡ºåŒ…å«å˜æ›´çš„åŒ…åˆ—è¡¨</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>âœ… åªæ„å»ºå˜æ›´çš„åŒ…</li><li>âœ… èŠ‚çœ CI æ—¶é—´</li><li>âœ… å‡å°‘ä¸å¿…è¦çš„æ„å»º</li></ul><h4 id="æ­¥éª¤-2-å¹¶è¡Œæ„å»º" tabindex="-1">æ­¥éª¤ 2ï¼šå¹¶è¡Œæ„å»º <a class="header-anchor" href="#æ­¥éª¤-2-å¹¶è¡Œæ„å»º" aria-label="Permalink to &quot;æ­¥éª¤ 2ï¼šå¹¶è¡Œæ„å»º&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">strategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ fromJSON(needs.detect-changes.outputs.packages) }}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>âœ… å¤šä¸ªåŒ…å¹¶è¡Œæ„å»º</li><li>âœ… å¤§å¹…ç¼©çŸ­æ€»æ—¶é—´</li></ul><h4 id="æ­¥éª¤-3-ä¸Šä¼ é¡ºåº" tabindex="-1">æ­¥éª¤ 3ï¼šä¸Šä¼ é¡ºåº <a class="header-anchor" href="#æ­¥éª¤-3-ä¸Šä¼ é¡ºåº" aria-label="Permalink to &quot;æ­¥éª¤ 3ï¼šä¸Šä¼ é¡ºåº&quot;">â€‹</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. ä¸Šä¼  dist/ äº§ç‰©</span></span>
<span class="line"><span>2. ä¸Šä¼  package.json</span></span>
<span class="line"><span></span></span>
<span class="line"><span>é¡ºåºå¾ˆé‡è¦ï¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>åŸå› </strong>ï¼š</p><ul><li>âš ï¸ package.json å­˜åœ¨ = ç‰ˆæœ¬å¯ç”¨</li><li>âš ï¸ å¿…é¡»ç¡®ä¿äº§ç‰©å·²ä¸Šä¼ </li></ul><h3 id="_5-3-æœ¬åœ°å¼€å‘æµç¨‹" tabindex="-1">5.3 æœ¬åœ°å¼€å‘æµç¨‹ <a class="header-anchor" href="#_5-3-æœ¬åœ°å¼€å‘æµç¨‹" aria-label="Permalink to &quot;5.3 æœ¬åœ°å¼€å‘æµç¨‹&quot;">â€‹</a></h3><h4 id="å¼€å‘æ¨¡å¼" tabindex="-1">å¼€å‘æ¨¡å¼ <a class="header-anchor" href="#å¼€å‘æ¨¡å¼" aria-label="Permalink to &quot;å¼€å‘æ¨¡å¼&quot;">â€‹</a></h4><p><strong>ä½¿ç”¨æœ¬åœ° Workspace åŒ…</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;browserImportMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;packages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/hooks&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;defaultProvider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dancf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;providers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;@company&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nodemodules&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // â† æœ¬åœ°å¼€å‘ä½¿ç”¨ node_modules</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>ç”Ÿæˆçš„ Import Mapï¼ˆå¼€å‘ç¯å¢ƒï¼‰</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/node_modules/@company/utils/dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/node_modules/@company/hooks/dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li>âœ… æ— éœ€æ„å»ºä¸Šä¼ </li><li>âœ… çƒ­æ›´æ–°æ›´å¿«</li><li>âœ… è°ƒè¯•æ–¹ä¾¿</li></ul><h4 id="ç”Ÿäº§æ¨¡å¼" tabindex="-1">ç”Ÿäº§æ¨¡å¼ <a class="header-anchor" href="#ç”Ÿäº§æ¨¡å¼" aria-label="Permalink to &quot;ç”Ÿäº§æ¨¡å¼&quot;">â€‹</a></h4><p><strong>ä½¿ç”¨ CDN</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;browserImportMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;packages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/hooks&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;defaultProvider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dancf&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸æŒ‡å®š providersï¼Œä½¿ç”¨ CDN</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>ç”Ÿæˆçš„ Import Mapï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/workspace:@company/utils@abc1234/dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/workspace:@company/hooks@def5678/dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h2 id="å…­ã€ä½¿ç”¨ç¤ºä¾‹" tabindex="-1">å…­ã€ä½¿ç”¨ç¤ºä¾‹ <a class="header-anchor" href="#å…­ã€ä½¿ç”¨ç¤ºä¾‹" aria-label="Permalink to &quot;å…­ã€ä½¿ç”¨ç¤ºä¾‹&quot;">â€‹</a></h2><h3 id="_6-1-åŸºç¡€é…ç½®" tabindex="-1">6.1 åŸºç¡€é…ç½® <a class="header-anchor" href="#_6-1-åŸºç¡€é…ç½®" aria-label="Permalink to &quot;6.1 åŸºç¡€é…ç½®&quot;">â€‹</a></h3><p><strong>é¡¹ç›®ç»“æ„</strong>ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>monorepo/</span></span>
<span class="line"><span>â”œâ”€â”€ packages/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ utils/</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”‚   â”œâ”€â”€ dist/</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ package.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ hooks/</span></span>
<span class="line"><span>â”‚       â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚       â”œâ”€â”€ dist/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ package.json</span></span>
<span class="line"><span>â”œâ”€â”€ apps/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ web/</span></span>
<span class="line"><span>â”‚       â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ package.json</span></span>
<span class="line"><span>â””â”€â”€ pnpm-workspace.yaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>apps/web/package.json</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;web&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^17.0.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^2.7.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;browserImportMap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;packages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;vue&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;build:importmap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wpm3 --output public/importmap.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_6-2-ç”Ÿæˆ-import-map" tabindex="-1">6.2 ç”Ÿæˆ Import Map <a class="header-anchor" href="#_6-2-ç”Ÿæˆ-import-map" aria-label="Permalink to &quot;6.2 ç”Ÿæˆ Import Map&quot;">â€‹</a></h3><p><strong>æ‰§è¡Œ</strong>ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/web</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:importmap</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>ç”Ÿæˆçš„ importmap.json</strong>ï¼š</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/workspace:@company/utils@abc1234/dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@company/hooks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/workspace:@company/hooks@def5678/dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:react@17.0.2/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:vue@2.7.13/dist/vue.runtime.esm.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scopes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;https://esm.dancf.com/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;lodash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:lodash@4.17.21/lodash.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;object-assign&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.dancf.com/npm:object-assign@4.1.1/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_6-3-åœ¨åº”ç”¨ä¸­ä½¿ç”¨" tabindex="-1">6.3 åœ¨åº”ç”¨ä¸­ä½¿ç”¨ <a class="header-anchor" href="#_6-3-åœ¨åº”ç”¨ä¸­ä½¿ç”¨" aria-label="Permalink to &quot;6.3 åœ¨åº”ç”¨ä¸­ä½¿ç”¨&quot;">â€‹</a></h3><p><strong>HTML</strong>ï¼š</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;!</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">DOCTYPE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;importmap&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/importmap.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">head</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç›´æ¥ä½¿ç”¨è£¸æ¨¡å—å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { formatDate } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@company/utils&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useAsync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@company/hooks&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createApp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatDate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">html</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><hr><h2 id="ä¸ƒã€æ€»ç»“" tabindex="-1">ä¸ƒã€æ€»ç»“ <a class="header-anchor" href="#ä¸ƒã€æ€»ç»“" aria-label="Permalink to &quot;ä¸ƒã€æ€»ç»“&quot;">â€‹</a></h2><h3 id="_7-1-æ ¸å¿ƒä»·å€¼" tabindex="-1">7.1 æ ¸å¿ƒä»·å€¼ <a class="header-anchor" href="#_7-1-æ ¸å¿ƒä»·å€¼" aria-label="Permalink to &quot;7.1 æ ¸å¿ƒä»·å€¼&quot;">â€‹</a></h3><p><strong>WPM3 çš„å…³é”®èƒ½åŠ›</strong>ï¼š</p><table tabindex="0"><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th><th>ä»·å€¼</th></tr></thead><tbody><tr><td><strong>Workspace æ”¯æŒ</strong></td><td>æ”¯æŒ Monorepo å†…éƒ¨åŒ…</td><td>ğŸ¯ æ ¸å¿ƒç‰¹æ€§</td></tr><tr><td><strong>æ··åˆä½¿ç”¨</strong></td><td>npm + Workspace æ··åˆ</td><td>ğŸ”— çµæ´»æ€§</td></tr><tr><td><strong>Git ç‰ˆæœ¬</strong></td><td>ä½¿ç”¨ Commit Hash</td><td>ğŸ”„ ç‰ˆæœ¬è¿½æº¯</td></tr><tr><td><strong>CI/CD é›†æˆ</strong></td><td>å®Œæ•´çš„è‡ªåŠ¨åŒ–æµç¨‹</td><td>ğŸ¤– æ•ˆç‡æå‡</td></tr></tbody></table><h3 id="_7-2-ä¸-wpm2-çš„å¯¹æ¯”" tabindex="-1">7.2 ä¸ WPM2 çš„å¯¹æ¯” <a class="header-anchor" href="#_7-2-ä¸-wpm2-çš„å¯¹æ¯”" aria-label="Permalink to &quot;7.2 ä¸ WPM2 çš„å¯¹æ¯”&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç‰¹æ€§</th><th>WPM2</th><th>WPM3</th></tr></thead><tbody><tr><td><strong>npm åŒ…</strong></td><td>âœ…</td><td>âœ…</td></tr><tr><td><strong>å­è·¯å¾„</strong></td><td>âœ…</td><td>âœ…</td></tr><tr><td><strong>Workspace åŒ…</strong></td><td>âŒ</td><td>âœ…</td></tr><tr><td><strong>ç‰ˆæœ¬æœºåˆ¶</strong></td><td>npm ç‰ˆæœ¬</td><td>npm + Git Hash</td></tr><tr><td><strong>ç”Ÿæˆæ—¶æœº</strong></td><td>å®‰è£…å</td><td>æ„å»ºå</td></tr><tr><td><strong>CI/CD</strong></td><td>ç®€å•</td><td>å¤æ‚ä½†å®Œæ•´</td></tr></tbody></table><h3 id="_7-3-é€‚ç”¨åœºæ™¯" tabindex="-1">7.3 é€‚ç”¨åœºæ™¯ <a class="header-anchor" href="#_7-3-é€‚ç”¨åœºæ™¯" aria-label="Permalink to &quot;7.3 é€‚ç”¨åœºæ™¯&quot;">â€‹</a></h3><p><strong>ä½¿ç”¨ WPM2 çš„åœºæ™¯</strong>ï¼š</p><ul><li>âœ… é Monorepo é¡¹ç›®</li><li>âœ… åªä½¿ç”¨ npm åŒ…</li><li>âœ… ç®€å•çš„ä¾èµ–å…³ç³»</li></ul><p><strong>ä½¿ç”¨ WPM3 çš„åœºæ™¯</strong>ï¼š</p><ul><li>âœ… Monorepo æ¶æ„</li><li>âœ… ä½¿ç”¨ Workspace åŒ…</li><li>âœ… éœ€è¦å†…éƒ¨åŒ…å…±äº«</li><li>âœ… å¤æ‚çš„ä¾èµ–å…³ç³»</li></ul><h3 id="_7-4-æœªæ¥å±•æœ›" tabindex="-1">7.4 æœªæ¥å±•æœ› <a class="header-anchor" href="#_7-4-æœªæ¥å±•æœ›" aria-label="Permalink to &quot;7.4 æœªæ¥å±•æœ›&quot;">â€‹</a></h3><p><strong>çŸ­æœŸç›®æ ‡</strong>ï¼š</p><ul><li>ğŸ¯ å®Œæˆ WPM3 å®ç°</li><li>ğŸ¯ åœ¨ Monorepo é¡¹ç›®è¯•ç‚¹</li><li>ğŸ¯ ä¼˜åŒ– CI/CD æµç¨‹</li></ul><p><strong>é•¿æœŸç›®æ ‡</strong>ï¼š</p><ul><li>ğŸ”® æ”¯æŒæ›´å¤šç‰ˆæœ¬ç­–ç•¥</li><li>ğŸ”® æä¾›å¯è§†åŒ–ç®¡ç†å·¥å…·</li><li>ğŸ”® ä¸å…ƒæ¡†æ¶æ·±åº¦é›†æˆ</li></ul><hr><h2 id="å…«ã€å‚è€ƒèµ„æº" tabindex="-1">å…«ã€å‚è€ƒèµ„æº <a class="header-anchor" href="#å…«ã€å‚è€ƒèµ„æº" aria-label="Permalink to &quot;å…«ã€å‚è€ƒèµ„æº&quot;">â€‹</a></h2><h3 id="_8-1-ç›¸å…³æ–‡æ¡£" tabindex="-1">8.1 ç›¸å…³æ–‡æ¡£ <a class="header-anchor" href="#_8-1-ç›¸å…³æ–‡æ¡£" aria-label="Permalink to &quot;8.1 ç›¸å…³æ–‡æ¡£&quot;">â€‹</a></h3><ul><li><a href="./01-åŸºç¡€æ¦‚å¿µ-importmapä¸ESM-CDNä»‹ç»">Import Map ä¸ ESM CDN ä»‹ç»</a></li><li><a href="./02-å·¥å…·æ¼”è¿›-RFC15-WPM2">RFC 15: WPM2</a></li></ul><h3 id="_8-2-æŠ€æœ¯èµ„æº" tabindex="-1">8.2 æŠ€æœ¯èµ„æº <a class="header-anchor" href="#_8-2-æŠ€æœ¯èµ„æº" aria-label="Permalink to &quot;8.2 æŠ€æœ¯èµ„æº&quot;">â€‹</a></h3><ul><li><a href="https://github.com/jspm/generator" target="_blank" rel="noreferrer">JSPM Generator</a></li><li><a href="https://pnpm.io/workspaces" target="_blank" rel="noreferrer">pnpm Workspace</a></li><li><a href="https://github.com/WICG/import-maps" target="_blank" rel="noreferrer">Import Maps Spec</a></li></ul><hr><p><strong>æ–‡æ¡£ç»´æŠ¤</strong>ï¼šå‰ç«¯åŸºå»ºå›¢é˜Ÿ<br><strong>RFC ä½œè€…</strong>ï¼š[ä½œè€…å]<br><strong>æ•´ç†æ—¥æœŸ</strong>ï¼š2025-01-24<br><strong>æ–‡æ¡£ç‰ˆæœ¬</strong>ï¼šv1.0</p>`,196)]))}const u=a(t,[["render",h]]);export{E as __pageData,u as default};

import{_ as i,c as a,o as n,a7 as l}from"./chunks/framework.BQb8NfN9.js";const g=JSON.parse('{"title":"Canvas 2D æŠ€æœ¯æ·±åº¦è§£æ - æ•™å­¦å¤§çº²","description":"","frontmatter":{},"headers":[],"relativePath":"cv/Canvas2DåŸºç¡€/00-æ•™å­¦å¤§çº²ä¸ç›®å½•.md","filePath":"cv/Canvas2DåŸºç¡€/00-æ•™å­¦å¤§çº²ä¸ç›®å½•.md","lastUpdated":1769693389000}'),p={name:"cv/Canvas2DåŸºç¡€/00-æ•™å­¦å¤§çº²ä¸ç›®å½•.md"};function h(k,s,t,e,r,E){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="canvas-2d-æŠ€æœ¯æ·±åº¦è§£æ-æ•™å­¦å¤§çº²" tabindex="-1">Canvas 2D æŠ€æœ¯æ·±åº¦è§£æ - æ•™å­¦å¤§çº² <a class="header-anchor" href="#canvas-2d-æŠ€æœ¯æ·±åº¦è§£æ-æ•™å­¦å¤§çº²" aria-label="Permalink to &quot;Canvas 2D æŠ€æœ¯æ·±åº¦è§£æ - æ•™å­¦å¤§çº²&quot;">â€‹</a></h1><blockquote><p>æœ¬ç³»åˆ—æ–‡æ¡£æ—¨åœ¨ç³»ç»Ÿæ€§åœ°è®²è§£ HTML5 Canvas 2D ç»‘åˆ¶æŠ€æœ¯ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œå¸®åŠ©è¯»è€…å…¨é¢æŒæ¡ Web 2D å›¾å½¢ç»‘åˆ¶èƒ½åŠ›ã€‚</p></blockquote><hr><h2 id="ğŸ“š-ç³»åˆ—æ–‡æ¡£ç»“æ„" tabindex="-1">ğŸ“š ç³»åˆ—æ–‡æ¡£ç»“æ„ <a class="header-anchor" href="#ğŸ“š-ç³»åˆ—æ–‡æ¡£ç»“æ„" aria-label="Permalink to &quot;ğŸ“š ç³»åˆ—æ–‡æ¡£ç»“æ„&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Canvas2DåŸºç¡€/</span></span>
<span class="line"><span>â”œâ”€â”€ 00-æ•™å­¦å¤§çº²ä¸ç›®å½•.md           â† å½“å‰æ–‡æ¡£</span></span>
<span class="line"><span>â”œâ”€â”€ 01-Canvaså…ƒç´ ä¸ç»‘åˆ¶ç¯å¢ƒ.md     â† å…¥é—¨åŸºç¡€</span></span>
<span class="line"><span>â”œâ”€â”€ 02-åŸºç¡€å›¾å½¢ç»‘åˆ¶.md             â† å‡ ä½•å›¾å½¢</span></span>
<span class="line"><span>â”œâ”€â”€ 03-è·¯å¾„ä¸è´å¡å°”æ›²çº¿.md         â† è·¯å¾„ç³»ç»Ÿ</span></span>
<span class="line"><span>â”œâ”€â”€ 04-æ ·å¼ä¸é¢œè‰²ç³»ç»Ÿ.md           â† è§†è§‰æ•ˆæœ</span></span>
<span class="line"><span>â”œâ”€â”€ 05-å˜æ¢ä¸åæ ‡ç³»ç»Ÿ.md           â† æ•°å­¦å˜æ¢</span></span>
<span class="line"><span>â”œâ”€â”€ 06-å›¾åƒä¸åƒç´ æ“ä½œ.md           â† å›¾åƒå¤„ç†</span></span>
<span class="line"><span>â”œâ”€â”€ 07-åˆæˆä¸æ··åˆæ¨¡å¼.md           â† å›¾å±‚åˆæˆ</span></span>
<span class="line"><span>â”œâ”€â”€ 08-æ–‡æœ¬æ¸²æŸ“.md                 â† æ–‡å­—ç»˜åˆ¶</span></span>
<span class="line"><span>â”œâ”€â”€ 09-åŠ¨ç”»ä¸å¸§å¾ªç¯.md             â† åŠ¨ç”»ç³»ç»Ÿ</span></span>
<span class="line"><span>â”œâ”€â”€ 10-ç¦»å±æ¸²æŸ“ä¸æ€§èƒ½ä¼˜åŒ–.md       â† æ€§èƒ½è°ƒä¼˜</span></span>
<span class="line"><span>â””â”€â”€ 11-å®æˆ˜æ¡ˆä¾‹ä¸æœ€ä½³å®è·µ.md       â† ç»¼åˆåº”ç”¨</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><hr><h2 id="ğŸ¯-å­¦ä¹ ç›®æ ‡" tabindex="-1">ğŸ¯ å­¦ä¹ ç›®æ ‡ <a class="header-anchor" href="#ğŸ¯-å­¦ä¹ ç›®æ ‡" aria-label="Permalink to &quot;ğŸ¯ å­¦ä¹ ç›®æ ‡&quot;">â€‹</a></h2><p>å®Œæˆæœ¬ç³»åˆ—å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ol><li><strong>ç†è§£ Canvas æœ¬è´¨</strong>ï¼šæŒæ¡ Canvas ä¸ DOMã€SVGã€WebGL çš„åŒºåˆ«å’Œé€‚ç”¨åœºæ™¯</li><li><strong>ç†Ÿç»ƒåŸºç¡€ç»˜å›¾</strong>ï¼šä½¿ç”¨ Canvas API ç»‘åˆ¶å„ç§å‡ ä½•å›¾å½¢å’Œè·¯å¾„</li><li><strong>æŒæ¡å˜æ¢ç³»ç»Ÿ</strong>ï¼šç†è§£åæ ‡å˜æ¢çš„æ•°å­¦åŸç†å¹¶çµæ´»åº”ç”¨</li><li><strong>å¤„ç†å›¾åƒåƒç´ </strong>ï¼šè¿›è¡Œå›¾åƒç»˜åˆ¶ã€åƒç´ è¯»å†™å’Œæ»¤é•œæ•ˆæœå¼€å‘</li><li><strong>å®ç°æµç•…åŠ¨ç”»</strong>ï¼šä½¿ç”¨ requestAnimationFrame åˆ›å»ºé«˜æ€§èƒ½åŠ¨ç”»</li><li><strong>ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½</strong>ï¼šåº”ç”¨ç¦»å±æ¸²æŸ“ã€è„çŸ©å½¢ç­‰ä¼˜åŒ–ç­–ç•¥</li><li><strong>å¼€å‘å®é™…é¡¹ç›®</strong>ï¼šå…·å¤‡å¼€å‘ç”»æ¿ã€å›¾è¡¨ã€æ¸¸æˆç­‰åº”ç”¨çš„èƒ½åŠ›</li></ol><hr><h2 id="ğŸ“–-ç¬¬ä¸€éƒ¨åˆ†-åŸºç¡€å…¥é—¨ç¯‡" tabindex="-1">ğŸ“– ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€å…¥é—¨ç¯‡ <a class="header-anchor" href="#ğŸ“–-ç¬¬ä¸€éƒ¨åˆ†-åŸºç¡€å…¥é—¨ç¯‡" aria-label="Permalink to &quot;ğŸ“– ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€å…¥é—¨ç¯‡&quot;">â€‹</a></h2><h3 id="ç¬¬1ç« -canvas-å…ƒç´ ä¸ç»˜åˆ¶ç¯å¢ƒ" tabindex="-1">ç¬¬1ç« ï¼šCanvas å…ƒç´ ä¸ç»˜åˆ¶ç¯å¢ƒ <a class="header-anchor" href="#ç¬¬1ç« -canvas-å…ƒç´ ä¸ç»˜åˆ¶ç¯å¢ƒ" aria-label="Permalink to &quot;ç¬¬1ç« ï¼šCanvas å…ƒç´ ä¸ç»˜åˆ¶ç¯å¢ƒ&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•åˆ›å»ºå’Œé…ç½® Canvas ç”»å¸ƒï¼ŸCanvas çš„åæ ‡ç³»ç»Ÿæ˜¯æ€æ ·çš„ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>1.1 Canvas ç®€ä»‹</p><ul><li>Canvas çš„å†å²ä¸å‘å±•</li><li>Canvas vs SVG vs WebGL</li><li>Canvas çš„åº”ç”¨åœºæ™¯ï¼ˆæ¸¸æˆã€å›¾è¡¨ã€å›¾åƒç¼–è¾‘ï¼‰</li><li>æµè§ˆå™¨å…¼å®¹æ€§</li></ul></li><li><p>1.2 åˆ›å»º Canvas å…ƒç´ </p><ul><li>HTML å£°æ˜æ–¹å¼</li><li>JavaScript åŠ¨æ€åˆ›å»º</li><li>Canvas å°ºå¯¸è®¾ç½®ï¼ˆwidth/height å±æ€§ vs CSS æ ·å¼ï¼‰</li><li>å›é€€å†…å®¹ï¼ˆFallback Contentï¼‰</li></ul></li><li><p>1.3 è·å–ç»‘åˆ¶ä¸Šä¸‹æ–‡</p><ul><li><code>getContext(&#39;2d&#39;)</code> è¯¦è§£</li><li>CanvasRenderingContext2D æ¥å£</li><li>ä¸Šä¸‹æ–‡å±æ€§ä¸€è§ˆ</li><li>æ£€æµ‹ Canvas æ”¯æŒ</li></ul></li><li><p>1.4 Canvas åæ ‡ç³»ç»Ÿ</p><ul><li>åæ ‡åŸç‚¹ä½ç½®ï¼ˆå·¦ä¸Šè§’ï¼‰</li><li>X è½´å’Œ Y è½´æ–¹å‘</li><li>åƒç´ åæ ‡ä¸ç‰©ç†åƒç´ </li><li>å­åƒç´ æ¸²æŸ“</li></ul></li><li><p>1.5 é«˜æ¸…å±ï¼ˆRetinaï¼‰é€‚é…</p><ul><li>è®¾å¤‡åƒç´ æ¯”ï¼ˆdevicePixelRatioï¼‰</li><li>CSS åƒç´  vs ç‰©ç†åƒç´ </li><li>é«˜æ¸…å±é€‚é…æ–¹æ¡ˆ</li><li>åŠ¨æ€ DPR å¤„ç†</li></ul></li><li><p>1.6 Canvas çŠ¶æ€ç®¡ç†</p><ul><li><code>save()</code> å’Œ <code>restore()</code> æ–¹æ³•</li><li>çŠ¶æ€æ ˆæœºåˆ¶</li><li>å¯ä¿å­˜çš„çŠ¶æ€åˆ—è¡¨</li><li>çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šæŒæ¡ Canvas çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œé«˜æ¸…å±é€‚é…æŠ€æœ¯</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é«˜æ¸…å±é€‚é…</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dpr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.devicePixelRatio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½® Canvas å®é™…å°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 800</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dpr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 600</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dpr;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¾ç½® CSS æ˜¾ç¤ºå°ºå¯¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">canvas.style.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;800px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">canvas.style.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;600px&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¼©æ”¾ç»‘åˆ¶ä¸Šä¸‹æ–‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dpr, dpr);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><hr><h3 id="ç¬¬2ç« -åŸºç¡€å›¾å½¢ç»‘åˆ¶" tabindex="-1">ç¬¬2ç« ï¼šåŸºç¡€å›¾å½¢ç»‘åˆ¶ <a class="header-anchor" href="#ç¬¬2ç« -åŸºç¡€å›¾å½¢ç»‘åˆ¶" aria-label="Permalink to &quot;ç¬¬2ç« ï¼šåŸºç¡€å›¾å½¢ç»‘åˆ¶&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ä½¿ç”¨ Canvas ç»‘åˆ¶åŸºæœ¬å‡ ä½•å›¾å½¢ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>2.1 çŸ©å½¢ç»˜åˆ¶</p><ul><li><code>fillRect(x, y, width, height)</code> - å¡«å……çŸ©å½¢</li><li><code>strokeRect(x, y, width, height)</code> - æè¾¹çŸ©å½¢</li><li><code>clearRect(x, y, width, height)</code> - æ¸…é™¤çŸ©å½¢åŒºåŸŸ</li><li>åœ†è§’çŸ©å½¢å®ç°</li></ul></li><li><p>2.2 åœ†ä¸åœ†å¼§</p><ul><li><code>arc(x, y, radius, startAngle, endAngle, counterclockwise)</code></li><li>è§’åº¦ä¸å¼§åº¦è½¬æ¢</li><li><code>arcTo(x1, y1, x2, y2, radius)</code> - åˆ‡çº¿åœ†å¼§</li><li>ç»˜åˆ¶å®Œæ•´åœ†å½¢</li><li>ç»˜åˆ¶æ‰‡å½¢</li></ul></li><li><p>2.3 ç›´çº¿ä¸æŠ˜çº¿</p><ul><li><code>moveTo(x, y)</code> - ç§»åŠ¨ç”»ç¬”</li><li><code>lineTo(x, y)</code> - ç»˜åˆ¶ç›´çº¿</li><li>è¿ç»­æŠ˜çº¿ç»˜åˆ¶</li><li>çº¿æ®µç«¯ç‚¹è¿æ¥</li></ul></li><li><p>2.4 å¤šè¾¹å½¢ç»˜åˆ¶</p><ul><li>ä¸‰è§’å½¢</li><li>æ­£å¤šè¾¹å½¢ï¼ˆæ­£äº”è¾¹å½¢ã€æ­£å…­è¾¹å½¢ç­‰ï¼‰</li><li>æ˜Ÿå½¢</li><li>ä»»æ„å¤šè¾¹å½¢</li></ul></li><li><p>2.5 å¡«å……ä¸æè¾¹</p><ul><li><code>fill()</code> æ–¹æ³•è¯¦è§£</li><li><code>stroke()</code> æ–¹æ³•è¯¦è§£</li><li>å¡«å……è§„åˆ™ï¼ˆnonzeroã€evenoddï¼‰</li><li>å¡«å……ä¸æè¾¹çš„é¡ºåº</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç†Ÿç»ƒç»˜åˆ¶å„ç§åŸºç¡€å‡ ä½•å›¾å½¢</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»˜åˆ¶æ­£å¤šè¾¹å½¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> drawPolygon</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">radius</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">sides</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sides; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> angle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sides </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> radius </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(angle);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> radius </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(angle);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lineTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">closePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stroke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><hr><h3 id="ç¬¬3ç« -è·¯å¾„ä¸è´å¡å°”æ›²çº¿" tabindex="-1">ç¬¬3ç« ï¼šè·¯å¾„ä¸è´å¡å°”æ›²çº¿ <a class="header-anchor" href="#ç¬¬3ç« -è·¯å¾„ä¸è´å¡å°”æ›²çº¿" aria-label="Permalink to &quot;ç¬¬3ç« ï¼šè·¯å¾„ä¸è´å¡å°”æ›²çº¿&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ä½¿ç”¨è·¯å¾„ç³»ç»Ÿç»˜åˆ¶å¤æ‚å›¾å½¢ï¼Ÿè´å¡å°”æ›²çº¿çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>3.1 è·¯å¾„æ¦‚å¿µ</p><ul><li>ä»€ä¹ˆæ˜¯è·¯å¾„ï¼ˆPathï¼‰</li><li><code>beginPath()</code> - å¼€å§‹æ–°è·¯å¾„</li><li><code>closePath()</code> - é—­åˆè·¯å¾„</li><li>è·¯å¾„ä¸å­è·¯å¾„</li><li>è·¯å¾„ç»˜åˆ¶æµç¨‹</li></ul></li><li><p>3.2 Path2D å¯¹è±¡</p><ul><li>åˆ›å»º Path2D å¯¹è±¡</li><li>è·¯å¾„å¤ç”¨</li><li>è·¯å¾„åˆå¹¶</li><li>SVG è·¯å¾„å­—ç¬¦ä¸²è½¬æ¢</li><li>Path2D çš„åº”ç”¨åœºæ™¯</li></ul></li><li><p>3.3 äºŒæ¬¡è´å¡å°”æ›²çº¿</p><ul><li><code>quadraticCurveTo(cpx, cpy, x, y)</code></li><li>æ§åˆ¶ç‚¹çš„ä½œç”¨</li><li>äºŒæ¬¡è´å¡å°”æ›²çº¿æ•°å­¦å…¬å¼ï¼šB(t) = (1-t)Â²Pâ‚€ + 2(1-t)tPâ‚ + tÂ²Pâ‚‚</li><li>æ›²çº¿ç»˜åˆ¶ç¤ºä¾‹</li><li>æ§åˆ¶ç‚¹å¯è§†åŒ–</li></ul></li><li><p>3.4 ä¸‰æ¬¡è´å¡å°”æ›²çº¿</p><ul><li><code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code></li><li>ä¸¤ä¸ªæ§åˆ¶ç‚¹çš„ä½œç”¨</li><li>ä¸‰æ¬¡è´å¡å°”æ›²çº¿æ•°å­¦å…¬å¼</li><li>ä¸äºŒæ¬¡è´å¡å°”çš„åŒºåˆ«</li><li>S å½¢æ›²çº¿ç»˜åˆ¶</li></ul></li><li><p>3.5 æ›²çº¿å®é™…åº”ç”¨</p><ul><li>å¹³æ»‘æ›²çº¿è¿æ¥å¤šä¸ªç‚¹</li><li>åœ†è§’çŸ©å½¢çš„è´å¡å°”å®ç°</li><li>æ³¢æµªçº¿æ•ˆæœ</li><li>å¿ƒå½¢ç»˜åˆ¶</li><li>æ›²çº¿ç¼–è¾‘å™¨å®ç°æ€è·¯</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç†è§£è·¯å¾„ç³»ç»Ÿå’Œè´å¡å°”æ›²çº¿çš„æ•°å­¦åŸç†</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸‰æ¬¡è´å¡å°”æ›²çº¿ç»˜åˆ¶ S å½¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">250</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">250</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stroke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ Path2D å¤ç”¨è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> heart</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Path2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">37</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">70</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">62.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">62.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">102</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">120</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">110</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">102</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">130</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">130</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">62.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">130</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">62.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">130</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">heart.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bezierCurveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">85</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">37</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">75</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(heart);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><hr><h2 id="ğŸ“–-ç¬¬äºŒéƒ¨åˆ†-æ ·å¼ä¸å˜æ¢ç¯‡" tabindex="-1">ğŸ“– ç¬¬äºŒéƒ¨åˆ†ï¼šæ ·å¼ä¸å˜æ¢ç¯‡ <a class="header-anchor" href="#ğŸ“–-ç¬¬äºŒéƒ¨åˆ†-æ ·å¼ä¸å˜æ¢ç¯‡" aria-label="Permalink to &quot;ğŸ“– ç¬¬äºŒéƒ¨åˆ†ï¼šæ ·å¼ä¸å˜æ¢ç¯‡&quot;">â€‹</a></h2><h3 id="ç¬¬4ç« -æ ·å¼ä¸é¢œè‰²ç³»ç»Ÿ" tabindex="-1">ç¬¬4ç« ï¼šæ ·å¼ä¸é¢œè‰²ç³»ç»Ÿ <a class="header-anchor" href="#ç¬¬4ç« -æ ·å¼ä¸é¢œè‰²ç³»ç»Ÿ" aria-label="Permalink to &quot;ç¬¬4ç« ï¼šæ ·å¼ä¸é¢œè‰²ç³»ç»Ÿ&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ä¸ºå›¾å½¢æ·»åŠ ä¸°å¯Œçš„æ ·å¼æ•ˆæœï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>4.1 é¢œè‰²è¡¨ç¤º</p><ul><li>CSS é¢œè‰²åç§°</li><li>åå…­è¿›åˆ¶é¢œè‰²ï¼ˆ#RRGGBBã€#RGBï¼‰</li><li>RGB/RGBA å‡½æ•°</li><li>HSL/HSLA å‡½æ•°</li><li>é¢œè‰²é€æ˜åº¦</li></ul></li><li><p>4.2 çº¿æ¡æ ·å¼</p><ul><li><code>lineWidth</code> - çº¿æ¡å®½åº¦</li><li><code>lineCap</code> - çº¿ç«¯æ ·å¼ï¼ˆbuttã€roundã€squareï¼‰</li><li><code>lineJoin</code> - çº¿æ®µè¿æ¥æ ·å¼ï¼ˆmiterã€roundã€bevelï¼‰</li><li><code>miterLimit</code> - æ–œæ¥é™åˆ¶</li><li>çº¿æ¡æ ·å¼ç¤ºæ„å›¾</li></ul></li><li><p>4.3 è™šçº¿ç»˜åˆ¶</p><ul><li><code>setLineDash([segments])</code> - è®¾ç½®è™šçº¿æ¨¡å¼</li><li><code>getLineDash()</code> - è·å–è™šçº¿æ¨¡å¼</li><li><code>lineDashOffset</code> - è™šçº¿åç§»</li><li>åŠ¨æ€è™šçº¿åŠ¨ç”»ï¼ˆèš‚èšçº¿æ•ˆæœï¼‰</li></ul></li><li><p>4.4 æ¸å˜å¡«å……</p><ul><li><code>createLinearGradient(x0, y0, x1, y1)</code> - çº¿æ€§æ¸å˜</li><li><code>createRadialGradient(x0, y0, r0, x1, y1, r1)</code> - å¾„å‘æ¸å˜</li><li><code>createConicGradient(startAngle, x, y)</code> - é”¥å½¢æ¸å˜</li><li><code>addColorStop(offset, color)</code> - æ·»åŠ é¢œè‰²åœæ­¢ç‚¹</li><li>å¤šè‰²æ¸å˜æ•ˆæœ</li></ul></li><li><p>4.5 å›¾æ¡ˆå¡«å……</p><ul><li><code>createPattern(image, repetition)</code> - åˆ›å»ºå›¾æ¡ˆ</li><li>é‡å¤æ¨¡å¼ï¼ˆrepeatã€repeat-xã€repeat-yã€no-repeatï¼‰</li><li>å›¾æ¡ˆå˜æ¢</li><li>åŠ¨æ€å›¾æ¡ˆ</li></ul></li><li><p>4.6 é˜´å½±æ•ˆæœ</p><ul><li><code>shadowColor</code> - é˜´å½±é¢œè‰²</li><li><code>shadowBlur</code> - é˜´å½±æ¨¡ç³Šåº¦</li><li><code>shadowOffsetX</code> - æ°´å¹³åç§»</li><li><code>shadowOffsetY</code> - å‚ç›´åç§»</li><li>é˜´å½±æ€§èƒ½è€ƒé‡</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šæŒæ¡ Canvas çš„æ ·å¼ç³»ç»Ÿ</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºçº¿æ€§æ¸å˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> gradient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createLinearGradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gradient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addColorStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#ff0000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gradient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addColorStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#00ff00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gradient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addColorStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#0000ff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gradient;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// èš‚èšçº¿åŠ¨ç”»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, canvas.width, canvas.height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setLineDash</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.lineDashOffset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">offset;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strokeRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    offset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><hr><h3 id="ç¬¬5ç« -å˜æ¢ä¸åæ ‡ç³»ç»Ÿ" tabindex="-1">ç¬¬5ç« ï¼šå˜æ¢ä¸åæ ‡ç³»ç»Ÿ <a class="header-anchor" href="#ç¬¬5ç« -å˜æ¢ä¸åæ ‡ç³»ç»Ÿ" aria-label="Permalink to &quot;ç¬¬5ç« ï¼šå˜æ¢ä¸åæ ‡ç³»ç»Ÿ&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ä½¿ç”¨å˜æ¢æ“ä½œå›¾å½¢ï¼Ÿå˜æ¢çŸ©é˜µçš„æ•°å­¦åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>5.1 å¹³ç§»å˜æ¢</p><ul><li><code>translate(x, y)</code> æ–¹æ³•</li><li>åæ ‡åŸç‚¹ç§»åŠ¨</li><li>å¹³ç§»çš„ç´¯ç§¯æ•ˆæœ</li><li>å¹³ç§»çŸ©é˜µè¡¨ç¤º</li></ul></li><li><p>5.2 æ—‹è½¬å˜æ¢</p><ul><li><code>rotate(angle)</code> æ–¹æ³•</li><li>è§’åº¦ä¸å¼§åº¦ï¼š<code>radians = degrees * Math.PI / 180</code></li><li>æ—‹è½¬ä¸­å¿ƒï¼ˆé»˜è®¤åŸç‚¹ï¼‰</li><li>ç»•ä»»æ„ç‚¹æ—‹è½¬çš„å®ç°</li><li>æ—‹è½¬çŸ©é˜µè¡¨ç¤º</li></ul></li><li><p>5.3 ç¼©æ”¾å˜æ¢</p><ul><li><code>scale(x, y)</code> æ–¹æ³•</li><li>ç­‰æ¯”ç¼©æ”¾ä¸éç­‰æ¯”ç¼©æ”¾</li><li>è´Ÿå€¼ç¼©æ”¾å®ç°é•œåƒ</li><li>ç¼©æ”¾çŸ©é˜µè¡¨ç¤º</li></ul></li><li><p>5.4 çŸ©é˜µå˜æ¢</p><ul><li><code>transform(a, b, c, d, e, f)</code> - åº”ç”¨å˜æ¢çŸ©é˜µ</li><li><code>setTransform(a, b, c, d, e, f)</code> - é‡ç½®å¹¶åº”ç”¨å˜æ¢</li><li><code>resetTransform()</code> - é‡ç½®ä¸ºå•ä½çŸ©é˜µ</li><li>6 å‚æ•°å«ä¹‰è¯¦è§£</li><li><code>getTransform()</code> - è·å–å½“å‰å˜æ¢çŸ©é˜µ</li></ul></li><li><p>5.5 å˜æ¢çŸ©é˜µæ•°å­¦åŸç†</p><ul><li>2D ä»¿å°„å˜æ¢çŸ©é˜µï¼ˆ3Ã—3ï¼‰</li><li>é½æ¬¡åæ ‡</li><li>çŸ©é˜µä¹˜æ³•ä¸å˜æ¢ç»„åˆ</li><li>é€†å˜æ¢è®¡ç®—</li></ul><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>| a  c  e |   | x |   | ax + cy + e |</span></span>
<span class="line"><span>| b  d  f | Ã— | y | = | bx + dy + f |</span></span>
<span class="line"><span>| 0  0  1 |   | 1 |   |      1      |</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>5.6 å˜æ¢ç»„åˆä¸é¡ºåº</p><ul><li>å˜æ¢é¡ºåºçš„é‡è¦æ€§</li><li>å…ˆæ—‹è½¬åå¹³ç§» vs å…ˆå¹³ç§»åæ—‹è½¬</li><li>å¤åˆå˜æ¢çš„å®ç°</li><li>å¸¸è§å˜æ¢é™·é˜±</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç†è§£å˜æ¢çš„æ•°å­¦åŸç†å¹¶çµæ´»åº”ç”¨</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»•ä»»æ„ç‚¹æ—‹è½¬</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rotateAroundPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">angle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">translate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rotate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(angle);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">translate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨å˜æ¢çŸ©é˜µå®ç°é”™åˆ‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">shx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">shy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // | 1   shx  0 |</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // | shy  1   0 |</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // | 0    0   1 |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">transform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, shy, shx, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·å–å½“å‰å˜æ¢çŸ©é˜µ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> matrix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTransform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(matrix); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// DOMMatrix { a, b, c, d, e, f }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><hr><h2 id="ğŸ“–-ç¬¬ä¸‰éƒ¨åˆ†-å›¾åƒä¸åƒç´ ç¯‡" tabindex="-1">ğŸ“– ç¬¬ä¸‰éƒ¨åˆ†ï¼šå›¾åƒä¸åƒç´ ç¯‡ <a class="header-anchor" href="#ğŸ“–-ç¬¬ä¸‰éƒ¨åˆ†-å›¾åƒä¸åƒç´ ç¯‡" aria-label="Permalink to &quot;ğŸ“– ç¬¬ä¸‰éƒ¨åˆ†ï¼šå›¾åƒä¸åƒç´ ç¯‡&quot;">â€‹</a></h2><h3 id="ç¬¬6ç« -å›¾åƒä¸åƒç´ æ“ä½œ" tabindex="-1">ç¬¬6ç« ï¼šå›¾åƒä¸åƒç´ æ“ä½œ <a class="header-anchor" href="#ç¬¬6ç« -å›¾åƒä¸åƒç´ æ“ä½œ" aria-label="Permalink to &quot;ç¬¬6ç« ï¼šå›¾åƒä¸åƒç´ æ“ä½œ&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•åœ¨ Canvas ä¸­å¤„ç†å›¾åƒå’Œæ“ä½œåƒç´ ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>6.1 ç»˜åˆ¶å›¾åƒ</p><ul><li><code>drawImage(image, dx, dy)</code> - åŸºæœ¬ç»˜åˆ¶</li><li><code>drawImage(image, dx, dy, dw, dh)</code> - ç¼©æ”¾ç»˜åˆ¶</li><li><code>drawImage(image, sx, sy, sw, sh, dx, dy, dw, dh)</code> - è£å‰ªç»˜åˆ¶</li><li>ä¹å‚æ•°è¯¦è§£ä¸åº”ç”¨</li><li>å›¾åƒå¹³æ»‘ï¼š<code>imageSmoothingEnabled</code></li></ul></li><li><p>6.2 å›¾åƒæºç±»å‹</p><ul><li><code>HTMLImageElement</code> - Image å¯¹è±¡</li><li><code>HTMLCanvasElement</code> - å¦ä¸€ä¸ª Canvas</li><li><code>HTMLVideoElement</code> - è§†é¢‘å¸§</li><li><code>ImageBitmap</code> - ä½å›¾å¯¹è±¡</li><li><code>OffscreenCanvas</code> - ç¦»å± Canvas</li><li>å›¾åƒåŠ è½½ä¸ onload äº‹ä»¶</li></ul></li><li><p>6.3 ImageData å¯¹è±¡</p><ul><li><code>createImageData(width, height)</code> - åˆ›å»ºç©ºç™½ ImageData</li><li><code>createImageData(imageData)</code> - å¤åˆ¶å°ºå¯¸</li><li>ImageData ç»“æ„ï¼šwidthã€heightã€data</li><li>RGBA æ•°æ®æ’åˆ—ï¼š<code>[R, G, B, A, R, G, B, A, ...]</code></li><li>åƒç´ ç´¢å¼•è®¡ç®—ï¼š<code>index = (y * width + x) * 4</code></li></ul></li><li><p>6.4 åƒç´ è¯»å–</p><ul><li><code>getImageData(sx, sy, sw, sh)</code> - è¯»å–åƒç´ æ•°æ®</li><li>è·¨åŸŸé™åˆ¶ï¼ˆTainted Canvasï¼‰</li><li>CORS å¤„ç†</li><li>æ€§èƒ½è€ƒé‡</li></ul></li><li><p>6.5 åƒç´ å†™å…¥</p><ul><li><code>putImageData(imageData, dx, dy)</code> - å†™å…¥åƒç´ æ•°æ®</li><li><code>putImageData(imageData, dx, dy, dirtyX, dirtyY, dirtyW, dirtyH)</code> - éƒ¨åˆ†å†™å…¥</li><li>è„çŸ©å½¢ä¼˜åŒ–</li></ul></li><li><p>6.6 åƒç´ æ“ä½œå®æˆ˜</p><ul><li>ç°åº¦åŒ–æ»¤é•œ</li><li>åè‰²æ•ˆæœ</li><li>äº®åº¦/å¯¹æ¯”åº¦è°ƒæ•´</li><li>æ¨¡ç³Šæ•ˆæœï¼ˆå‡å€¼æ¨¡ç³Šã€é«˜æ–¯æ¨¡ç³Šï¼‰</li><li>è¾¹ç¼˜æ£€æµ‹ï¼ˆSobel ç®—å­ï¼‰</li><li>é©¬èµ›å…‹æ•ˆæœ</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šæŒæ¡å›¾åƒç»˜åˆ¶å’Œåƒç´ çº§æ“ä½œ</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç°åº¦åŒ–æ»¤é•œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grayscale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> imageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x, y, width, height);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageData.data;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> r</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data[i];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // åŠ æƒå¹³å‡æ³•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> gray</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.299</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> g </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.587</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.114</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        data[i] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data[i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gray;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">putImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(imageData, x, y);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¾¹ç¼˜æ£€æµ‹ (Sobel)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sobelEdgeDetection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">imageData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> width</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageData.width;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> height</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageData.height;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imageData.data;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8ClampedArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Sobel æ ¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sobelX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sobelY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... å·ç§¯è®¡ç®—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><hr><h3 id="ç¬¬7ç« -åˆæˆä¸æ··åˆæ¨¡å¼" tabindex="-1">ç¬¬7ç« ï¼šåˆæˆä¸æ··åˆæ¨¡å¼ <a class="header-anchor" href="#ç¬¬7ç« -åˆæˆä¸æ··åˆæ¨¡å¼" aria-label="Permalink to &quot;ç¬¬7ç« ï¼šåˆæˆä¸æ··åˆæ¨¡å¼&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•æ§åˆ¶å›¾å½¢çš„å åŠ æ•ˆæœï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>7.1 å…¨å±€é€æ˜åº¦</p><ul><li><code>globalAlpha</code> å±æ€§</li><li>é€æ˜åº¦èŒƒå›´ï¼š0.0ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ° 1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰</li><li>é€æ˜åº¦å åŠ è®¡ç®—</li><li>ä¸ RGBA é€æ˜åº¦çš„åŒºåˆ«</li></ul></li><li><p>7.2 åˆæˆæ“ä½œæ¦‚è¿°</p><ul><li><code>globalCompositeOperation</code> å±æ€§</li><li>æºï¼ˆSourceï¼‰ä¸ç›®æ ‡ï¼ˆDestinationï¼‰æ¦‚å¿µ</li><li>26 ç§åˆæˆæ¨¡å¼ä¸€è§ˆ</li></ul></li><li><p>7.3 åŸºç¡€åˆæˆæ¨¡å¼</p><ul><li><code>source-over</code> - é»˜è®¤æ¨¡å¼ï¼Œæºè¦†ç›–ç›®æ ‡</li><li><code>source-in</code> - æºä¸ç›®æ ‡é‡å éƒ¨åˆ†ï¼Œæ˜¾ç¤ºæº</li><li><code>source-out</code> - æºä¸ç›®æ ‡ä¸é‡å éƒ¨åˆ†</li><li><code>source-atop</code> - æºåœ¨ç›®æ ‡ä¹‹ä¸Šï¼Œåªæ˜¾ç¤ºé‡å éƒ¨åˆ†</li><li><code>destination-over</code> - ç›®æ ‡è¦†ç›–æº</li><li><code>destination-in</code> - ç›®æ ‡ä¸æºé‡å éƒ¨åˆ†ï¼Œæ˜¾ç¤ºç›®æ ‡</li><li><code>destination-out</code> - ç›®æ ‡ä¸æºä¸é‡å éƒ¨åˆ†</li><li><code>destination-atop</code> - ç›®æ ‡åœ¨æºä¹‹ä¸Š</li></ul></li><li><p>7.4 æ··åˆæ¨¡å¼</p><ul><li><code>lighter</code> - é¢œè‰²å åŠ </li><li><code>multiply</code> - æ­£ç‰‡å åº•</li><li><code>screen</code> - æ»¤è‰²</li><li><code>overlay</code> - å åŠ </li><li><code>darken</code> - å˜æš—</li><li><code>lighten</code> - å˜äº®</li><li><code>color-dodge</code> - é¢œè‰²å‡æ·¡</li><li><code>color-burn</code> - é¢œè‰²åŠ æ·±</li><li><code>hard-light</code> / <code>soft-light</code> - å¼ºå…‰/æŸ”å…‰</li><li><code>difference</code> / <code>exclusion</code> - å·®å€¼/æ’é™¤</li></ul></li><li><p>7.5 è£å‰ªè·¯å¾„</p><ul><li><code>clip()</code> æ–¹æ³•</li><li><code>clip(path, fillRule)</code> - ä½¿ç”¨ Path2D</li><li>å¡«å……è§„åˆ™ï¼š<code>nonzero</code>ã€<code>evenodd</code></li><li>è£å‰ªåŒºåŸŸçš„å åŠ </li><li>é‡ç½®è£å‰ªåŒºåŸŸï¼ˆä½¿ç”¨ save/restoreï¼‰</li></ul></li><li><p>7.6 åˆæˆå®æˆ˜åº”ç”¨</p><ul><li>æ©¡çš®æ“¦æ•ˆæœï¼ˆdestination-outï¼‰</li><li>é®ç½©æ•ˆæœï¼ˆsource-inï¼‰</li><li>åˆ®åˆ®å¡æ•ˆæœ</li><li>å›¾åƒå åŠ æ•ˆæœ</li><li>æ¢ç…§ç¯æ•ˆæœ</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šç†è§£åˆæˆæ“ä½œå’Œæ··åˆæ¨¡å¼</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ©¡çš®æ“¦æ•ˆæœ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mousemove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">isDrawing) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.globalCompositeOperation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;destination-out&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.offsetX, e.offsetY, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.globalCompositeOperation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;source-over&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ®åˆ®å¡æ•ˆæœ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createScratchCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»˜åˆ¶åº•å±‚å†…å®¹ï¼ˆå¥–å“ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;#FFD700&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;#000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.font </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;30px Arial&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ­å–œä¸­å¥–ï¼&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">85</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»˜åˆ¶è¦†ç›–å±‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;#888&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><hr><h2 id="ğŸ“–-ç¬¬å››éƒ¨åˆ†-æ–‡æœ¬ä¸åŠ¨ç”»ç¯‡" tabindex="-1">ğŸ“– ç¬¬å››éƒ¨åˆ†ï¼šæ–‡æœ¬ä¸åŠ¨ç”»ç¯‡ <a class="header-anchor" href="#ğŸ“–-ç¬¬å››éƒ¨åˆ†-æ–‡æœ¬ä¸åŠ¨ç”»ç¯‡" aria-label="Permalink to &quot;ğŸ“– ç¬¬å››éƒ¨åˆ†ï¼šæ–‡æœ¬ä¸åŠ¨ç”»ç¯‡&quot;">â€‹</a></h2><h3 id="ç¬¬8ç« -æ–‡æœ¬æ¸²æŸ“" tabindex="-1">ç¬¬8ç« ï¼šæ–‡æœ¬æ¸²æŸ“ <a class="header-anchor" href="#ç¬¬8ç« -æ–‡æœ¬æ¸²æŸ“" aria-label="Permalink to &quot;ç¬¬8ç« ï¼šæ–‡æœ¬æ¸²æŸ“&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•åœ¨ Canvas ä¸­æ¸²æŸ“é«˜è´¨é‡æ–‡æœ¬ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>8.1 æ–‡æœ¬ç»˜åˆ¶</p><ul><li><code>fillText(text, x, y, maxWidth)</code> - å¡«å……æ–‡æœ¬</li><li><code>strokeText(text, x, y, maxWidth)</code> - æè¾¹æ–‡æœ¬</li><li>maxWidth å‚æ•°çš„ä½œç”¨</li><li>æ–‡æœ¬å‹ç¼©è¡Œä¸º</li></ul></li><li><p>8.2 å­—ä½“è®¾ç½®</p><ul><li><code>font</code> å±æ€§è¯¦è§£</li><li>CSS font è¯­æ³•ï¼š<code>[style] [variant] [weight] [size]/[lineHeight] [family]</code></li><li>å¸¸ç”¨å­—ä½“è®¾ç½®ç¤ºä¾‹</li><li>Web å­—ä½“åŠ è½½ä¸æ£€æµ‹</li></ul></li><li><p>8.3 æ–‡æœ¬å¯¹é½</p><ul><li><code>textAlign</code> - æ°´å¹³å¯¹é½ <ul><li><code>start</code>ã€<code>end</code>ã€<code>left</code>ã€<code>right</code>ã€<code>center</code></li></ul></li><li><code>textBaseline</code> - å‚ç›´åŸºçº¿ <ul><li><code>top</code>ã€<code>hanging</code>ã€<code>middle</code>ã€<code>alphabetic</code>ã€<code>ideographic</code>ã€<code>bottom</code></li></ul></li><li>å¯¹é½æ–¹å¼ç¤ºæ„å›¾</li></ul></li><li><p>8.4 æ–‡æœ¬æµ‹é‡</p><ul><li><code>measureText(text)</code> æ–¹æ³•</li><li>TextMetrics å¯¹è±¡å±æ€§ <ul><li><code>width</code> - æ–‡æœ¬å®½åº¦</li><li><code>actualBoundingBoxLeft/Right</code> - å®é™…è¾¹ç•Œ</li><li><code>fontBoundingBoxAscent/Descent</code> - å­—ä½“è¾¹ç•Œ</li><li><code>actualBoundingBoxAscent/Descent</code> - å®é™…è¾¹ç•Œ</li></ul></li><li>è®¡ç®—æ–‡æœ¬é«˜åº¦</li></ul></li><li><p>8.5 å¤šè¡Œæ–‡æœ¬</p><ul><li>Canvas ä¸æ”¯æŒè‡ªåŠ¨æ¢è¡Œ</li><li>æ‰‹åŠ¨æ¢è¡Œå®ç°</li><li>è‡ªåŠ¨æ¢è¡Œç®—æ³•</li><li>æ–‡æœ¬æº¢å‡ºå¤„ç†ï¼ˆçœç•¥å·ï¼‰</li></ul></li><li><p>8.6 æ–‡æœ¬ç‰¹æ•ˆ</p><ul><li>æ¸å˜æ–‡å­—</li><li>æè¾¹æ–‡å­—ï¼ˆç©ºå¿ƒå­—ï¼‰</li><li>é˜´å½±æ–‡å­—</li><li>3D ç«‹ä½“æ–‡å­—æ•ˆæœ</li><li>æ‰“å­—æœºåŠ¨ç”»æ•ˆæœ</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šæŒæ¡ Canvas æ–‡æœ¬æ¸²æŸ“æŠ€æœ¯</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªåŠ¨æ¢è¡Œæ–‡æœ¬</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> wrapText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">maxWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">lineHeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> words</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">split</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lines </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> words.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> testLine</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> words[i];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metrics</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">measureText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(testLine);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (metrics.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maxWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            lines.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> words[i];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> testLine;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lines.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lines.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line, x, y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lineHeight);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ¸å˜æ–‡å­—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> gradient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createLinearGradient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gradient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addColorStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#ff0000&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gradient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addColorStop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#0000ff&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.font </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;48px Arial&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gradient;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fillText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;æ¸å˜æ–‡å­—&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><hr><h3 id="ç¬¬9ç« -åŠ¨ç”»ä¸å¸§å¾ªç¯" tabindex="-1">ç¬¬9ç« ï¼šåŠ¨ç”»ä¸å¸§å¾ªç¯ <a class="header-anchor" href="#ç¬¬9ç« -åŠ¨ç”»ä¸å¸§å¾ªç¯" aria-label="Permalink to &quot;ç¬¬9ç« ï¼šåŠ¨ç”»ä¸å¸§å¾ªç¯&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•å®ç°æµç•…çš„ Canvas åŠ¨ç”»ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>9.1 åŠ¨ç”»åŸç†</p><ul><li>å¸§ç‡ï¼ˆFPSï¼‰æ¦‚å¿µ</li><li>è§†è§‰æš‚ç•™æ•ˆåº”</li><li>åˆ·æ–°ç‡ä¸å¸§ç‡çš„å…³ç³»</li><li>60 FPS çš„æ„ä¹‰</li></ul></li><li><p>9.2 requestAnimationFrame</p><ul><li><code>requestAnimationFrame(callback)</code> ç”¨æ³•</li><li>ä¸ setInterval/setTimeout çš„åŒºåˆ«</li><li>æ—¶é—´æˆ³å‚æ•°</li><li><code>cancelAnimationFrame(id)</code> - å–æ¶ˆåŠ¨ç”»</li><li>æµè§ˆå™¨åå°æ ‡ç­¾é¡µè¡Œä¸º</li></ul></li><li><p>9.3 å¸§ç‡æ§åˆ¶</p><ul><li>å›ºå®šå¸§ç‡å®ç°</li><li>è·³å¸§å¤„ç†</li><li>deltaTime æ—¶é—´å·®</li><li>å¸§ç‡æ— å…³çš„åŠ¨ç”»</li></ul></li><li><p>9.4 ç¼“åŠ¨å‡½æ•°</p><ul><li>çº¿æ€§ç¼“åŠ¨</li><li>ease-inï¼ˆåŠ é€Ÿï¼‰</li><li>ease-outï¼ˆå‡é€Ÿï¼‰</li><li>ease-in-outï¼ˆå…ˆåŠ é€Ÿåå‡é€Ÿï¼‰</li><li>è´å¡å°”ç¼“åŠ¨æ›²çº¿</li><li>å¼¹æ€§ç¼“åŠ¨</li></ul><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¸¸ç”¨ç¼“åŠ¨å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> easing</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    linear</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    easeInQuad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    easeOutQuad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    easeInOutQuad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    easeInCubic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    easeOutCubic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">t) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>9.5 ç‰©ç†åŠ¨ç”»</p><ul><li>é€Ÿåº¦ä¸åŠ é€Ÿåº¦</li><li>é‡åŠ›æ¨¡æ‹Ÿ</li><li>å¼¹æ€§æ•ˆæœ</li><li>æ‘©æ“¦åŠ›</li><li>ç¢°æ’åå¼¹</li></ul></li><li><p>9.6 ç²’å­ç³»ç»Ÿ</p><ul><li>ç²’å­å±æ€§ï¼ˆä½ç½®ã€é€Ÿåº¦ã€ç”Ÿå‘½å‘¨æœŸã€é¢œè‰²ã€å¤§å°ï¼‰</li><li>ç²’å­å‘å°„å™¨</li><li>ç²’å­æ›´æ–°ä¸æ¸²æŸ“</li><li>ç²’å­æ± ä¼˜åŒ–</li><li>å¸¸è§ç²’å­æ•ˆæœï¼ˆçƒŸèŠ±ã€ç«ç„°ã€é›ªèŠ±ï¼‰</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šæŒæ¡åŠ¨ç”»åŸç†å’Œå®ç°æŠ€æœ¯</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åŸºç¡€åŠ¨ç”»å¾ªç¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lastTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> animate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">currentTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> deltaTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lastTime;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    lastTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentTime;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ¸…é™¤ç”»å¸ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clearRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, canvas.width, canvas.height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // æ›´æ–°çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(deltaTime);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ç»˜åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(animate);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç²’å­ç±»</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Particle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.life </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.decay </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.01</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.02</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vx;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vy;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é‡åŠ›</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.life </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.decay;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ctx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx.globalAlpha </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.life;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><hr><h2 id="ğŸ“–-ç¬¬äº”éƒ¨åˆ†-æ€§èƒ½ä¸å®æˆ˜ç¯‡" tabindex="-1">ğŸ“– ç¬¬äº”éƒ¨åˆ†ï¼šæ€§èƒ½ä¸å®æˆ˜ç¯‡ <a class="header-anchor" href="#ğŸ“–-ç¬¬äº”éƒ¨åˆ†-æ€§èƒ½ä¸å®æˆ˜ç¯‡" aria-label="Permalink to &quot;ğŸ“– ç¬¬äº”éƒ¨åˆ†ï¼šæ€§èƒ½ä¸å®æˆ˜ç¯‡&quot;">â€‹</a></h2><h3 id="ç¬¬10ç« -ç¦»å±æ¸²æŸ“ä¸æ€§èƒ½ä¼˜åŒ–" tabindex="-1">ç¬¬10ç« ï¼šç¦»å±æ¸²æŸ“ä¸æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#ç¬¬10ç« -ç¦»å±æ¸²æŸ“ä¸æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;ç¬¬10ç« ï¼šç¦»å±æ¸²æŸ“ä¸æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ä¼˜åŒ– Canvas æ¸²æŸ“æ€§èƒ½ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>10.1 ç¦»å± Canvas</p><ul><li>åˆ›å»ºç¦»å± Canvas</li><li>ç¦»å±æ¸²æŸ“çš„ç”¨é€”</li><li>åŒç¼“å†²æŠ€æœ¯</li><li>é¢„æ¸²æŸ“é™æ€å†…å®¹</li></ul></li><li><p>10.2 OffscreenCanvas</p><ul><li><code>OffscreenCanvas</code> æ„é€ å‡½æ•°</li><li>Web Worker ä¸­ä½¿ç”¨ Canvas</li><li><code>transferControlToOffscreen()</code> æ–¹æ³•</li><li>ä¸»çº¿ç¨‹ä¸ Worker é€šä¿¡</li><li>æ€§èƒ½æå‡åœºæ™¯</li></ul></li><li><p>10.3 è„çŸ©å½¢ä¼˜åŒ–</p><ul><li>è„çŸ©å½¢æ¦‚å¿µ</li><li>è„åŒºåŸŸè®¡ç®—</li><li>å±€éƒ¨é‡ç»˜å®ç°</li><li>è„çŸ©å½¢åˆå¹¶ç­–ç•¥</li></ul></li><li><p>10.4 å›¾å±‚åˆ†ç¦»</p><ul><li>å¤š Canvas å åŠ æŠ€æœ¯</li><li>é™æ€å±‚ä¸åŠ¨æ€å±‚åˆ†ç¦»</li><li>èƒŒæ™¯å±‚ã€å†…å®¹å±‚ã€UI å±‚</li><li>å›¾å±‚ç®¡ç†ç­–ç•¥</li></ul></li><li><p>10.5 ç¼“å­˜ç­–ç•¥</p><ul><li>å¤æ‚å›¾å½¢ç¼“å­˜</li><li>ç¼“å­˜å¤±æ•ˆåˆ¤æ–­</li><li>ç¼“å­˜å¤§å°æ§åˆ¶</li><li>ç¼“å­˜æ›´æ–°ç­–ç•¥</li></ul></li><li><p>10.6 æ€§èƒ½ç›‘æµ‹ä¸è°ƒä¼˜</p><ul><li>FPS è®¡ç®—ä¸æ˜¾ç¤º</li><li>Chrome DevTools Performance é¢æ¿</li><li>å†…å­˜ç›‘æµ‹</li><li>å¸¸è§æ€§èƒ½ç“¶é¢ˆ</li><li>æ€§èƒ½æ£€æŸ¥æ¸…å•</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šæŒæ¡ Canvas æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¦»å± Canvas é¢„æ¸²æŸ“</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> offscreen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">offscreen.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">offscreen.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> offCtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> offscreen.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é¢„æ¸²æŸ“å¤æ‚å›¾å½¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">offCtx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">offCtx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">offCtx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸» Canvas ä¸­ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawImage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(offscreen, x, y);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// OffscreenCanvas in Worker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// main.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> offscreen</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">transferControlToOffscreen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;worker.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ canvas: offscreen }, [offscreen]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// worker.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">self.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.data.canvas;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åœ¨ Worker ä¸­ç»‘åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><hr><h3 id="ç¬¬11ç« -å®æˆ˜æ¡ˆä¾‹ä¸æœ€ä½³å®è·µ" tabindex="-1">ç¬¬11ç« ï¼šå®æˆ˜æ¡ˆä¾‹ä¸æœ€ä½³å®è·µ <a class="header-anchor" href="#ç¬¬11ç« -å®æˆ˜æ¡ˆä¾‹ä¸æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ç¬¬11ç« ï¼šå®æˆ˜æ¡ˆä¾‹ä¸æœ€ä½³å®è·µ&quot;">â€‹</a></h3><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šå¦‚ä½•ç»¼åˆè¿ç”¨ Canvas æŠ€æœ¯å¼€å‘å®é™…åº”ç”¨ï¼Ÿ</p><p><strong>å†…å®¹è¦ç‚¹</strong>ï¼š</p><ul><li><p>11.1 ç”»æ¿åº”ç”¨</p><ul><li>ç”»æ¿æ¶æ„è®¾è®¡</li><li>è‡ªç”±ç»‘åˆ¶å®ç°</li><li>ç¬”åˆ·æ•ˆæœï¼ˆé“…ç¬”ã€æ¯›ç¬”ã€å–·æªï¼‰</li><li>æ’¤é”€/é‡åšåŠŸèƒ½</li><li>å›¾å±‚ç³»ç»Ÿ</li><li>å¯¼å‡ºå›¾ç‰‡</li></ul></li><li><p>11.2 å›¾è¡¨ç»˜åˆ¶</p><ul><li>æŸ±çŠ¶å›¾å®ç°</li><li>æŠ˜çº¿å›¾å®ç°</li><li>é¥¼å›¾/ç¯å½¢å›¾å®ç°</li><li>åæ ‡è½´ä¸åˆ»åº¦</li><li>æ•°æ®æ ‡ç­¾</li><li>åŠ¨ç”»æ•ˆæœ</li><li>äº¤äº’åŠŸèƒ½ï¼ˆæ‚¬åœã€ç‚¹å‡»ï¼‰</li></ul></li><li><p>11.3 æ¸¸æˆå¼€å‘åŸºç¡€</p><ul><li>æ¸¸æˆå¾ªç¯</li><li>ç²¾çµï¼ˆSpriteï¼‰ç³»ç»Ÿ</li><li>ç¢°æ’æ£€æµ‹</li><li>é”®ç›˜/é¼ æ ‡è¾“å…¥</li><li>éŸ³æ•ˆç®¡ç†</li><li>ç®€å•æ¸¸æˆæ¡ˆä¾‹</li></ul></li><li><p>11.4 å›¾åƒç¼–è¾‘å™¨</p><ul><li>å›¾åƒåŠ è½½ä¸æ˜¾ç¤º</li><li>è£å‰ªåŠŸèƒ½</li><li>æ»¤é•œæ•ˆæœ</li><li>å›¾å±‚åˆæˆ</li><li>å†å²è®°å½•</li><li>å¯¼å‡ºåŠŸèƒ½</li></ul></li><li><p>11.5 æ•°æ®å¯è§†åŒ–</p><ul><li>å¤§æ•°æ®æ¸²æŸ“ç­–ç•¥</li><li>çƒ­åŠ›å›¾å®ç°</li><li>åŠ›å¯¼å‘å›¾</li><li>åœ°å›¾å¯è§†åŒ–</li><li>å®æ—¶æ•°æ®æ›´æ–°</li></ul></li><li><p>11.6 æœ€ä½³å®è·µæ€»ç»“</p><ul><li>ä»£ç ç»„ç»‡æ¨¡å¼</li><li>æ¨¡å—åŒ–è®¾è®¡</li><li>å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</li><li>æ€§èƒ½æ£€æŸ¥æ¸…å•</li><li>è°ƒè¯•æŠ€å·§</li><li>å­¦ä¹ èµ„æºæ¨è</li></ul></li></ul><p><strong>å­¦ä¹ ç›®æ ‡</strong>ï¼šé€šè¿‡å®æˆ˜æ¡ˆä¾‹å·©å›º Canvas æŠ€æœ¯</p><p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç®€æ˜“ç”»æ¿</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DrawingBoard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.canvas </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isDrawing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bindEvents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    bindEvents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mousedown&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isDrawing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastX, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastY] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [e.offsetX, e.offsetY];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mousemove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isDrawing) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moveTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastX, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastY);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lineTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.offsetX, e.offsetY);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stroke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastX, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.lastY] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [e.offsetX, e.offsetY];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mouseup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.isDrawing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><hr><h2 id="ğŸ“Š-å­¦ä¹ è·¯çº¿å›¾" tabindex="-1">ğŸ“Š å­¦ä¹ è·¯çº¿å›¾ <a class="header-anchor" href="#ğŸ“Š-å­¦ä¹ è·¯çº¿å›¾" aria-label="Permalink to &quot;ğŸ“Š å­¦ä¹ è·¯çº¿å›¾&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚                        Canvas 2D å­¦ä¹ è·¯çº¿                            â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                  â”‚</span></span>
<span class="line"><span>        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>        â”‚                         â”‚                         â”‚</span></span>
<span class="line"><span>        â–¼                         â–¼                         â–¼</span></span>
<span class="line"><span>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>   â”‚ ç¬¬1-3ç«  â”‚             â”‚ ç¬¬4-7ç«  â”‚             â”‚ ç¬¬8-11ç« â”‚</span></span>
<span class="line"><span>   â”‚ åŸºç¡€å…¥é—¨â”‚             â”‚ æ ·å¼å›¾åƒâ”‚             â”‚ åŠ¨ç”»å®æˆ˜â”‚</span></span>
<span class="line"><span>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>        â”‚                         â”‚                         â”‚</span></span>
<span class="line"><span>        â–¼                         â–¼                         â–¼</span></span>
<span class="line"><span>   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>   â”‚åˆ›å»ºCanvasâ”‚            â”‚é¢œè‰²æ¸å˜ â”‚             â”‚åŠ¨ç”»å¾ªç¯ â”‚</span></span>
<span class="line"><span>   â”‚åŸºç¡€å›¾å½¢ â”‚             â”‚å˜æ¢çŸ©é˜µ â”‚             â”‚æ€§èƒ½ä¼˜åŒ– â”‚</span></span>
<span class="line"><span>   â”‚è·¯å¾„æ›²çº¿ â”‚             â”‚åƒç´ æ“ä½œ â”‚             â”‚å®æˆ˜é¡¹ç›® â”‚</span></span>
<span class="line"><span>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>        â”‚                         â”‚                         â”‚</span></span>
<span class="line"><span>        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span>                                  â”‚</span></span>
<span class="line"><span>                                  â–¼</span></span>
<span class="line"><span>                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>                        â”‚  è¿›é˜¶ï¼šWebGL    â”‚</span></span>
<span class="line"><span>                        â”‚  è¿›é˜¶ï¼šPixiJS   â”‚</span></span>
<span class="line"><span>                        â”‚  è¿›é˜¶ï¼šæ— é™ç”»å¸ƒ  â”‚</span></span>
<span class="line"><span>                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr><h2 id="ğŸ“š-å‚è€ƒèµ„æº" tabindex="-1">ğŸ“š å‚è€ƒèµ„æº <a class="header-anchor" href="#ğŸ“š-å‚è€ƒèµ„æº" aria-label="Permalink to &quot;ğŸ“š å‚è€ƒèµ„æº&quot;">â€‹</a></h2><h3 id="å®˜æ–¹æ–‡æ¡£" tabindex="-1">å®˜æ–¹æ–‡æ¡£ <a class="header-anchor" href="#å®˜æ–¹æ–‡æ¡£" aria-label="Permalink to &quot;å®˜æ–¹æ–‡æ¡£&quot;">â€‹</a></h3><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial" target="_blank" rel="noreferrer">MDN Canvas æ•™ç¨‹</a></li><li><a href="https://www.w3.org/TR/2dcontext/" target="_blank" rel="noreferrer">W3C Canvas 2D Context è§„èŒƒ</a></li><li><a href="https://html.spec.whatwg.org/multipage/canvas.html" target="_blank" rel="noreferrer">WHATWG Canvas è§„èŒƒ</a></li></ul><h3 id="æ¨èä¹¦ç±" tabindex="-1">æ¨èä¹¦ç± <a class="header-anchor" href="#æ¨èä¹¦ç±" aria-label="Permalink to &quot;æ¨èä¹¦ç±&quot;">â€‹</a></h3><ul><li>ã€ŠHTML5 Canvas æ ¸å¿ƒæŠ€æœ¯ã€‹ - David Geary</li><li>ã€ŠCanvas é«˜çº§ç¼–ç¨‹ã€‹ - Rob Hawkes</li></ul><h3 id="åœ¨çº¿å·¥å…·" tabindex="-1">åœ¨çº¿å·¥å…· <a class="header-anchor" href="#åœ¨çº¿å·¥å…·" aria-label="Permalink to &quot;åœ¨çº¿å·¥å…·&quot;">â€‹</a></h3><ul><li><a href="https://simon.html5.org/dump/html5-canvas-cheat-sheet.html" target="_blank" rel="noreferrer">Canvas Cheat Sheet</a></li><li><a href="https://www.desmos.com/calculator" target="_blank" rel="noreferrer">Desmos å›¾å½¢è®¡ç®—å™¨</a></li></ul><hr><h2 id="ğŸ“-ç¼–å†™çŠ¶æ€" tabindex="-1">ğŸ“ ç¼–å†™çŠ¶æ€ <a class="header-anchor" href="#ğŸ“-ç¼–å†™çŠ¶æ€" aria-label="Permalink to &quot;ğŸ“ ç¼–å†™çŠ¶æ€&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç« èŠ‚</th><th>çŠ¶æ€</th><th>é¢„è®¡è¡Œæ•°</th></tr></thead><tbody><tr><td>00 - æ•™å­¦å¤§çº²ä¸ç›®å½•</td><td>âœ… å®Œæˆ</td><td>~800</td></tr><tr><td>01 - Canvaså…ƒç´ ä¸ç»‘åˆ¶ç¯å¢ƒ</td><td>â³ å¾…ç¼–å†™</td><td>~1,000</td></tr><tr><td>02 - åŸºç¡€å›¾å½¢ç»˜åˆ¶</td><td>â³ å¾…ç¼–å†™</td><td>~1,000</td></tr><tr><td>03 - è·¯å¾„ä¸è´å¡å°”æ›²çº¿</td><td>â³ å¾…ç¼–å†™</td><td>~1,200</td></tr><tr><td>04 - æ ·å¼ä¸é¢œè‰²ç³»ç»Ÿ</td><td>â³ å¾…ç¼–å†™</td><td>~1,000</td></tr><tr><td>05 - å˜æ¢ä¸åæ ‡ç³»ç»Ÿ</td><td>â³ å¾…ç¼–å†™</td><td>~1,200</td></tr><tr><td>06 - å›¾åƒä¸åƒç´ æ“ä½œ</td><td>â³ å¾…ç¼–å†™</td><td>~1,200</td></tr><tr><td>07 - åˆæˆä¸æ··åˆæ¨¡å¼</td><td>â³ å¾…ç¼–å†™</td><td>~1,000</td></tr><tr><td>08 - æ–‡æœ¬æ¸²æŸ“</td><td>â³ å¾…ç¼–å†™</td><td>~900</td></tr><tr><td>09 - åŠ¨ç”»ä¸å¸§å¾ªç¯</td><td>â³ å¾…ç¼–å†™</td><td>~1,200</td></tr><tr><td>10 - ç¦»å±æ¸²æŸ“ä¸æ€§èƒ½ä¼˜åŒ–</td><td>â³ å¾…ç¼–å†™</td><td>~1,100</td></tr><tr><td>11 - å®æˆ˜æ¡ˆä¾‹ä¸æœ€ä½³å®è·µ</td><td>â³ å¾…ç¼–å†™</td><td>~1,200</td></tr></tbody></table><hr><p><strong>æ–‡æ¡£ç‰ˆæœ¬</strong>ï¼šv1.0<br><strong>åˆ›å»ºæ—¥æœŸ</strong>ï¼š2026-01-28<br><strong>ç³»åˆ—å®šä½</strong>ï¼šWeb 2D å›¾å½¢ç»˜åˆ¶å…¥é—¨æ•™ç¨‹</p>`,118)]))}const y=i(p,[["render",h]]);export{g as __pageData,y as default};

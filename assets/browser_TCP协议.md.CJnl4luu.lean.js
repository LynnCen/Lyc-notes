import{_ as A,C as d,c as p,o as s,a8 as a,b as t,j as c,w as n,a as o,G as i,a9 as l}from"./chunks/framework.DfyYcdQv.js";const _=JSON.parse('{"title":"详解 TCP 协议 (Transmission Control Protocol) 🌐","description":"","frontmatter":{},"headers":[],"relativePath":"browser/TCP协议.md","filePath":"browser/TCP协议.md","lastUpdated":1743496729000}'),g={name:"browser/TCP协议.md"};function C(S,e,m,u,T,b){const r=d("Mermaid");return s(),p("div",null,[e[7]||(e[7]=a("",10)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-76",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Client%0A%20%20%20%20participant%20Server%0A%0A%20%20%20%20Client-%3E%3EServer%3A%20SYN%20(Seq%3Dclient_isn)%0A%20%20%20%20Note%20right%20of%20Server%3A%20Server%20enters%20SYN_RCVD%20state%0A%20%20%20%20Server-%3E%3EClient%3A%20SYN%2BACK%20(Seq%3Dserver_isn%2C%20Ack%3Dclient_isn%20%2B%201)%0A%20%20%20%20Note%20left%20of%20Client%3A%20Client%20enters%20ESTABLISHED%20state%0A%20%20%20%20Client-%3E%3EServer%3A%20ACK%20(Seq%3Dclient_isn%20%2B%201%2C%20Ack%3Dserver_isn%20%2B%201)%0A%20%20%20%20Note%20right%20of%20Server%3A%20Server%20enters%20ESTABLISHED%20state%0A"})]),fallback:n(()=>e[0]||(e[0]=[o(" Loading... ",-1)])),_:1})),e[8]||(e[8]=a("",9)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-194",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Sender%0A%20%20%20%20participant%20Receiver%0A%0A%20%20%20%20Note%20over%20Sender%2CReceiver%3A%20Sending%20%22Hello%2C%20World!%22%20(Seq%20starts%20at%201000)%0A%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%201%20(Seq%3D1000%2C%20Data%3D%22Hello%2C%20%22)%0A%20%20%20%20Note%20over%20Receiver%3A%20Segment%201%20received%20correctly.%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D1007)%20%20%2F%2F%20Confirms%20bytes%20up%20to%201006%2C%20expects%201007%20next.%0A%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%202%20(Seq%3D1007%2C%20Data%3D%22World!%22)%0A%20%20%20%20Note%20over%20Receiver%3A%20Segment%202%20received%20correctly.%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D1013)%20%20%2F%2F%20Confirms%20bytes%20up%20to%201012%2C%20expects%201013%20next.%0A"})]),fallback:n(()=>e[1]||(e[1]=[o(" Loading... ",-1)])),_:1})),e[9]||(e[9]=a("",4)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-241",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Sender%0A%20%20%20%20participant%20Receiver%0A%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%20(Seq%3DN%2C%20Data%3D...)%0A%20%20%20%20activate%20Sender%0A%20%20%20%20Note%20right%20of%20Sender%3A%20Start%20Retransmission%20Timer%20(RTO)%20for%20Seq%3DN%0A%20%20%20%20deactivate%20Sender%0A%0A%20%20%20%20Note%20over%20Sender%2CReceiver%3A%20Segment%20(Seq%3DN)%20or%20its%20ACK%20is%20lost...%0A%0A%20%20%20%20loop%20Wait%20for%20RTO%0A%20%20%20%20%20%20%20%20critical%20Timer%20Expires%0A%20%20%20%20%20%20%20%20%20%20%20%20Note%20right%20of%20Sender%3A%20RTO%20timer%20for%20Seq%3DN%20expired!%0A%20%20%20%20%20%20%20%20%20%20%20%20Sender-%3E%3EReceiver%3A%20**Retransmit**%20Segment%20(Seq%3DN%2C%20Data%3D...)%0A%20%20%20%20%20%20%20%20%20%20%20%20activate%20Sender%0A%20%20%20%20%20%20%20%20%20%20%20%20Note%20right%20of%20Sender%3A%20Restart%20Timer%20(RTO%2C%20likely%20longer)%20for%20Seq%3DN%0A%20%20%20%20%20%20%20%20%20%20%20%20deactivate%20Sender%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20end%0A%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3DN%20%2B%20length)%20%2F%2F%20Assuming%20retransmitted%20segment%20arrives%0A%20%20%20%20activate%20Sender%0A%20%20%20%20Note%20right%20of%20Sender%3A%20Received%20ACK%20for%20Seq%3DN.%20Cancel%20Timer.%0A%20%20%20%20deactivate%20Sender%0A%0A"})]),fallback:n(()=>e[2]||(e[2]=[o(" Loading... ",-1)])),_:1})),e[10]||(e[10]=a("",4)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-278",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Sender%0A%20%20%20%20participant%20Receiver%0A%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%201%20(Seq%3D100)%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%202%20(Seq%3D200)%20--%20Lost%20X%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%203%20(Seq%3D300)%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Segment%204%20(Seq%3D400)%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Receives%20Segment%201%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D200)%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Receives%20Segment%203%20(out%20of%20order)%0A%20%20%20%20Receiver-%3E%3ESender%3A%20**Duplicate%20ACK**%20(Ack%3D200)%20%2F%2F%20Still%20needs%20Seq%3D200%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Receives%20Segment%204%20(out%20of%20order)%0A%20%20%20%20Receiver-%3E%3ESender%3A%20**Duplicate%20ACK**%20(Ack%3D200)%20%2F%2F%20Still%20needs%20Seq%3D200%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Receives%20another%20segment%20(e.g.%205)%20or%20internal%20event%0A%20%20%20%20Receiver-%3E%3ESender%3A%20**Duplicate%20ACK**%20(Ack%3D200)%20%2F%2F%203rd%20Duplicate%20ACK!%0A%0A%20%20%20%20Note%20over%20Sender%3A%20Receives%203rd%20Duplicate%20ACK%20for%20200%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20**Fast%20Retransmit**%20Segment%202%20(Seq%3D200)%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Receives%20missing%20Segment%202%2C%20buffers%203%20%26%204%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D500)%20%2F%2F%20Cumulative%20ACK%20for%20Segments%201%2C%202%2C%203%2C%204%0A"})]),fallback:n(()=>e[3]||(e[3]=[o(" Loading... ",-1)])),_:1})),e[11]||(e[11]=a("",4)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-320",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Sender%0A%20%20%20%20participant%20Receiver%0A%0A%20%20%20%20Note%20over%20Sender%2CReceiver%3A%20Initial%20Receiver%20Window%20(rwnd)%20%3D%203000%20bytes%0A%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Data%20(1000%20bytes%2C%20Seq%3D1)%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Data%20(1000%20bytes%2C%20Seq%3D1001)%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Data%20(1000%20bytes%2C%20Seq%3D2001)%0A%20%20%20%20Note%20left%20of%20Sender%3A%20Sent%203000%20bytes.%20Reached%20Receiver's%20advertised%20window.%20Stop%20sending.%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Processes%20first%201000%20bytes%20(1-1000).%20Buffer%20space%20increases.%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D1001%2C%20Window%3D2000)%20%2F%2F%20Confirms%20data%2C%20Updates%20window%20size%0A%0A%20%20%20%20Note%20left%20of%20Sender%3A%20Received%20ACK%3D1001.%20Effective%20Window%20%3D%201001%20%2B%202000%20%3D%203001.%20Highest%20byte%20sent%20%3D%203000.%20Still%20cannot%20send%20more.%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Processes%20next%201000%20bytes%20(1001-2000).%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D2001%2C%20Window%3D2000)%0A%0A%20%20%20%20Note%20left%20of%20Sender%3A%20Received%20ACK%3D2001.%20Effective%20Window%20%3D%202001%20%2B%202000%20%3D%204001.%20Highest%20byte%20sent%20%3D%203000.%20Can%20send%201001%20bytes.%0A%20%20%20%20Sender-%3E%3EReceiver%3A%20Data%20(1000%20bytes%2C%20Seq%3D3001)%20%2F%2F%20Sends%20more%20data%20as%20window%20allows%0A%0A%20%20%20%20Note%20over%20Receiver%3A%20Processes%20next%201000%20bytes%20(2001-3000).%20More%20buffer%20frees%20up.%0A%20%20%20%20Receiver-%3E%3ESender%3A%20ACK%20(Ack%3D3001%2C%20Window%3D3000)%20%2F%2F%20Window%20opens%20up%20further%0A%0A"})]),fallback:n(()=>e[4]||(e[4]=[o(" Loading... ",-1)])),_:1})),e[12]||(e[12]=a("",4)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-401",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20Start(%5B%E8%BF%9E%E6%8E%A5%E5%BC%80%E5%A7%8B%5D)%20--%3E%20SS%0A%20%20%20%20%0A%20%20%20%20SS%5B%22%E6%85%A2%E5%90%AF%E5%8A%A8%20(Slow%20Start)%3Cbr%3Ecwnd%20%3D%201MSS%3Cbr%3E%E6%8C%87%E6%95%B0%E5%A2%9E%E9%95%BF%3A%20%E6%AF%8FACK%2C%20cwnd%20%2B%3D%201MSS%22%5D%20--%3E%7C%22cwnd%E2%89%A5%20ssthresh%22%7C%20CA%0A%20%20%20%20SS%20--%3E%7C%22%E8%B6%85%E6%97%B6%22%7C%20TO%0A%20%20%20%20SS%20--%3E%7C%223%E4%B8%AA%E9%87%8D%E5%A4%8DACK%22%7C%20FR%0A%20%20%20%20%0A%20%20%20%20CA%5B%22%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D%20(Congestion%20Avoidance)%3Cbr%3E%E7%BA%BF%E6%80%A7%E5%A2%9E%E9%95%BF%3A%20%E6%AF%8FRTT%2C%20cwnd%20%2B%3D%201MSS%22%5D%20--%3E%7C%22%E8%B6%85%E6%97%B6%22%7C%20TO%0A%20%20%20%20CA%20--%3E%7C%223%E4%B8%AA%E9%87%8D%E5%A4%8DACK%22%7C%20FR%0A%20%20%20%20%0A%20%20%20%20TO%5B%22%E8%B6%85%E6%97%B6%E5%A4%84%E7%90%86%3Cbr%3Essthresh%20%3D%20cwnd%2F2%3Cbr%3Ecwnd%20%3D1MSS%22%5D%20--%3E%20SSFR%5B%22%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D(Fast%20Recovery)%3Cbr%3Essthresh%20%3D%20cwnd%2F2%3Cbr%3Ecwnd%20%3D%20cwnd%2F2%22%5D%20--%3E%20CA%0A%20%20%20%20%0A%20%20%20%20classDef%20default%20fill%3A%23f9f9f9%2Cstroke%3A%23333%2Cstroke-width%3A1px%0A%20%20%20%20classDef%20state%20fill%3A%23b5e48c%2Cstroke%3A%23333%0A%20%20%20%20classDef%20event%20fill%3A%23f8ad9d%2Cstroke%3A%23333%0A%20%20%20%20%0A%20%20%20%20class%20SS%2CCA%20state%0A%20%20%20%20class%20TO%2CFR%20event%0A%0A"})]),fallback:n(()=>e[5]||(e[5]=[o(" Loading... ",-1)])),_:1})),e[13]||(e[13]=a("",9)),(s(),t(l,null,{default:n(()=>[i(r,{id:"mermaid-488",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20A%20(Initiator)%0A%20%20%20%20participant%20B%0A%0A%20%20%20%20Note%20over%20A%2CB%3A%20Data%20transfer%20is%20complete.%20A%20initiates%20close.%0A%0A%20%20%20%20A-%3E%3EB%3A%20FIN%20(Seq%3Du)%0A%20%20%20%20Note%20left%20of%20A%3A%20A%20enters%20FIN_WAIT_1%0A%20%20%20%20Note%20right%20of%20B%3A%20B%20receives%20FIN%2C%20enters%20CLOSE_WAIT%0A%20%20%20%20B-%3E%3EA%3A%20ACK%20(Ack%3Du%2B1)%0A%20%20%20%20Note%20left%20of%20A%3A%20A%20receives%20ACK%2C%20enters%20FIN_WAIT_2%0A%0A%20%20%20%20Note%20over%20B%3A%20B%20finishes%20any%20remaining%20data%20transmission...%0A%20%20%20%20Note%20over%20B%3A%20B%20is%20ready%20to%20close.%0A%20%20%20%20B-%3E%3EA%3A%20FIN%20(Seq%3Dv)%0A%20%20%20%20Note%20right%20of%20B%3A%20B%20enters%20LAST_ACK%0A%20%20%20%20Note%20left%20of%20A%3A%20A%20receives%20FIN%2C%20enters%20TIME_WAIT%0A%20%20%20%20A-%3E%3EB%3A%20ACK%20(Ack%3Dv%2B1)%0A%20%20%20%20Note%20right%20of%20B%3A%20B%20receives%20ACK%2C%20enters%20CLOSED%0A%20%20%20%20Note%20left%20of%20A%3A%20A%20waits%20for%202*MSL%20in%20TIME_WAIT%20state%2C%20then%20enters%20CLOSED%0A%0A"})]),fallback:n(()=>e[6]||(e[6]=[o(" Loading... ",-1)])),_:1})),e[14]||(e[14]=c("hr",null,null,-1)),e[15]||(e[15]=c("p",null,[c("strong",null,"总结:")],-1)),e[16]||(e[16]=c("p",null,"TCP 是一个复杂但极其重要的协议。它通过三次握手建立连接，使用序列号和确认号进行数据排序和确认，通过超时重传和快速重传处理丢包，利用滑动窗口进行流量控制，并通过慢启动、拥塞避免、快速恢复等机制进行拥塞控制，最后通过四次挥手断开连接。所有这些机制协同工作，使得应用程序开发者可以在不可靠的 IP 网络上构建可靠的应用，而不必亲自处理网络传输中的各种复杂问题。在实际应用中，TCP 的性能和行为（如速度波动、连接延迟）直接受到这些内部机制以及当前网络状况的影响。",-1))])}const v=A(g,[["render",C]]);export{_ as __pageData,v as default};

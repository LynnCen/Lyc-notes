import{_ as a,c as n,o as i,a7 as l}from"./chunks/framework.BQb8NfN9.js";const e="/Lyc-notes/assets/image2023-3-30_11-18-35.X3EJkGz_.png",t="/Lyc-notes/assets/image2023-3-15_14-25-0.CIg8XG3g.png",p="/Lyc-notes/assets/image2023-3-15_15-14-30.4mDC2Zxr.png",r="/Lyc-notes/assets/image2023-2-23_14-33-27.BGrqjBiJ.png",E=JSON.parse('{"title":"前端可生长架构设计（RFC 0）","description":"","frontmatter":{},"headers":[],"relativePath":"work/gd/前端基础架构/前端可生长架构设计.md","filePath":"work/gd/前端基础架构/前端可生长架构设计.md","lastUpdated":1770085732000}'),h={name:"work/gd/前端基础架构/前端可生长架构设计.md"};function d(o,s,k,c,b,g){return i(),n("div",null,s[0]||(s[0]=[l('<h1 id="前端可生长架构设计-rfc-0" tabindex="-1">前端可生长架构设计（RFC 0） <a class="header-anchor" href="#前端可生长架构设计-rfc-0" aria-label="Permalink to &quot;前端可生长架构设计（RFC 0）&quot;">​</a></h1><h2 id="一、架构概述" tabindex="-1">一、架构概述 <a class="header-anchor" href="#一、架构概述" aria-label="Permalink to &quot;一、架构概述&quot;">​</a></h2><h3 id="_1-1-定义" tabindex="-1">1.1 定义 <a class="header-anchor" href="#_1-1-定义" aria-label="Permalink to &quot;1.1 定义&quot;">​</a></h3><p>稿定前端可生长的架构是<strong>微前端架构的一种实现</strong>，它属于通用基础架构，旨在构建一个可持续发展、技术栈无关、易于扩展的前端生态系统。</p><h3 id="_1-2-核心理念" tabindex="-1">1.2 核心理念 <a class="header-anchor" href="#_1-2-核心理念" aria-label="Permalink to &quot;1.2 核心理念&quot;">​</a></h3><blockquote><p>💡 <strong>设计哲学</strong><br> 尊重 Web 标准与公共平台，最大程度避免造私有标准与平台</p></blockquote><hr><h2 id="二、设计动机" tabindex="-1">二、设计动机 <a class="header-anchor" href="#二、设计动机" aria-label="Permalink to &quot;二、设计动机&quot;">​</a></h2><h3 id="_2-1-核心原则" tabindex="-1">2.1 核心原则 <a class="header-anchor" href="#_2-1-核心原则" aria-label="Permalink to &quot;2.1 核心原则&quot;">​</a></h3><ol><li><p><strong>尊重 Web 标准与公共平台</strong><br> 最大程度避免造私有标准与平台</p></li><li><p><strong>避免技术栈污染</strong><br> 最大程度避免上游技术栈污染下游</p></li><li><p><strong>减少构建依赖</strong><br> 最大程度减少构建，提高开发效率</p></li><li><p><strong>技术栈适应性</strong><br> 重视外部不同技术栈的适应性</p></li><li><p><strong>抽象层次提升</strong><br> 持续提高 ProCode 抽象层次，最终与 NoCode 模式融合</p></li></ol><hr><h2 id="三、整体架构" tabindex="-1">三、整体架构 <a class="header-anchor" href="#三、整体架构" aria-label="Permalink to &quot;三、整体架构&quot;">​</a></h2><h3 id="_3-1-架构全景图" tabindex="-1">3.1 架构全景图 <a class="header-anchor" href="#_3-1-架构全景图" aria-label="Permalink to &quot;3.1 架构全景图&quot;">​</a></h3><p><img src="'+e+`" alt=""></p><h3 id="_3-2-架构分层" tabindex="-1">3.2 架构分层 <a class="header-anchor" href="#_3-2-架构分层" aria-label="Permalink to &quot;3.2 架构分层&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                    应用层                            │</span></span>
<span class="line"><span>│  ┌──────────┐  ┌──────────┐  ┌──────────┐          │</span></span>
<span class="line"><span>│  │  页面    │  │  挂件    │  │  组件    │          │</span></span>
<span class="line"><span>│  └──────────┘  └──────────┘  └──────────┘          │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                        ↓</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                  集成层                              │</span></span>
<span class="line"><span>│  ┌─────────────┐  ┌────────────┐  ┌──────────┐    │</span></span>
<span class="line"><span>│  │ Importmap   │  │   挂件容器  │  │  Iliad   │    │</span></span>
<span class="line"><span>│  └─────────────┘  └────────────┘  └──────────┘    │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                        ↓</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                  工具链层                            │</span></span>
<span class="line"><span>│  ┌───────┐  ┌──────────┐  ┌─────┐  ┌──────────┐   │</span></span>
<span class="line"><span>│  │ Pnpm  │  │ Turborepo│  │ Wpm │  │ ESM CDN  │   │</span></span>
<span class="line"><span>│  └───────┘  └──────────┘  └─────┘  └──────────┘   │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                        ↓</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                  基础设施层                          │</span></span>
<span class="line"><span>│  ┌──────────────┐  ┌─────────────┐                 │</span></span>
<span class="line"><span>│  │  Monorepo    │  │   DevOps    │                 │</span></span>
<span class="line"><span>│  └──────────────┘  └─────────────┘                 │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><hr><h2 id="四、基础设施层" tabindex="-1">四、基础设施层 <a class="header-anchor" href="#四、基础设施层" aria-label="Permalink to &quot;四、基础设施层&quot;">​</a></h2><h3 id="_4-1-单体仓库-monorepos" tabindex="-1">4.1 单体仓库（Monorepos） <a class="header-anchor" href="#_4-1-单体仓库-monorepos" aria-label="Permalink to &quot;4.1 单体仓库（Monorepos）&quot;">​</a></h3><h4 id="定义" tabindex="-1">定义 <a class="header-anchor" href="#定义" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p><img src="`+t+'" alt=""></p><p>前端工程的基础设施基于<strong>单体仓库</strong>，即一个仓库中包含多个项目（或页面入口），以<strong>包颗粒度</strong>进行独立发布与部署。</p><h4 id="核心优势" tabindex="-1">核心优势 <a class="header-anchor" href="#核心优势" aria-label="Permalink to &quot;核心优势&quot;">​</a></h4><table tabindex="0"><thead><tr><th>优势</th><th>说明</th></tr></thead><tbody><tr><td><strong>可见性</strong></td><td>每个人都可以看到其他人的代码，带来更好的协作和跨团队贡献</td></tr><tr><td><strong>简化依赖管理</strong></td><td>共享依赖关系简单，所有模块托管在同一存储库中</td></tr><tr><td><strong>唯一依赖源</strong></td><td>每个依赖只有一个版本，避免版本冲突和依赖地狱</td></tr><tr><td><strong>一致性</strong></td><td>更容易执行代码质量标准和统一风格</td></tr><tr><td><strong>共享时间线</strong></td><td>API 或共享库的变更立即暴露，促进团队沟通合作</td></tr><tr><td><strong>原子提交</strong></td><td>大规模重构更容易，可在一次提交中更新多个包或项目</td></tr><tr><td><strong>隐式 CI</strong></td><td>所有代码统一维护，保证持续集成</td></tr><tr><td><strong>统一 CI/CD</strong></td><td>每个项目使用相同的部署流程</td></tr><tr><td><strong>统一构建流程</strong></td><td>共享一致的构建流程，随时可迭代自动化脚本</td></tr></tbody></table><blockquote><p>📚 <strong>延伸阅读</strong><br><a href="https://www.perforce.com/blog/vcs/what-monorepo" target="_blank" rel="noreferrer">5 分钟搞懂 Monorepo</a></p></blockquote><h4 id="实施策略" tabindex="-1">实施策略 <a class="header-anchor" href="#实施策略" aria-label="Permalink to &quot;实施策略&quot;">​</a></h4><p><strong>短期目标：</strong></p><ul><li>✅ 原则上不再允许新开业务仓库</li><li>✅ 新增业务沿用所在团队的大仓库</li></ul><p><strong>中期目标：</strong></p><ul><li>🔧 平台增加对单体仓库的 CI/CD、环境、灰度、功能开关支持</li><li>🔧 加大前端基建投入，持续提升单体仓库的工程自动化程度</li><li>🔧 持续提升仓库分支管理水平，逐步走向主干开发模式</li></ul><p><strong>长期目标：</strong></p><ul><li>🎯 根据业务整合契机，持续整合现有仓库</li><li>🎯 最终前端业务走向一个大仓库</li></ul><hr><h3 id="_4-2-前端-✖️-devops" tabindex="-1">4.2 前端 ✖️ DevOps <a class="header-anchor" href="#_4-2-前端-✖️-devops" aria-label="Permalink to &quot;4.2 前端 ✖️ DevOps&quot;">​</a></h3><p><img src="'+p+`" alt=""></p><h4 id="工作流程" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程" aria-label="Permalink to &quot;工作流程&quot;">​</a></h4><p><strong>版本管理：</strong></p><ul><li>通过 Git 分支策略收集版本 PR</li><li>结合 DevOps 平台多环境、灰度（即将支持 Monorepo）</li><li>功能开关（正在设计中）进行独立测试与发布</li></ul><p><strong>构建系统：</strong></p><ul><li>分析包之间依赖关系自动调度构建任务</li><li>使用完全自动化流程</li><li>禁止任何形式的手动干预构建输出产物</li><li>通过即早发现问题消除包版本不一致的隐患</li></ul><p><strong>包共享策略：</strong></p><table tabindex="0"><thead><tr><th>协议</th><th>用途</th><th>示例</th></tr></thead><tbody><tr><td><code>workspace:</code></td><td>共享当前仓库本地包</td><td><code>workspace:*</code></td></tr><tr><td><code>npm:</code></td><td>共享外部仓库或第三方包</td><td><code>npm:react@18.0.0</code></td></tr><tr><td><code>https:</code></td><td>在浏览器中共享包</td><td><code>https://esm.sh/react@18.0.0</code></td></tr></tbody></table><hr><h2 id="五、工具链层" tabindex="-1">五、工具链层 <a class="header-anchor" href="#五、工具链层" aria-label="Permalink to &quot;五、工具链层&quot;">​</a></h2><h3 id="_5-1-包管理工具-pnpm" tabindex="-1">5.1 包管理工具：Pnpm <a class="header-anchor" href="#_5-1-包管理工具-pnpm" aria-label="Permalink to &quot;5.1 包管理工具：Pnpm&quot;">​</a></h3><p><strong>为什么选择 Pnpm？</strong></p><table tabindex="0"><thead><tr><th>优势</th><th>说明</th></tr></thead><tbody><tr><td><strong>极快</strong></td><td>避免地狱依赖，节省磁盘空间</td></tr><tr><td><strong>Monorepos 友好</strong></td><td>支持 <code>workspaces</code> 协议</td></tr><tr><td><strong>更严格</strong></td><td>避免幽灵依赖破坏工程</td></tr></tbody></table><p><strong>与 Npm 对比：</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Npm：每个项目都有独立的 node_modules</span></span>
<span class="line"><span>项目A/node_modules/react</span></span>
<span class="line"><span>项目B/node_modules/react  (重复)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Pnpm：全局存储 + 硬链接</span></span>
<span class="line"><span>全局/.pnpm-store/react</span></span>
<span class="line"><span>项目A/node_modules/react -&gt; 全局/.pnpm-store/react</span></span>
<span class="line"><span>项目B/node_modules/react -&gt; 全局/.pnpm-store/react</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h3 id="_5-2-构建系统-turborepo" tabindex="-1">5.2 构建系统：Turborepo <a class="header-anchor" href="#_5-2-构建系统-turborepo" aria-label="Permalink to &quot;5.2 构建系统：Turborepo&quot;">​</a></h3><p><strong>为什么选择 Turborepo？</strong></p><p>Turborepo 取代了过去使用的 <strong>Lerna</strong> 与 <strong>ci-task-runner</strong>（稿定自研），提供更强大的构建能力。</p><h4 id="核心特性" tabindex="-1">核心特性 <a class="header-anchor" href="#核心特性" aria-label="Permalink to &quot;核心特性&quot;">​</a></h4><p><strong>1. 增量构建</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自动分析依赖顺序，只构建变更的包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">turbo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>分析包与包之间的依赖顺序</li><li>自动安排构建任务顺序</li><li>无需人工干预</li></ul><p><strong>2. 并行执行</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 充分利用多核 CPU</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">turbo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --parallel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>充分利用多核 CPU</li><li>并行执行独立任务</li><li>大幅提升构建速度</li></ul><p><strong>3. 缓存机制</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 远程缓存，团队共享</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">turbo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cache-dir=.turbo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>本地缓存构建产物</li><li>支持远程缓存</li><li>跨机器共享缓存</li></ul><h4 id="依赖图示例" tabindex="-1">依赖图示例 <a class="header-anchor" href="#依赖图示例" aria-label="Permalink to &quot;依赖图示例&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>packages/</span></span>
<span class="line"><span>├── ui-components</span></span>
<span class="line"><span>│   └── (无依赖)</span></span>
<span class="line"><span>├── utils</span></span>
<span class="line"><span>│   └── (无依赖)</span></span>
<span class="line"><span>├── app-editor</span></span>
<span class="line"><span>│   ├── → ui-components</span></span>
<span class="line"><span>│   └── → utils</span></span>
<span class="line"><span>└── app-admin</span></span>
<span class="line"><span>    ├── → ui-components</span></span>
<span class="line"><span>    └── → utils</span></span>
<span class="line"><span></span></span>
<span class="line"><span>构建顺序：</span></span>
<span class="line"><span>1. ui-components, utils (并行)</span></span>
<span class="line"><span>2. app-editor, app-admin (并行)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><hr><h3 id="_5-3-打包工具-any" tabindex="-1">5.3 打包工具：Any <a class="header-anchor" href="#_5-3-打包工具-any" aria-label="Permalink to &quot;5.3 打包工具：Any&quot;">​</a></h3><h4 id="选型原则" tabindex="-1">选型原则 <a class="header-anchor" href="#选型原则" aria-label="Permalink to &quot;选型原则&quot;">​</a></h4><p>对打包工具不限制选型，只要满足以下要求：</p><p><strong>必要条件：</strong></p><ul><li>✅ 完整支持 ESM 输出</li><li>✅ 尽可能减少私有语法对源代码的侵入</li><li>✅ 高性能</li></ul><h4 id="推荐工具" tabindex="-1">推荐工具 <a class="header-anchor" href="#推荐工具" aria-label="Permalink to &quot;推荐工具&quot;">​</a></h4><table tabindex="0"><thead><tr><th>工具</th><th>推荐度</th><th>理由</th></tr></thead><tbody><tr><td><strong>Vite</strong></td><td>⭐⭐⭐⭐⭐</td><td>极快的开发体验，完美的 ESM 支持</td></tr><tr><td><strong>Rollup</strong></td><td>⭐⭐⭐⭐</td><td>纯粹的 ESM 打包器</td></tr><tr><td><strong>Web Builder</strong></td><td>⭐⭐⭐⭐</td><td>稿定自研，针对 Web 优化</td></tr><tr><td>Webpack</td><td>⚠️ 避免使用</td><td>无法达到上述三点要求</td></tr></tbody></table><hr><h3 id="_5-4-web-管理工具-wpm" tabindex="-1">5.4 Web 管理工具：Wpm <a class="header-anchor" href="#_5-4-web-管理工具-wpm" aria-label="Permalink to &quot;5.4 Web 管理工具：Wpm&quot;">​</a></h3><p>Wpm 是<strong>稿定开发的包管理工具</strong>，面向浏览器以及 CDN 提供原生的 ESM 包支持。</p><h4 id="核心能力" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力" aria-label="Permalink to &quot;核心能力&quot;">​</a></h4><p><strong>1. 本地与远程包的抽象</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.sh/react@18.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@gaoding/ui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>2. web-modules.json 配置</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;modules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;18.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@gaoding/ui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.2.3&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3. Importmap 集成</strong></p><ul><li>自动生成 Importmap</li><li>管理依赖版本</li><li>支持本地开发和生产环境切换</li></ul><hr><h3 id="_5-5-静态资源加速-esm-npm-cdn" tabindex="-1">5.5 静态资源加速：ESM Npm CDN <a class="header-anchor" href="#_5-5-静态资源加速-esm-npm-cdn" aria-label="Permalink to &quot;5.5 静态资源加速：ESM Npm CDN&quot;">​</a></h3><p><strong>稿定自研的 ESM CDN</strong>，让浏览器直接使用 Npm 源上的模块而无需打包。</p><h4 id="核心特性-1" tabindex="-1">核心特性 <a class="header-anchor" href="#核心特性-1" aria-label="Permalink to &quot;核心特性&quot;">​</a></h4><p><strong>1. 自动转换</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// CJS 模块</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 自动转换为 ESM</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>2. 固定不可变 URL</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>https://esm.gaoding.com/react@18.0.0/index.js</span></span>
<span class="line"><span>永久不变，可安全缓存</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3. 多重回源灾备</strong></p><ul><li>主 CDN：阿里云</li><li>备用 CDN：腾讯云</li><li>直连 Npm 源</li></ul><hr><h2 id="六、集成层" tabindex="-1">六、集成层 <a class="header-anchor" href="#六、集成层" aria-label="Permalink to &quot;六、集成层&quot;">​</a></h2><h3 id="_6-1-importmap-web-模块集成标准" tabindex="-1">6.1 Importmap：Web 模块集成标准 <a class="header-anchor" href="#_6-1-importmap-web-模块集成标准" aria-label="Permalink to &quot;6.1 Importmap：Web 模块集成标准&quot;">​</a></h3><p><img src="`+r+`" alt=""></p><h4 id="什么是-importmap" tabindex="-1">什么是 Importmap？ <a class="header-anchor" href="#什么是-importmap" aria-label="Permalink to &quot;什么是 Importmap？&quot;">​</a></h4><p>Importmap 是一个 <strong>Web 标准</strong>，用于在浏览器中映射模块标识符到 URL。</p><p><strong>传统方式：</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 需要打包工具处理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>Importmap 方式：</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;importmap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &quot;imports&quot;: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &quot;react&quot;: &quot;https://esm.gaoding.com/react@18.0.0/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 浏览器原生支持，无需打包</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> React </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="核心优势-1" tabindex="-1">核心优势 <a class="header-anchor" href="#核心优势-1" aria-label="Permalink to &quot;核心优势&quot;">​</a></h4><p><strong>1. 跨业务共享</strong></p><ul><li>✅ 包的供应方可以独立构建与发布</li><li>✅ 跨团队、跨仓库、跨业务线共享代码资产</li></ul><p><strong>2. 灵活更新</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 通过阿波罗合并导入映射，无需发布版本即可更新公共模块</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://esm.gaoding.com/react@18.2.0/index.js&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 版本升级</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>3. 依赖去重</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>应用A: react@18.0.0</span></span>
<span class="line"><span>应用B: react@18.0.0</span></span>
<span class="line"><span>       ↓</span></span>
<span class="line"><span>共享同一份 React，只加载一次</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><hr><h3 id="_6-2-挂件容器-web-widget-container" tabindex="-1">6.2 挂件容器：Web Widget Container <a class="header-anchor" href="#_6-2-挂件容器-web-widget-container" aria-label="Permalink to &quot;6.2 挂件容器：Web Widget Container&quot;">​</a></h3><h4 id="什么是挂件容器" tabindex="-1">什么是挂件容器？ <a class="header-anchor" href="#什么是挂件容器" aria-label="Permalink to &quot;什么是挂件容器？&quot;">​</a></h4><p>挂件容器是<strong>挂件的运行容器</strong>，提供技术栈中立、在浏览器中使用 CDN 集成前端组件的机制。</p><h4 id="核心能力-1" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-1" aria-label="Permalink to &quot;核心能力&quot;">​</a></h4><p><strong>1. 技术栈隔离</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Vue 挂件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Vue 3 应用</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    createApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(App).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// React 挂件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // React 应用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ReactDOM.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">render</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">App</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;, el);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>2. 样式隔离</strong></p><ul><li>支持 Shadow DOM</li><li>CSS 作用域隔离</li><li>避免样式冲突</li></ul><p><strong>3. 生命周期管理</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Widget</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">container</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unmount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  update</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h3 id="_6-3-webview-容器-web-容器" tabindex="-1">6.3 WebView 容器：Web 容器 <a class="header-anchor" href="#_6-3-webview-容器-web-容器" aria-label="Permalink to &quot;6.3 WebView 容器：Web 容器&quot;">​</a></h3><p>提供 <strong>App、小程序、桌面客户端</strong> 中的 Web 运行容器。</p><p><strong>支持平台：</strong></p><ul><li>📱 iOS App</li><li>🤖 Android App</li><li>🎯 微信小程序</li><li>💻 桌面客户端（Electron）</li></ul><p><strong>由移动端团队主导开发和维护。</strong></p><hr><h3 id="_6-4-可视化集成工具-iliad" tabindex="-1">6.4 可视化集成工具：Iliad <a class="header-anchor" href="#_6-4-可视化集成工具-iliad" aria-label="Permalink to &quot;6.4 可视化集成工具：Iliad&quot;">​</a></h3><p><strong>Iliad</strong> 是稿定的网页编辑器（落地页编辑器），支持<strong>设计师、运营或开发人员</strong>以可视化方式将挂件集成在落地页中。</p><h4 id="核心能力-2" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-2" aria-label="Permalink to &quot;核心能力&quot;">​</a></h4><p><strong>1. 可视化编辑</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────┐</span></span>
<span class="line"><span>│  拖拽挂件 → 配置属性 → 预览 → 发布  │</span></span>
<span class="line"><span>└─────────────────────────────────┘</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>2. 挂件库</strong></p><ul><li>内置常用挂件</li><li>自定义挂件</li><li>第三方挂件市场</li></ul><p><strong>3. 实时预览</strong></p><ul><li>所见即所得</li><li>响应式预览</li><li>多设备适配</li></ul><hr><h2 id="七、应用层" tabindex="-1">七、应用层 <a class="header-anchor" href="#七、应用层" aria-label="Permalink to &quot;七、应用层&quot;">​</a></h2><h3 id="_7-1-包的标准" tabindex="-1">7.1 包的标准 <a class="header-anchor" href="#_7-1-包的标准" aria-label="Permalink to &quot;7.1 包的标准&quot;">​</a></h3><blockquote><p>💡 <strong>核心理念</strong><br> 无论是组件、SDK 还是页面入口，都将以<strong>包的方式</strong>来组织代码。</p></blockquote><h4 id="为什么需要标准化" tabindex="-1">为什么需要标准化？ <a class="header-anchor" href="#为什么需要标准化" aria-label="Permalink to &quot;为什么需要标准化？&quot;">​</a></h4><p>使用标准化后的包可以：</p><ul><li>✅ 避免上游包的构建方式污染下游技术栈</li><li>✅ 实现团队内外部自动化集成</li><li>✅ 支持浏览器直接使用 CDN</li></ul><h4 id="标准规范" tabindex="-1">标准规范 <a class="header-anchor" href="#标准规范" aria-label="Permalink to &quot;标准规范&quot;">​</a></h4><p><strong>必须满足：</strong></p><ol><li><strong>语义化版本号</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.2.3&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 主版本.次版本.修订号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li><strong>使用 exports 字段</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.cjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li><strong>默认导出 ESM 格式</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="4"><li><strong>浏览器兼容语法</strong></li></ol><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ Good</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ❌ Bad (Node.js 特有)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="5"><li><strong>条件导出</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;browser&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/browser.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/node.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dist/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="6"><li><strong>使用 imports 字段（包内别名）</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;#utils&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/utils/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="7"><li><strong>peerDependencies 共享依赖</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;peerDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;react&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^18.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="8"><li><strong>workspaces 协议引用本地包</strong></li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;@gaoding/ui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;workspace:*&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="9"><li><strong>优先使用公共 Npm 源</strong></li></ol><ul><li>公开的包发布到 npmjs.com</li><li>内部包可使用私有源</li></ul><hr><h3 id="_7-2-代码资产定义" tabindex="-1">7.2 代码资产定义 <a class="header-anchor" href="#_7-2-代码资产定义" aria-label="Permalink to &quot;7.2 代码资产定义&quot;">​</a></h3><h4 id="资产类型" tabindex="-1">资产类型 <a class="header-anchor" href="#资产类型" aria-label="Permalink to &quot;资产类型&quot;">​</a></h4><table tabindex="0"><thead><tr><th>类型</th><th>说明</th><th style="text-align:center;">共享</th><th style="text-align:center;">外部耦合</th><th style="text-align:center;">技术栈中立</th><th style="text-align:center;">可视化排版</th></tr></thead><tbody><tr><td><strong>页面</strong></td><td>与路由密切关联的模块</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td></tr><tr><td><strong>挂件</strong></td><td>介于页面和组件之间，微前端入口</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td></tr><tr><td><strong>组件</strong></td><td>常规 UI 组件（.vue / .jsx）</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td><td style="text-align:center;">❌</td><td style="text-align:center;">⚠️</td></tr><tr><td><strong>SDK</strong></td><td>纯 API（用户信息、埋点等）</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">✅</td><td style="text-align:center;">❌</td></tr></tbody></table><hr><h3 id="_7-3-挂件-widget" tabindex="-1">7.3 挂件（Widget） <a class="header-anchor" href="#_7-3-挂件-widget" aria-label="Permalink to &quot;7.3 挂件（Widget）&quot;">​</a></h3><blockquote><p>💡 <strong>核心概念</strong><br> 挂件是稿定定义的概念，它是<strong>前端中的微服务</strong>，通过容器运行在不同的技术栈、项目中。</p></blockquote><h4 id="格式规范级别" tabindex="-1">格式规范级别 <a class="header-anchor" href="#格式规范级别" aria-label="Permalink to &quot;格式规范级别&quot;">​</a></h4><h5 id="level-1-基础组件" tabindex="-1">Level 1：基础组件 <a class="header-anchor" href="#level-1-基础组件" aria-label="Permalink to &quot;Level 1：基础组件&quot;">​</a></h5><p><strong>要求：</strong></p><ul><li>✅ 使用 Vue 或 React 组件</li><li>✅ 封装内部细节，提供可直接使用的业务功能</li><li>✅ 接收 Props，但不对外暴露接口和事件（可在 Props 中使用回调代替）</li><li>✅ 满足包的标准</li></ul><p><strong>示例：</strong></p><div class="language-vue vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-card&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">img</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;avatar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ name }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  props: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;avatar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h5 id="level-2-跨技术栈挂件" tabindex="-1">Level 2：跨技术栈挂件 <a class="header-anchor" href="#level-2-跨技术栈挂件" aria-label="Permalink to &quot;Level 2：跨技术栈挂件&quot;">​</a></h5><p><strong>额外要求：</strong></p><ul><li>✅ 包的入口默认导出满足技术栈无关的生命周期格式</li><li>✅ CSS 适应 Shadow DOM</li><li>✅ 发布到 Npm 源，支持浏览器使用 CDN 载入</li></ul><p><strong>生命周期格式：</strong></p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 挂载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">container</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HTMLElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 创建应用实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 卸载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 销毁应用实例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 更新</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">props</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 更新应用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>应用场景：</strong></p><ul><li>跨业务共享 UI 服务（如 DAM 输出模块给二方业务）</li><li>产品框架可插拔组件</li></ul><h5 id="level-3-nocode-可视化组件" tabindex="-1">Level 3：NoCode 可视化组件 <a class="header-anchor" href="#level-3-nocode-可视化组件" aria-label="Permalink to &quot;Level 3：NoCode 可视化组件&quot;">​</a></h5><p><strong>额外要求：</strong></p><ul><li>✅ 提供清单（Manifest），满足 NoCode 工具的可视化编辑</li></ul><p><strong>清单示例：</strong></p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;用户卡片&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;props&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;avatar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;image&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;头像&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;姓名&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>应用场景：</strong></p><ul><li>稿定平面编辑器可插拔组件</li><li>网页编辑器可插拔组件</li><li>文章编辑器可插拔组件</li><li>支撑<strong>自助</strong>管理代码资产</li></ul><hr><h3 id="_7-4-页面集成手段" tabindex="-1">7.4 页面集成手段 <a class="header-anchor" href="#_7-4-页面集成手段" aria-label="Permalink to &quot;7.4 页面集成手段&quot;">​</a></h3><h4 id="为什么重视页面集成" tabindex="-1">为什么重视页面集成？ <a class="header-anchor" href="#为什么重视页面集成" aria-label="Permalink to &quot;为什么重视页面集成？&quot;">​</a></h4><ul><li>🎯 稿定的灰度策略基于入口页</li><li>📊 SLS 的页面性能指标采集基于入口页</li><li>⚡ 入口页的首次加载性能至关重要</li></ul><h4 id="集成策略" tabindex="-1">集成策略 <a class="header-anchor" href="#集成策略" aria-label="Permalink to &quot;集成策略&quot;">​</a></h4><p><strong>推荐：多页模式（MPA）</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>站点A: /editor</span></span>
<span class="line"><span>站点B: /admin</span></span>
<span class="line"><span>站点C: /home</span></span>
<span class="line"><span></span></span>
<span class="line"><span>每个站点独立入口，独立部署</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>避免：单页模式（SPA）扩张</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>❌ 不推荐继续增加单页架构的规模</span></span>
<span class="line"><span>原因：</span></span>
<span class="line"><span>- 首屏加载慢</span></span>
<span class="line"><span>- 代码耦合严重</span></span>
<span class="line"><span>- 灰度困难</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="八、未来规划" tabindex="-1">八、未来规划 <a class="header-anchor" href="#八、未来规划" aria-label="Permalink to &quot;八、未来规划&quot;">​</a></h2><h3 id="_8-1-设计系统-筹备中" tabindex="-1">8.1 设计系统（筹备中） <a class="header-anchor" href="#_8-1-设计系统-筹备中" aria-label="Permalink to &quot;8.1 设计系统（筹备中）&quot;">​</a></h3><h4 id="什么是设计系统" tabindex="-1">什么是设计系统？ <a class="header-anchor" href="#什么是设计系统" aria-label="Permalink to &quot;什么是设计系统？&quot;">​</a></h4><p>设计系统是一系列<strong>文档元素、组件和区域、设计和前端指南</strong>的完整标准。</p><h4 id="核心目标" tabindex="-1">核心目标 <a class="header-anchor" href="#核心目标" aria-label="Permalink to &quot;核心目标&quot;">​</a></h4><p><strong>1. 统一品牌与体验</strong></p><ul><li>统一视觉语言</li><li>统一交互规范</li><li>统一开发工作流</li></ul><p><strong>2. Web 响应式实践</strong></p><ul><li>适配多种设备</li><li>流式布局</li><li>媒体查询</li></ul><p><strong>3. 统一的 UI 组件库</strong></p><ul><li>跨项目复用</li><li>统一设计规范</li><li>谨慎探索中</li></ul><hr><h3 id="_8-2-元框架" tabindex="-1">8.2 元框架 <a class="header-anchor" href="#_8-2-元框架" aria-label="Permalink to &quot;8.2 元框架&quot;">​</a></h3><h4 id="什么是元框架" tabindex="-1">什么是元框架？ <a class="header-anchor" href="#什么是元框架" aria-label="Permalink to &quot;什么是元框架？&quot;">​</a></h4><p>元框架将取代目前的<strong>前端 BFF 层</strong>，将可生长架构的开发与生产环节串联起来，形成完整的前端开发体系。</p><h4 id="核心能力-3" tabindex="-1">核心能力 <a class="header-anchor" href="#核心能力-3" aria-label="Permalink to &quot;核心能力&quot;">​</a></h4><p><strong>1. 多种渲染模式</strong></p><table tabindex="0"><thead><tr><th>模式</th><th>说明</th><th>适用场景</th></tr></thead><tbody><tr><td><strong>SPA</strong></td><td>单页应用</td><td>富交互应用</td></tr><tr><td><strong>SSR</strong></td><td>服务端渲染</td><td>SEO、首屏性能</td></tr><tr><td><strong>ESR</strong></td><td>边缘渲染</td><td>全球化部署</td></tr><tr><td><strong>Islands</strong></td><td>岛屿架构</td><td>静态为主、局部交互</td></tr></tbody></table><p><strong>2. 提高抽象层次</strong></p><ul><li>减少工程复杂度</li><li>提高开发体验</li><li>统一开发规范</li></ul><p><strong>3. 技术栈适应性</strong></p><ul><li>支持 Vue</li><li>支持 React</li><li>支持其他框架</li></ul><p><strong>4. ProCode 与 NoCode 融合</strong></p><ul><li>共享页面格式</li><li>共享挂件格式</li><li>统一抽象层</li></ul><p><strong>5. 生态弹性</strong></p><ul><li>保持对外部技术变化的适应性</li><li>提高前端团队对基础架构的掌控力</li></ul><hr><h2 id="九、实施指南" tabindex="-1">九、实施指南 <a class="header-anchor" href="#九、实施指南" aria-label="Permalink to &quot;九、实施指南&quot;">​</a></h2><h3 id="_9-1-新项目接入" tabindex="-1">9.1 新项目接入 <a class="header-anchor" href="#_9-1-新项目接入" aria-label="Permalink to &quot;9.1 新项目接入&quot;">​</a></h3><p><strong>步骤 1：选择合适的仓库</strong></p><ul><li>加入现有团队的 Monorepo</li><li>不再新建独立仓库</li></ul><p><strong>步骤 2：创建包</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 Monorepo 中创建新包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @gaoding/package</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>步骤 3：遵循包标准</strong></p><ul><li>配置 <code>package.json</code> exports</li><li>使用 ESM 格式</li><li>配置 peerDependencies</li></ul><p><strong>步骤 4：集成 CI/CD</strong></p><ul><li>配置 DevOps 流水线</li><li>配置灰度策略</li><li>配置功能开关</li></ul><h3 id="_9-2-现有项目迁移" tabindex="-1">9.2 现有项目迁移 <a class="header-anchor" href="#_9-2-现有项目迁移" aria-label="Permalink to &quot;9.2 现有项目迁移&quot;">​</a></h3><p><strong>评估阶段：</strong></p><ol><li>分析项目依赖</li><li>评估迁移成本</li><li>制定迁移计划</li></ol><p><strong>迁移阶段：</strong></p><ol><li>调整包结构</li><li>适配构建工具</li><li>迁移到 Monorepo</li></ol><p><strong>验证阶段：</strong></p><ol><li>功能测试</li><li>性能测试</li><li>灰度发布</li></ol><hr><h2 id="十、总结" tabindex="-1">十、总结 <a class="header-anchor" href="#十、总结" aria-label="Permalink to &quot;十、总结&quot;">​</a></h2><h3 id="_10-1-核心价值" tabindex="-1">10.1 核心价值 <a class="header-anchor" href="#_10-1-核心价值" aria-label="Permalink to &quot;10.1 核心价值&quot;">​</a></h3><ol><li><p><strong>技术栈无关</strong><br> 不同技术栈可以和谐共存</p></li><li><p><strong>独立发布</strong><br> 包级别的独立发布与部署</p></li><li><p><strong>代码共享</strong><br> 跨团队、跨项目共享代码资产</p></li><li><p><strong>提高效率</strong><br> 统一工具链，减少重复工作</p></li><li><p><strong>持续演进</strong><br> 架构可随业务发展持续优化</p></li></ol><h3 id="_10-2-关键原则" tabindex="-1">10.2 关键原则 <a class="header-anchor" href="#_10-2-关键原则" aria-label="Permalink to &quot;10.2 关键原则&quot;">​</a></h3><ul><li>✅ 尊重 Web 标准</li><li>✅ 避免技术栈污染</li><li>✅ 减少构建依赖</li><li>✅ 提高抽象层次</li><li>✅ ProCode 与 NoCode 融合</li></ul><h3 id="_10-3-技术栈" tabindex="-1">10.3 技术栈 <a class="header-anchor" href="#_10-3-技术栈" aria-label="Permalink to &quot;10.3 技术栈&quot;">​</a></h3><table tabindex="0"><thead><tr><th>层级</th><th>技术选型</th></tr></thead><tbody><tr><td><strong>基础设施</strong></td><td>Monorepo + DevOps</td></tr><tr><td><strong>包管理</strong></td><td>Pnpm</td></tr><tr><td><strong>构建系统</strong></td><td>Turborepo</td></tr><tr><td><strong>打包工具</strong></td><td>Vite / Rollup / Web Builder</td></tr><tr><td><strong>模块管理</strong></td><td>Wpm + Importmap</td></tr><tr><td><strong>CDN</strong></td><td>ESM Npm CDN</td></tr><tr><td><strong>容器</strong></td><td>Web Widget Container</td></tr><tr><td><strong>编辑器</strong></td><td>Iliad</td></tr></tbody></table><hr><h2 id="十一、参考资源" tabindex="-1">十一、参考资源 <a class="header-anchor" href="#十一、参考资源" aria-label="Permalink to &quot;十一、参考资源&quot;">​</a></h2><h3 id="官方文档" tabindex="-1">官方文档 <a class="header-anchor" href="#官方文档" aria-label="Permalink to &quot;官方文档&quot;">​</a></h3><ul><li><strong>Monorepo 工具</strong>：<a href="https://monorepo.tools/" target="_blank" rel="noreferrer">https://monorepo.tools/</a></li><li><strong>Turborepo</strong>：<a href="https://turbo.build/" target="_blank" rel="noreferrer">https://turbo.build/</a></li><li><strong>Pnpm</strong>：<a href="https://pnpm.io/" target="_blank" rel="noreferrer">https://pnpm.io/</a></li><li><strong>Importmap</strong>：<a href="https://github.com/WICG/import-maps" target="_blank" rel="noreferrer">https://github.com/WICG/import-maps</a></li></ul><h3 id="延伸阅读" tabindex="-1">延伸阅读 <a class="header-anchor" href="#延伸阅读" aria-label="Permalink to &quot;延伸阅读&quot;">​</a></h3><ul><li>5 分钟搞懂 Monorepo</li><li>微前端架构最佳实践</li><li>ESM 模块系统详解</li><li>设计系统构建指南</li></ul><hr><p><em>文档版本：v1.0 (RFC 0)</em><br><em>最后更新：2025-01-26</em><br><em>原始文档：Confluence - RFC 0: 前端基础架构</em></p>`,261)]))}const m=a(h,[["render",d]]);export{E as __pageData,m as default};

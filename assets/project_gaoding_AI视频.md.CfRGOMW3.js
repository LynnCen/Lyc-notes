import{_ as l,c as e,o as i,a8 as o}from"./chunks/framework.B1-gFi6y.js";const c=JSON.parse('{"title":"AI视频","description":"","frontmatter":{},"headers":[],"relativePath":"project/gaoding/AI视频.md","filePath":"project/gaoding/AI视频.md","lastUpdated":1768402963000}'),t={name:"project/gaoding/AI视频.md"};function r(n,a,p,h,d,s){return i(),e("div",null,a[0]||(a[0]=[o('<h1 id="ai视频" tabindex="-1">AI视频 <a class="header-anchor" href="#ai视频" aria-label="Permalink to &quot;AI视频&quot;">​</a></h1><h2 id="_1-需求分析" tabindex="-1">1. 需求分析 <a class="header-anchor" href="#_1-需求分析" aria-label="Permalink to &quot;1. 需求分析&quot;">​</a></h2><p>基于长期的流量目标，Q2拓展了AI视频这一方向，为后续的流量增长提供助力。</p><p>基于3月底的流量暴涨，基于做同款快速拓展了AI视频的做同款，但做同款对于能力的承载单一，因此新增AI视频通用组件。</p><p>Ai视频的玩法包含三个方向：文生视频、图生视频、视频特效，本期功能将涵盖这些能力。</p><ul><li>PRD：<a href="https://doc.huanleguang.com/pages/viewpage.action?pageId=454485852" target="_blank" rel="noreferrer">https://doc.huanleguang.com/pages/viewpage.action?pageId=454485852</a></li><li>UI：<a href="http://figma.com/design/cloCh7qypoMszjqIu1oMFK/insMind--%E8%90%BD%E5%9C%B0%E9%A1%B5%E5%B7%A5%E5%85%B7%E8%AE%BE%E8%AE%A1?t=WGqwABnHLqqgrPIK-0" target="_blank" rel="noreferrer">http://figma.com/design/cloCh7qypoMszjqIu1oMFK/insMind--落地页工具设计?t=WGqwABnHLqqgrPIK-0</a></li></ul><h3 id="_1-1-文生视频" tabindex="-1">1.1 文生视频 <a class="header-anchor" href="#_1-1-文生视频" aria-label="Permalink to &quot;1.1 文生视频&quot;">​</a></h3><h4 id="_1-切换功能" tabindex="-1">1. 切换功能 <a class="header-anchor" href="#_1-切换功能" aria-label="Permalink to &quot;1. 切换功能&quot;">​</a></h4><ul><li>初始化状态支持功能切换（文生视频/图生视频/视频特效）</li><li>进入编辑器后不支持切换</li></ul><p>进入编辑器是进入聚合页，还是工具直接覆盖？</p><p>待确认@虾米 --&gt; 落地页</p><h4 id="_2-文生视频配置从dify获取" tabindex="-1">2. 文生视频配置从Dify获取 <a class="header-anchor" href="#_2-文生视频配置从dify获取" aria-label="Permalink to &quot;2. 文生视频配置从Dify获取&quot;">​</a></h4><ul><li>模型：获取默认模式，支持获取模式列表，切换模式</li><li>尺寸：获取尺寸列表，支持切换</li><li>时间：获取时间列表，支持切换</li><li>强度：默认为50%，点击支持调整强度</li></ul><p>从Dify获取配置，Dify从哪里拿到所对应的这些配置信息？我如何接入Dify？</p><ol><li>前端根据接口（@榴莲）拿到配置，有哪些就展示哪些</li><li>切换模型时，模型所对应的尺寸、时间可能不一致，存在联动变化，包含credit</li></ol><p>根据后端数据解析，@昭扬提供下数据预设</p><p>credit解析：用多场景方案，选择时间切换场景code，居于接口数据维护一个场景code和点数的映射，点数只跟时长关联</p><p>5S场景、10S场景,点数</p><ol><li>模型相关@昭扬，配置credit</li></ol><h4 id="_3-生成流程" tabindex="-1">3. 生成流程 <a class="header-anchor" href="#_3-生成流程" aria-label="Permalink to &quot;3. 生成流程&quot;">​</a></h4><ul><li>文案输入为必填项</li><li>点击生成进入落地页工具</li><li>生成完成展示生成结果</li><li>点击下载则下载生成结果（不区分分辨率）</li></ul><p><strong>问题：</strong></p><ol><li>文案输入是否有字数限制？</li></ol><p>@虾米字数待确认</p><p>前端写死1500</p><p>输出结果字数？前端截取</p><ol start="2"><li>提示词增强由谁提供接口？</li></ol><p>调用AI视频提示词增强接口，由@昭扬补充DifyAI视频工作流</p><p>@虾米 已有需求，只需接入，对接人待定（后端提供个接口）</p><p>调用getAiVideoPrompt，对该方法增加输出配置</p><ol start="3"><li>文案的替换采用流式还是全覆盖？</li></ol><p>@虾米跟提示词增强捆绑</p><p>按照原本提示词的逻辑</p><p>优化项：流式</p><ol start="4"><li>点击生成接口？</li></ol><p>@榴莲</p><p>私下问下条哥，跟@昭扬对齐接口入参</p><h4 id="_4-视频播放组件" tabindex="-1">4. 视频播放组件 <a class="header-anchor" href="#_4-视频播放组件" aria-label="Permalink to &quot;4. 视频播放组件&quot;">​</a></h4><ul><li>生成完成自动播放，播放完成暂停</li><li>默认静音</li></ul><p>视频组件是否已有？样式需要改造？</p><p>跟ai-video通用</p><h4 id="_5-轻舟配置-支持配置默认选中" tabindex="-1">5. 轻舟配置（支持配置默认选中） <a class="header-anchor" href="#_5-轻舟配置-支持配置默认选中" aria-label="Permalink to &quot;5. 轻舟配置（支持配置默认选中）&quot;">​</a></h4><ul><li>模式：支持切换默认选中模式</li><li>尺寸：支持切换默认选中尺寸</li><li>时间：支持切换默认选中时间</li><li>强度：支持切换默认选中强度</li></ul><p>既然列表从Dify获取，那么轻舟配置默认选中所对应的列表从哪里获取？直接写死？</p><p>轻舟是总数据源，Dify配置会经过轻舟的中转，轻舟数据写死</p><p>模式输入框，输入对应code由运营人员自行查找对应code映射的模型（四个都是输入框，可选）</p><p>AI视频玩法是否也需要加入轻舟配置？</p><p>新建Ai视频工具，生成模式：文生视频、图生视频，视频特效</p><h3 id="_1-2-图生视频" tabindex="-1">1.2 图生视频 <a class="header-anchor" href="#_1-2-图生视频" aria-label="Permalink to &quot;1.2 图生视频&quot;">​</a></h3><h4 id="_1-图生视频配置从dify获取" tabindex="-1">1. 图生视频配置从Dify获取 <a class="header-anchor" href="#_1-图生视频配置从dify获取" aria-label="Permalink to &quot;1. 图生视频配置从Dify获取&quot;">​</a></h4><p>缺少尺寸选择</p><h4 id="_2-生成流程" tabindex="-1">2. 生成流程 <a class="header-anchor" href="#_2-生成流程" aria-label="Permalink to &quot;2. 生成流程&quot;">​</a></h4><p>上传图片必选，文案非必选</p><p>轻舟配置如何区分文生视频和图生视频？</p><p>同属于AI视频工具，文生视频、图生视频和特效视频属于该工具的3中模式</p><h3 id="_1-3-视频特效" tabindex="-1">1.3 视频特效 <a class="header-anchor" href="#_1-3-视频特效" aria-label="Permalink to &quot;1.3 视频特效&quot;">​</a></h3><h4 id="_1-切换功能-1" tabindex="-1">1. 切换功能 <a class="header-anchor" href="#_1-切换功能-1" aria-label="Permalink to &quot;1. 切换功能&quot;">​</a></h4><ul><li>初始化状态支持功能切换（文生视频/图生视频/视频特效）</li><li>进入编辑器后不支持切换</li></ul><h4 id="_2-视频特效配置从场景配置获取" tabindex="-1">2. 视频特效配置从场景配置获取 <a class="header-anchor" href="#_2-视频特效配置从场景配置获取" aria-label="Permalink to &quot;2. 视频特效配置从场景配置获取&quot;">​</a></h4><ul><li>展示默认选中内容</li><li>点击change effect进入编辑器展示更多分类内容</li></ul><p>什么是场景配置？从哪里获取？</p><p>可参考Ai绘图：</p><p>根据根分类code去查接口（接口已有的，AI绘图有）getScenes</p><p>补充getVideoScenes</p><p>点击change effect直接进入落地页？预览区未看到UI</p><p>直接进入编辑器</p><p>预览区分为1-3张图片上传，是否需要配置？</p><p>根据场景配置绑定展示几张图，默认几张图根据轻舟默认场景code展示（可参考AI绘图）</p><h4 id="_3-生成流程-1" tabindex="-1">3. 生成流程 <a class="header-anchor" href="#_3-生成流程-1" aria-label="Permalink to &quot;3. 生成流程&quot;">​</a></h4><ul><li>上传图片为必填项</li></ul><h4 id="_4-轻舟配置" tabindex="-1">4. 轻舟配置 <a class="header-anchor" href="#_4-轻舟配置" aria-label="Permalink to &quot;4. 轻舟配置&quot;">​</a></h4><ul><li>支持配置根分类</li><li>支持配置默认选中分类</li><li>支持配置默认选中分类的默认选中场景</li><li>credits根据场景绑定，需要配置是否付费，付费点数（不同于上面两种模式的credit绑定模型）</li></ul><p>输入框 可参考上述（参考AI绘图）</p><h2 id="_2-逻辑梳理" tabindex="-1">2. 逻辑梳理 <a class="header-anchor" href="#_2-逻辑梳理" aria-label="Permalink to &quot;2. 逻辑梳理&quot;">​</a></h2><h3 id="_2-1-路由配置" tabindex="-1">2.1 路由配置 <a class="header-anchor" href="#_2-1-路由配置" aria-label="Permalink to &quot;2.1 路由配置&quot;">​</a></h3><p>本次新增AI视频通用工具，路由应处于landing，根据组件映射关系，位于落地页tool-banner内部，属于工具的一部分，可利用工具封装的公共逻辑。</p><h3 id="_2-2-工具组件toolbanner分析" tabindex="-1">2.2 工具组件ToolBanner分析 <a class="header-anchor" href="#_2-2-工具组件toolbanner分析" aria-label="Permalink to &quot;2.2 工具组件ToolBanner分析&quot;">​</a></h3><p>以这个工具为例：</p><ul><li>左侧：属于Media，分为图片预览、视频预览、图片比较预览</li><li>右侧：属于上传交互区，分为两个组件：AIDraw、UploadBanner <ul><li>AIDraw（Ai绘图）</li><li>UploadBanner（通用上传）</li></ul></li></ul><p>AIVideo：新增AIVideo则需要preview新增一个组件，可以考虑将Toolbanner重构，维护一套组件映射，不需要分支判断</p><h3 id="_2-3-toolwrap" tabindex="-1">2.3 ToolWrap <a class="header-anchor" href="#_2-3-toolwrap" aria-label="Permalink to &quot;2.3 ToolWrap&quot;">​</a></h3><p>ToolWrap内部组装component和slot，component用于展示工具的详情（点击generate后进入），slot用于展示预览区，由于大部分工具都具有相似逻辑和生命周期，故统一在toolwrap中组装（条哥考虑后续将这块进行重构掉，支持不同工具不同ui）。</p><ul><li>component：工具详情展示组件，通过tool字段指定，tool由useOpenTool中的openTool方法创建。</li><li>slot：是一个插槽，展示在Toolbanner中的预览区，可通过openToolEditor和openOuterTool进行切换工具模式。</li></ul><h3 id="_2-4-useopentool-hook-机制" tabindex="-1">2.4 useOpenTool Hook 机制 <a class="header-anchor" href="#_2-4-useopentool-hook-机制" aria-label="Permalink to &quot;2.4 useOpenTool Hook 机制&quot;">​</a></h3><p>useOpenTool是一个工具管理器，负责统一的工具的打开逻辑，包括平台适配，文件校验，状态管理等。</p><p><strong>主要职责：</strong></p><ol><li><p><strong>加载工具loadTool</strong>：通过动态引入的方式引入工具Editor（分为移动端和PC端，详情可见Editor），在ToolWrap组件挂载的时候执行。</p></li><li><p><strong>打开工具openTool</strong>：打开的方式分为三种</p><ul><li>标准打开工具openTool：在原本预览区的位置进行覆盖</li><li>聚合页工具打开openToolsEditor：通过工具聚合打开指定工具，原本预览区不变，在整个外层套一个聚合页层。</li><li>编辑器打开openOuterTool：打开外部传入的编辑器工具</li></ul></li><li><p><strong>状态管理：</strong></p><ul><li>tool: 当前工具组件的引用（使用shallowRef避免深度响应）</li><li>visible: 工具是否可见的状态</li><li>wap: 是否为移动端环境</li><li>fileData: 当前选择的文件数据数组</li><li>editor: 编辑器服务实例</li><li>config: 当前工具的配置信息</li><li>title: 工具的标题</li><li>showTool: 工具是否应该显示（visible &amp;&amp; tool存在）</li><li>showComp: 组件是否应该显示（移动端AB测试或工具未显示时）</li><li>toolType: 当前工具类型（从配置或编辑器获取）</li><li>toolConfig: 轻舟动态配置</li></ul></li></ol><h3 id="_2-5-editor-来源和服务架构" tabindex="-1">2.5 Editor 来源和服务架构 <a class="header-anchor" href="#_2-5-editor-来源和服务架构" aria-label="Permalink to &quot;2.5 Editor 来源和服务架构&quot;">​</a></h3><p>当调用openTool时会打开对应的Too组件，工具的预加载通过loadTool加载Editor组件，Editor组件通过wap区分加载移动端还是PCEditor，每个editor对应一个editor服务，editor服务通过bootstrap使用toolType进行动态创建每个工具所对应的服务。</p><p>Editor组件：</p><h3 id="_2-6-不同工具的-editor-服务特点" tabindex="-1">2.6 不同工具的 Editor 服务特点 <a class="header-anchor" href="#_2-6-不同工具的-editor-服务特点" aria-label="Permalink to &quot;2.6 不同工具的 Editor 服务特点&quot;">​</a></h3><h3 id="_2-7-数据流向和通信机制" tabindex="-1">2.7 数据流向和通信机制 <a class="header-anchor" href="#_2-7-数据流向和通信机制" aria-label="Permalink to &quot;2.7 数据流向和通信机制&quot;">​</a></h3><h2 id="_3-具体设计" tabindex="-1">3. 具体设计 <a class="header-anchor" href="#_3-具体设计" aria-label="Permalink to &quot;3. 具体设计&quot;">​</a></h2><h3 id="_3-1-轻舟配置数据" tabindex="-1">3.1 轻舟配置数据 <a class="header-anchor" href="#_3-1-轻舟配置数据" aria-label="Permalink to &quot;3.1 轻舟配置数据&quot;">​</a></h3><p>数据源从哪里获取？静态写死</p><p><strong>选中AI视频工具：</strong></p><ol><li><p><strong>AI视频模式</strong></p><ul><li>单选：文生视频、图生视频、视频特效</li></ul></li><li><p><strong>文生视频配置</strong></p><ul><li>模型：Input 输入code</li><li>尺寸：Input 具体值</li><li>时间：Input 具体值</li><li>强度：Input 具体值</li><li>输入框：defaultvalue？</li><li>是否付费：</li></ul></li><li><p><strong>图生视频</strong></p><ul><li>模式：Input</li><li>时间：Input</li><li>强度：Input</li></ul></li><li><p><strong>视频特效</strong></p><ul><li>根分类code：Input</li><li>默认选中分类：Input</li><li>默认选中分类中的默认选中场景：</li><li>是否付费：credit</li></ul></li></ol><h3 id="_3-2-配置流程" tabindex="-1">3.2 配置流程 <a class="header-anchor" href="#_3-2-配置流程" aria-label="Permalink to &quot;3.2 配置流程&quot;">​</a></h3><ol><li>进入页面管理</li></ol><p>搜索指定路由background-template，进入编辑</p><ol start="2"><li>进入页面配置</li></ol><p>在页面配置中进入组件中心</p><ol start="3"><li><p>新增编辑工具</p></li><li><p>配置工具Schema</p></li></ol><p>配置手册参考：<a href="https://formilyjs.org/zh-CN" target="_blank" rel="noreferrer">https://formilyjs.org/zh-CN</a></p><ol start="5"><li>配置数据结构</li></ol><h3 id="_3-3-ui组件" tabindex="-1">3.3 UI组件 <a class="header-anchor" href="#_3-3-ui组件" aria-label="Permalink to &quot;3.3 UI组件&quot;">​</a></h3><p>按照组件最小原则进行封装，也可参考已有的组件</p><h4 id="_3-3-1-视频模式选择aivideofeatureselect" tabindex="-1">3.3.1 视频模式选择AiVideoFeatureSelect <a class="header-anchor" href="#_3-3-1-视频模式选择aivideofeatureselect" aria-label="Permalink to &quot;3.3.1 视频模式选择AiVideoFeatureSelect&quot;">​</a></h4><ul><li>可采用Select的quiet</li><li>Dropdown</li></ul><h4 id="_3-3-2-带logo输入框" tabindex="-1">3.3.2 带logo输入框 <a class="header-anchor" href="#_3-3-2-带logo输入框" aria-label="Permalink to &quot;3.3.2 带logo输入框&quot;">​</a></h4><p>设计图：</p><p>具体可参考AI绘图中的组件(meta/www-insmind/routes/(vue3)/components/tool/components/text-area/index.vue)，需要替换Toolbar（通过插槽）</p><h4 id="_3-3-3-图片上传" tabindex="-1">3.3.3 图片上传 <a class="header-anchor" href="#_3-3-3-图片上传" aria-label="Permalink to &quot;3.3.3 图片上传&quot;">​</a></h4><p>设计图：</p><p>与现有的存在差异，需要特殊改造下适配样式（/meta/www-insmind/routes/(vue3)/components/tool/components/ai-draw/components/upload-image.vue）（upload-image），建议重新写一个，图片svg需要改造为填充色：</p><h4 id="_3-3-4-下拉" tabindex="-1">3.3.4 下拉 <a class="header-anchor" href="#_3-3-4-下拉" aria-label="Permalink to &quot;3.3.4 下拉&quot;">​</a></h4><p>/meta/www-insmind/routes/(vue3)/components/tool/components/ratio/ratio-dropdown.vue ratio-dropdown：</p><p>是否可以抽象一个组件，两个插槽，一个展示，一个用于dropdown</p><h4 id="_3-3-5-slider" tabindex="-1">3.3.5 slider <a class="header-anchor" href="#_3-3-5-slider" aria-label="Permalink to &quot;3.3.5 slider&quot;">​</a></h4><h4 id="_3-3-6-credit" tabindex="-1">3.3.6 credit <a class="header-anchor" href="#_3-3-6-credit" aria-label="Permalink to &quot;3.3.6 credit&quot;">​</a></h4><p>business-btn</p><h4 id="_3-3-7-场景scene" tabindex="-1">3.3.7 场景scene <a class="header-anchor" href="#_3-3-7-场景scene" aria-label="Permalink to &quot;3.3.7 场景scene&quot;">​</a></h4><p>/Users/lynncen/work/meta/www-insmind/routes/(vue3)/components/tool/components/ai-draw/components/scene-list.vue</p><h2 id="_4-移动端适配" tabindex="-1">4. 移动端适配 <a class="header-anchor" href="#_4-移动端适配" aria-label="Permalink to &quot;4. 移动端适配&quot;">​</a></h2><h2 id="_5-接口对接" tabindex="-1">5. 接口对接 <a class="header-anchor" href="#_5-接口对接" aria-label="Permalink to &quot;5. 接口对接&quot;">​</a></h2><h3 id="_5-1-轻舟配置接口" tabindex="-1">5.1 轻舟配置接口 <a class="header-anchor" href="#_5-1-轻舟配置接口" aria-label="Permalink to &quot;5.1 轻舟配置接口&quot;">​</a></h3><h3 id="_5-2-dify获取模型配置" tabindex="-1">5.2 Dify获取模型配置 <a class="header-anchor" href="#_5-2-dify获取模型配置" aria-label="Permalink to &quot;5.2 Dify获取模型配置&quot;">​</a></h3><p>@榴莲给到具体参数</p><p>@昭扬数据结构</p><h3 id="_5-3-提示词增强" tabindex="-1">5.3 提示词增强 <a class="header-anchor" href="#_5-3-提示词增强" aria-label="Permalink to &quot;5.3 提示词增强&quot;">​</a></h3><p>getAiVideoPrompt</p><h3 id="_5-4-视频生成接口" tabindex="-1">5.4 视频生成接口 <a class="header-anchor" href="#_5-4-视频生成接口" aria-label="Permalink to &quot;5.4 视频生成接口&quot;">​</a></h3><p>都走dify，只提供接口</p><h3 id="_5-7-场景接口" tabindex="-1">5.7 场景接口 <a class="header-anchor" href="#_5-7-场景接口" aria-label="Permalink to &quot;5.7 场景接口&quot;">​</a></h3><p>getScenes</p><h2 id="_6-自测调试" tabindex="-1">6. 自测调试 <a class="header-anchor" href="#_6-自测调试" aria-label="Permalink to &quot;6. 自测调试&quot;">​</a></h2><ul><li>单元测试：对每个模块进行单元测试，确保功能正确。</li><li>集成测试：测试整个组件的集成效果，确保各模块协同工作。</li><li>性能测试：测试组件在不同环境下的性能表现。</li><li>兼容性测试：测试组件在不同浏览器和移动设备上的表现。</li></ul><h2 id="_7-时间计划" tabindex="-1">7. 时间计划 <a class="header-anchor" href="#_7-时间计划" aria-label="Permalink to &quot;7. 时间计划&quot;">​</a></h2><ul><li>需求分析：</li><li>设计与开发：</li><li>测试与调试：</li><li>文档编写：</li><li>总时间：</li></ul>',139)]))}const _=l(t,[["render",r]]);export{c as __pageData,_ as default};

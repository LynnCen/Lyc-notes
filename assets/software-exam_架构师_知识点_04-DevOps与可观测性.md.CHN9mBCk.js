import{_ as a,c as n,o as i,a7 as e}from"./chunks/framework.BQb8NfN9.js";const c=JSON.parse('{"title":"DevOps与可观测性技术详解","description":"","frontmatter":{},"headers":[],"relativePath":"software-exam/架构师/知识点/04-DevOps与可观测性.md","filePath":"software-exam/架构师/知识点/04-DevOps与可观测性.md","lastUpdated":1770042246000}'),t={name:"software-exam/架构师/知识点/04-DevOps与可观测性.md"};function l(p,s,r,h,d,k){return i(),n("div",null,s[0]||(s[0]=[e(`<h1 id="devops与可观测性技术详解" tabindex="-1">DevOps与可观测性技术详解 <a class="header-anchor" href="#devops与可观测性技术详解" aria-label="Permalink to &quot;DevOps与可观测性技术详解&quot;">​</a></h1><hr><h2 id="一、ci-cd-持续集成-持续部署" tabindex="-1">一、CI/CD（持续集成/持续部署） <a class="header-anchor" href="#一、ci-cd-持续集成-持续部署" aria-label="Permalink to &quot;一、CI/CD（持续集成/持续部署）&quot;">​</a></h2><h3 id="_1-1-定义" tabindex="-1">1.1 定义 <a class="header-anchor" href="#_1-1-定义" aria-label="Permalink to &quot;1.1 定义&quot;">​</a></h3><p>自动化构建、测试、部署流程，频繁将代码集成到主干并快速发布到生产环境的实践。</p><h3 id="_1-2-解决的问题" tabindex="-1">1.2 解决的问题 <a class="header-anchor" href="#_1-2-解决的问题" aria-label="Permalink to &quot;1.2 解决的问题&quot;">​</a></h3><ul><li>手动发布慢且易错</li><li>集成冲突发现晚</li><li>反馈周期长</li></ul><h3 id="_1-3-ci-cd流水线" tabindex="-1">1.3 CI/CD流水线 <a class="header-anchor" href="#_1-3-ci-cd流水线" aria-label="Permalink to &quot;1.3 CI/CD流水线&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>代码提交</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>代码质量检查（Lint）</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>单元测试</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>构建（Build）</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>集成测试</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>安全扫描（SAST/DAST）</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>镜像构建 &amp; 推送</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>部署到预发环境</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>E2E测试</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>灰度发布</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>全量发布</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_1-4-常用工具" tabindex="-1">1.4 常用工具 <a class="header-anchor" href="#_1-4-常用工具" aria-label="Permalink to &quot;1.4 常用工具&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类别</th><th>工具</th></tr></thead><tbody><tr><td>CI平台</td><td>Jenkins, GitLab CI, GitHub Actions</td></tr><tr><td>代码质量</td><td>ESLint, SonarQube</td></tr><tr><td>容器</td><td>Docker, Podman</td></tr><tr><td>编排</td><td>Kubernetes, ArgoCD</td></tr><tr><td>镜像仓库</td><td>Harbor, Docker Hub</td></tr></tbody></table><hr><h2 id="二、容器化与编排" tabindex="-1">二、容器化与编排 <a class="header-anchor" href="#二、容器化与编排" aria-label="Permalink to &quot;二、容器化与编排&quot;">​</a></h2><h3 id="_2-1-kubernetes-k8s" tabindex="-1">2.1 Kubernetes（K8s） <a class="header-anchor" href="#_2-1-kubernetes-k8s" aria-label="Permalink to &quot;2.1 Kubernetes（K8s）&quot;">​</a></h3><h4 id="定义" tabindex="-1">定义 <a class="header-anchor" href="#定义" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>开源的容器编排平台，自动化部署、扩展和管理容器化应用。</p><h4 id="核心概念" tabindex="-1">核心概念 <a class="header-anchor" href="#核心概念" aria-label="Permalink to &quot;核心概念&quot;">​</a></h4><table tabindex="0"><thead><tr><th>概念</th><th>说明</th></tr></thead><tbody><tr><td>Pod</td><td>最小部署单元，包含一个或多个容器</td></tr><tr><td>Service</td><td>服务发现和负载均衡</td></tr><tr><td>Deployment</td><td>声明式应用部署</td></tr><tr><td>ConfigMap</td><td>配置管理</td></tr><tr><td>Secret</td><td>敏感信息管理</td></tr><tr><td>Ingress</td><td>外部访问入口</td></tr></tbody></table><h4 id="弹性伸缩-hpa" tabindex="-1">弹性伸缩（HPA） <a class="header-anchor" href="#弹性伸缩-hpa" aria-label="Permalink to &quot;弹性伸缩（HPA）&quot;">​</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">autoscaling/v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HorizontalPodAutoscaler</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ai-service-hpa</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  scaleTargetRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apps/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deployment</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ai-service</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minReplicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  maxReplicas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  metrics</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Resource</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cpu</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      target</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Utilization</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        averageUtilization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">70</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_2-2-poddisruptionbudget-pdb" tabindex="-1">2.2 PodDisruptionBudget（PDB） <a class="header-anchor" href="#_2-2-poddisruptionbudget-pdb" aria-label="Permalink to &quot;2.2 PodDisruptionBudget（PDB）&quot;">​</a></h3><h4 id="定义-1" tabindex="-1">定义 <a class="header-anchor" href="#定义-1" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>确保在自愿中断期间（如滚动更新、节点维护）保持一定数量的Pod可用。</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">policy/v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PodDisruptionBudget</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ai-service-pdb</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  minAvailable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 至少保持2个Pod可用</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    matchLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ai-service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h2 id="三、发布策略" tabindex="-1">三、发布策略 <a class="header-anchor" href="#三、发布策略" aria-label="Permalink to &quot;三、发布策略&quot;">​</a></h2><h3 id="_3-1-灰度发布-金丝雀发布-canary-deployment" tabindex="-1">3.1 灰度发布/金丝雀发布（Canary Deployment） <a class="header-anchor" href="#_3-1-灰度发布-金丝雀发布-canary-deployment" aria-label="Permalink to &quot;3.1 灰度发布/金丝雀发布（Canary Deployment）&quot;">​</a></h3><h4 id="定义-2" tabindex="-1">定义 <a class="header-anchor" href="#定义-2" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>将新版本先发布到小部分用户（如5%），观察无问题后逐步扩大范围的发布策略。</p><h4 id="流程" tabindex="-1">流程 <a class="header-anchor" href="#流程" aria-label="Permalink to &quot;流程&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>新版本上线</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>路由1%流量到新版本</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>监控错误率、延迟等指标</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>指标正常 → 扩大到10%</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>继续观察 → 扩大到50%</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>全量发布100%</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="异常处理" tabindex="-1">异常处理 <a class="header-anchor" href="#异常处理" aria-label="Permalink to &quot;异常处理&quot;">​</a></h4><p>一旦发现问题，一键回滚到旧版本。</p><h3 id="_3-2-蓝绿部署-blue-green-deployment" tabindex="-1">3.2 蓝绿部署（Blue-Green Deployment） <a class="header-anchor" href="#_3-2-蓝绿部署-blue-green-deployment" aria-label="Permalink to &quot;3.2 蓝绿部署（Blue-Green Deployment）&quot;">​</a></h3><h4 id="定义-3" tabindex="-1">定义 <a class="header-anchor" href="#定义-3" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>维护两套完全相同的生产环境（蓝/绿），部署新版本到绿环境，切流量到绿环境，蓝环境作为回退。</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>当前生产（蓝环境）←── 100%流量</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    │ 部署新版本到绿环境</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>绿环境就绪</span></span>
<span class="line"><span>    │</span></span>
<span class="line"><span>    │ 流量切换</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>绿环境 ←── 100%流量</span></span>
<span class="line"><span>蓝环境（保留，用于回滚）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="优势" tabindex="-1">优势 <a class="header-anchor" href="#优势" aria-label="Permalink to &quot;优势&quot;">​</a></h4><ul><li>瞬间切换</li><li>回滚只需切回流量</li><li>MTTR降至2分钟</li></ul><hr><h2 id="四、可观测性三大支柱" tabindex="-1">四、可观测性三大支柱 <a class="header-anchor" href="#四、可观测性三大支柱" aria-label="Permalink to &quot;四、可观测性三大支柱&quot;">​</a></h2><h3 id="_4-1-日志-logs" tabindex="-1">4.1 日志（Logs） <a class="header-anchor" href="#_4-1-日志-logs" aria-label="Permalink to &quot;4.1 日志（Logs）&quot;">​</a></h3><h4 id="结构化日志示例" tabindex="-1">结构化日志示例 <a class="header-anchor" href="#结构化日志示例" aria-label="Permalink to &quot;结构化日志示例&quot;">​</a></h4><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-15T10:30:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;level&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;INFO&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;template-service&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;trace_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;abc123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;span_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;def456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_789&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;template_download&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;template_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tpl_001&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;duration_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="工具" tabindex="-1">工具 <a class="header-anchor" href="#工具" aria-label="Permalink to &quot;工具&quot;">​</a></h4><ul><li>ELK Stack（Elasticsearch + Logstash + Kibana）</li><li>Grafana Loki</li></ul><h3 id="_4-2-指标-metrics" tabindex="-1">4.2 指标（Metrics） <a class="header-anchor" href="#_4-2-指标-metrics" aria-label="Permalink to &quot;4.2 指标（Metrics）&quot;">​</a></h3><h4 id="red方法-面向服务" tabindex="-1">RED方法（面向服务） <a class="header-anchor" href="#red方法-面向服务" aria-label="Permalink to &quot;RED方法（面向服务）&quot;">​</a></h4><table tabindex="0"><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td>Rate</td><td>每秒请求数（QPS）</td></tr><tr><td>Error</td><td>错误率</td></tr><tr><td>Duration</td><td>响应时间</td></tr></tbody></table><h4 id="use方法-面向资源" tabindex="-1">USE方法（面向资源） <a class="header-anchor" href="#use方法-面向资源" aria-label="Permalink to &quot;USE方法（面向资源）&quot;">​</a></h4><table tabindex="0"><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td>Utilization</td><td>资源使用率</td></tr><tr><td>Saturation</td><td>饱和度（排队等待）</td></tr><tr><td>Error</td><td>错误数</td></tr></tbody></table><h4 id="工具-1" tabindex="-1">工具 <a class="header-anchor" href="#工具-1" aria-label="Permalink to &quot;工具&quot;">​</a></h4><ul><li>Prometheus + Alertmanager</li><li>Grafana</li><li>InfluxDB</li></ul><h3 id="_4-3-追踪-tracing" tabindex="-1">4.3 追踪（Tracing） <a class="header-anchor" href="#_4-3-追踪-tracing" aria-label="Permalink to &quot;4.3 追踪（Tracing）&quot;">​</a></h3><h4 id="定义-4" tabindex="-1">定义 <a class="header-anchor" href="#定义-4" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>分布式链路追踪，追踪请求在多个服务间的调用路径。</p><h4 id="核心概念-1" tabindex="-1">核心概念 <a class="header-anchor" href="#核心概念-1" aria-label="Permalink to &quot;核心概念&quot;">​</a></h4><table tabindex="0"><thead><tr><th>概念</th><th>说明</th></tr></thead><tbody><tr><td>Trace</td><td>一次完整的请求链路</td></tr><tr><td>Span</td><td>链路中的一个操作单元</td></tr><tr><td>Trace ID</td><td>唯一标识一次追踪</td></tr><tr><td>Span ID</td><td>唯一标识一个操作</td></tr></tbody></table><h4 id="工具-2" tabindex="-1">工具 <a class="header-anchor" href="#工具-2" aria-label="Permalink to &quot;工具&quot;">​</a></h4><ul><li>Jaeger</li><li>Zipkin</li><li>SkyWalking</li></ul><h3 id="_4-4-opentelemetry" tabindex="-1">4.4 OpenTelemetry <a class="header-anchor" href="#_4-4-opentelemetry" aria-label="Permalink to &quot;4.4 OpenTelemetry&quot;">​</a></h3><h4 id="定义-5" tabindex="-1">定义 <a class="header-anchor" href="#定义-5" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>CNCF开源的可观测性框架，统一收集Trace、Metrics、Logs的标准。</p><h4 id="架构" tabindex="-1">架构 <a class="header-anchor" href="#架构" aria-label="Permalink to &quot;架构&quot;">​</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>应用（SDK埋点）</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>OTel Collector</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>┌─────────────────────────────┐</span></span>
<span class="line"><span>│ Jaeger │ Prometheus │ Loki │</span></span>
<span class="line"><span>└─────────────────────────────┘</span></span>
<span class="line"><span>    ↓</span></span>
<span class="line"><span>Grafana Dashboard</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><hr><h2 id="五、测试策略" tabindex="-1">五、测试策略 <a class="header-anchor" href="#五、测试策略" aria-label="Permalink to &quot;五、测试策略&quot;">​</a></h2><h3 id="_5-1-测试金字塔-test-pyramid" tabindex="-1">5.1 测试金字塔（Test Pyramid） <a class="header-anchor" href="#_5-1-测试金字塔-test-pyramid" aria-label="Permalink to &quot;5.1 测试金字塔（Test Pyramid）&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>        /\\</span></span>
<span class="line"><span>       /  \\  E2E测试（10%）</span></span>
<span class="line"><span>      /────\\</span></span>
<span class="line"><span>     /      \\  集成测试（20%）</span></span>
<span class="line"><span>    /────────\\</span></span>
<span class="line"><span>   /          \\  单元测试（70%）</span></span>
<span class="line"><span>  /────────────\\</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><table tabindex="0"><thead><tr><th>层级</th><th>说明</th><th>工具</th></tr></thead><tbody><tr><td>单元测试</td><td>测试单个函数/方法</td><td>Jest, JUnit</td></tr><tr><td>集成测试</td><td>测试服务间交互</td><td>Testcontainers</td></tr><tr><td>契约测试</td><td>验证API契约</td><td>Pact</td></tr><tr><td>E2E测试</td><td>端到端用户流程</td><td>Playwright, Cypress</td></tr></tbody></table><h3 id="_5-2-性能压测" tabindex="-1">5.2 性能压测 <a class="header-anchor" href="#_5-2-性能压测" aria-label="Permalink to &quot;5.2 性能压测&quot;">​</a></h3><h4 id="定义-6" tabindex="-1">定义 <a class="header-anchor" href="#定义-6" aria-label="Permalink to &quot;定义&quot;">​</a></h4><p>模拟大量并发用户或请求，测试系统在高负载下的性能表现和瓶颈。</p><h4 id="工具-3" tabindex="-1">工具 <a class="header-anchor" href="#工具-3" aria-label="Permalink to &quot;工具&quot;">​</a></h4><ul><li>k6</li><li>JMeter</li><li>Locust</li></ul><h4 id="关键指标" tabindex="-1">关键指标 <a class="header-anchor" href="#关键指标" aria-label="Permalink to &quot;关键指标&quot;">​</a></h4><table tabindex="0"><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td>QPS</td><td>每秒查询数</td></tr><tr><td>P95/P99</td><td>95%/99%分位延迟</td></tr><tr><td>错误率</td><td>请求失败比例</td></tr><tr><td>资源使用</td><td>CPU/内存/网络</td></tr></tbody></table><hr><h2 id="六、混沌工程-chaos-engineering" tabindex="-1">六、混沌工程（Chaos Engineering） <a class="header-anchor" href="#六、混沌工程-chaos-engineering" aria-label="Permalink to &quot;六、混沌工程（Chaos Engineering）&quot;">​</a></h2><h3 id="_6-1-定义" tabindex="-1">6.1 定义 <a class="header-anchor" href="#_6-1-定义" aria-label="Permalink to &quot;6.1 定义&quot;">​</a></h3><p>主动在生产环境注入故障（如杀进程、网络延迟），验证系统韧性的实践。</p><h3 id="_6-2-常见实验" tabindex="-1">6.2 常见实验 <a class="header-anchor" href="#_6-2-常见实验" aria-label="Permalink to &quot;6.2 常见实验&quot;">​</a></h3><table tabindex="0"><thead><tr><th>实验类型</th><th>说明</th></tr></thead><tbody><tr><td>进程故障</td><td>随机杀死服务实例</td></tr><tr><td>网络延迟</td><td>增加服务间调用延迟</td></tr><tr><td>网络丢包</td><td>模拟网络不稳定</td></tr><tr><td>CPU压力</td><td>模拟CPU资源紧张</td></tr><tr><td>依赖不可用</td><td>模拟下游服务故障</td></tr></tbody></table><h3 id="_6-3-工具" tabindex="-1">6.3 工具 <a class="header-anchor" href="#_6-3-工具" aria-label="Permalink to &quot;6.3 工具&quot;">​</a></h3><ul><li>Chaos Monkey（Netflix）</li><li>Chaos Mesh（K8s）</li><li>LitmusChaos</li></ul><hr><h2 id="七、安全devops-devsecops" tabindex="-1">七、安全DevOps（DevSecOps） <a class="header-anchor" href="#七、安全devops-devsecops" aria-label="Permalink to &quot;七、安全DevOps（DevSecOps）&quot;">​</a></h2><h3 id="_7-1-供应链安全" tabindex="-1">7.1 供应链安全 <a class="header-anchor" href="#_7-1-供应链安全" aria-label="Permalink to &quot;7.1 供应链安全&quot;">​</a></h3><h4 id="sbom-software-bill-of-materials" tabindex="-1">SBOM（Software Bill of Materials） <a class="header-anchor" href="#sbom-software-bill-of-materials" aria-label="Permalink to &quot;SBOM（Software Bill of Materials）&quot;">​</a></h4><p>列出软件中所有依赖组件及其版本的清单。</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;components&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lodash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4.17.21&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;license&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MIT&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="镜像扫描" tabindex="-1">镜像扫描 <a class="header-anchor" href="#镜像扫描" aria-label="Permalink to &quot;镜像扫描&quot;">​</a></h4><p>自动检测Docker镜像中的安全漏洞、恶意代码、配置错误。</p><p>工具：Trivy, Clair</p><h3 id="_7-2-安全测试" tabindex="-1">7.2 安全测试 <a class="header-anchor" href="#_7-2-安全测试" aria-label="Permalink to &quot;7.2 安全测试&quot;">​</a></h3><table tabindex="0"><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>SAST</td><td>静态代码分析</td></tr><tr><td>DAST</td><td>动态应用安全测试</td></tr><tr><td>IAST</td><td>交互式应用安全测试</td></tr><tr><td>SCA</td><td>软件成分分析</td></tr></tbody></table><h3 id="_7-3-镜像签名-cosign" tabindex="-1">7.3 镜像签名（Cosign） <a class="header-anchor" href="#_7-3-镜像签名-cosign" aria-label="Permalink to &quot;7.3 镜像签名（Cosign）&quot;">​</a></h3><p>确保只有经过签名验证的镜像才能部署到生产环境。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 签名镜像</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cosign</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sign</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cosign.key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myregistry/myimage:v1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 验证签名</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cosign</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verify</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cosign.pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myregistry/myimage:v1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr><h2 id="八、关键性能指标" tabindex="-1">八、关键性能指标 <a class="header-anchor" href="#八、关键性能指标" aria-label="Permalink to &quot;八、关键性能指标&quot;">​</a></h2><h3 id="_8-1-性能指标" tabindex="-1">8.1 性能指标 <a class="header-anchor" href="#_8-1-性能指标" aria-label="Permalink to &quot;8.1 性能指标&quot;">​</a></h3><table tabindex="0"><thead><tr><th>指标</th><th>定义</th><th>目标值</th></tr></thead><tbody><tr><td>TTFB</td><td>首字节时间</td><td>≤200ms</td></tr><tr><td>P95延迟</td><td>95%请求响应时间</td><td>≤150ms</td></tr><tr><td>P99延迟</td><td>99%请求响应时间</td><td>≤300ms</td></tr><tr><td>QPS</td><td>每秒查询数</td><td>根据业务定</td></tr></tbody></table><h3 id="_8-2-可用性指标" tabindex="-1">8.2 可用性指标 <a class="header-anchor" href="#_8-2-可用性指标" aria-label="Permalink to &quot;8.2 可用性指标&quot;">​</a></h3><table tabindex="0"><thead><tr><th>指标</th><th>定义</th><th>目标值</th></tr></thead><tbody><tr><td>SLA</td><td>服务等级协议</td><td>≥99.95%</td></tr><tr><td>SLO</td><td>服务等级目标</td><td>内部细化目标</td></tr><tr><td>MTTR</td><td>平均恢复时间</td><td>≤5分钟</td></tr><tr><td>MTBF</td><td>平均故障间隔</td><td>越长越好</td></tr></tbody></table><h3 id="_8-3-可用性换算" tabindex="-1">8.3 可用性换算 <a class="header-anchor" href="#_8-3-可用性换算" aria-label="Permalink to &quot;8.3 可用性换算&quot;">​</a></h3><table tabindex="0"><thead><tr><th>可用性</th><th>年停机时间</th></tr></thead><tbody><tr><td>99.9%</td><td>8.76小时</td></tr><tr><td>99.95%</td><td>4.38小时</td></tr><tr><td>99.99%</td><td>52.56分钟</td></tr><tr><td>99.999%</td><td>5.26分钟</td></tr></tbody></table>`,107)]))}const b=a(t,[["render",l]]);export{c as __pageData,b as default};

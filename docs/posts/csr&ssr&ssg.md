# CSR、SSR和SSG的联系和区别

> [现代前端框架的渲染模式](./renderMode.md)

## CSR

**传统csr模式下，页面的加载过程设计以下：**

1. 使用打包插件(webpack、vite)将业务代码打包成html、js和css文件，放在服务器的指定目录下。
2. 浏览器请求html、js和css文件。
3. 浏览器解析html文件，此时html只包含一个含`<div id="root"></div>`的dom，此时需要执行js渲染整个dom。


**弊端：**

1. 由于页面显示过程要进行JS文件拉取和React代码执行，首屏加载时间会比较慢。
2. 对于SEO(Search Engine Optimazition,即搜索引擎优化)，完全无能为力，因为搜索引擎爬虫只认识html结构的内容，而不能识别JS代码内容。

## SSR

> 由于csr下，请求的html仅包含一个根节点，首屏加载白屏时间长，SEO不友好，所以ssr要解决的就是提前生成完整的html，保证首屏加载。

**ssr模式下，页面的加载过程设计以下：**

1. 服务器运行一个node环境，对应的资源通过next或者react-ssr编写的业务代码，执行在node环境。
2. 浏览器生请求对应资源，服务器接收到请求之后，实时运行业务代码jsx，并将jsx生成为html并返回给浏览器。
3. 此时的html已经包含页面的所有内容，此时不需要执行js渲染整个dom，首屏即可查看内容，首屏加载时间会比较快。
4. 加载完html之后，还需要执行react对应的js文件进行水合，挂载一些IO事件，进行二次执行，这个过程是非常快的，进行对比更新。


**弊端：**
1. 由于服务器运行node环境，需要部署服务器，成本较高。
2. 占用服务器资源，渲染工作都在服务端渲染。

## SSG

> ssg结合了ssr和csr的优点，利用服务端渲染，在编译阶段就生成完整的html，首屏加载快，SEO友好，并且服务端仅存放编译后的静态资源，不需要服务端实时生成html，减少了服务器压力。

**ssg模式下，页面的加载过程设计以下：**

1. 在打包编译阶段生成完成的html文件、js文件以及css文件，放在服务器指定目录下，故对应的代码执行在node环境下。
2. 浏览器请求html、js和css文件，此时html已经包含页面的所有内容，此时不需要执行js渲染整个dom，首屏即可查看内容，首屏加载时间会比较快。
3. 加载完html之后，还需要执行react对应的js文件进行水合，挂载一些IO事件，进行二次执行，这个过程是非常快的，进行对比更新。




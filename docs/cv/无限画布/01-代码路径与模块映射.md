# æ— é™ç”»å¸ƒ - ä»£ç è·¯å¾„ä¸Žæ¨¡å—æ˜ å°„

> æœ¬æ–‡æ¡£è¯¦ç»†åˆ—å‡ºæ— é™ç”»å¸ƒç›¸å…³çš„æ‰€æœ‰ä»£ç æ¨¡å—åŠå…¶è·¯å¾„ï¼Œæ–¹ä¾¿å¿«é€Ÿå®šä½å’ŒæŸ¥é˜…ã€‚

---

## ðŸ“¦ æ ¸å¿ƒåŒ…æ¦‚è§ˆ

ç¼–è¾‘å™¨ä»£ç ä¸»è¦åˆ†å¸ƒåœ¨ä»¥ä¸‹ç›®å½•ï¼š

```
domains/editor/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ editor/          â† æ ¸å¿ƒç¼–è¾‘å™¨å¼•æ“Žï¼ˆæœ€é‡è¦ï¼‰
â”‚   â”œâ”€â”€ design/          â† è®¾è®¡ä¸šåŠ¡å±‚
â”‚   â”œâ”€â”€ common/          â† é€šç”¨å·¥å…·åº“
â”‚   â”œâ”€â”€ ai/              â† AI ç›¸å…³åŠŸèƒ½
â”‚   â”œâ”€â”€ mobile/          â† ç§»åŠ¨ç«¯é€‚é…
â”‚   â””â”€â”€ foundations/     â† åŸºåº§å±‚
â”œâ”€â”€ extensions/          â† æ‰©å±•æ’ä»¶
â”œâ”€â”€ apps/                â† åº”ç”¨å…¥å£
â””â”€â”€ third-party/         â† ç¬¬ä¸‰æ–¹åº“
```

---

## ðŸŽ¯ æ— é™ç”»å¸ƒæ ¸å¿ƒæ¨¡å—

### 1. infinite-rendererï¼ˆæ¸²æŸ“æ ¸å¿ƒï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/infinite-renderer/`
> 
> èŒè´£ï¼šæ— é™ç”»å¸ƒçš„æ¸²æŸ“å¼•æ“Žæ ¸å¿ƒï¼Œè´Ÿè´£å°†æ•°æ®æ¨¡åž‹è½¬æ¢ä¸º PixiJS å¯æ¸²æŸ“å¯¹è±¡

```
infinite-renderer/src/
â”œâ”€â”€ viewport/                     # è§†å£ç®¡ç†
â”‚   â”œâ”€â”€ viewport.ts              # Viewport æ ¸å¿ƒç±»
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ surfaces/                     # ç”»å¸ƒè¡¨é¢å±‚
â”‚   â”œâ”€â”€ surface.ts               # Surface æŠ½è±¡åŸºç±» â­
â”‚   â”œâ”€â”€ board-surface.ts         # æ— é™ç”»å¸ƒæ¨¡å¼
â”‚   â”œâ”€â”€ poster-surface.ts        # æµ·æŠ¥æ¨¡å¼
â”‚   â”œâ”€â”€ flow-surface.ts          # é•¿å›¾æ¨¡å¼
â”‚   â”œâ”€â”€ event-boundary.ts        # äº‹ä»¶è¾¹ç•Œ/ç¢°æ’žæ£€æµ‹ â­
â”‚   â””â”€â”€ processors/              # å¤„ç†å™¨
â”‚       â”œâ”€â”€ processor.ts         # Processor æŠ½è±¡åŸºç±»
â”‚       â”œâ”€â”€ board-processor.ts   # ç™½æ¿å¤„ç†å™¨
â”‚       â””â”€â”€ poster-processor.ts  # æµ·æŠ¥å¤„ç†å™¨
â”‚
â”œâ”€â”€ vm-engine/                    # è§†å›¾æ¨¡åž‹å¼•æ“Ž
â”‚   â”œâ”€â”€ vm-engine.ts             # VmEngine æ ¸å¿ƒç±» â­
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ vms/                          # è§†å›¾æ¨¡åž‹ï¼ˆ30+ ç§å…ƒç´ ï¼‰
â”‚   â”œâ”€â”€ base/                    # åŸºç±»
â”‚   â”‚   â”œâ”€â”€ base-vm.ts           # æœ€åŸºç¡€çš„ VM
â”‚   â”‚   â”œâ”€â”€ base-container-vm.ts # å®¹å™¨åŸºç±»
â”‚   â”‚   â”œâ”€â”€ base-element-vm.ts   # å…ƒç´ åŸºç±» â­
â”‚   â”‚   â”œâ”€â”€ base-group-element-vm.ts
â”‚   â”‚   â”œâ”€â”€ graphics-element-vm.ts
â”‚   â”‚   â”œâ”€â”€ watermark-vm.ts      # æ°´å°
â”‚   â”‚   â””â”€â”€ image/               # å›¾ç‰‡ç›¸å…³
â”‚   â”‚       â”œâ”€â”€ base-image-vm.ts
â”‚   â”‚       â”œâ”€â”€ image-content-vm.ts
â”‚   â”‚       â”œâ”€â”€ dynamic-image.ts
â”‚   â”‚       â””â”€â”€ gpu-blender/     # GPU æ··åˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ page/                    # é¡µé¢
â”‚   â”‚   â””â”€â”€ page-vm.ts           # PageVm â­
â”‚   â”‚
â”‚   â”œâ”€â”€ layout/                  # ç”»æ¿
â”‚   â”‚   â”œâ”€â”€ layout-vm.ts         # LayoutVm
â”‚   â”‚   â”œâ”€â”€ layout-layer.ts
â”‚   â”‚   â””â”€â”€ layout-background.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ image/                   # å›¾ç‰‡å…ƒç´ 
â”‚   â”‚   â”œâ”€â”€ image-vm.ts          # ImageVm
â”‚   â”‚   â”œâ”€â”€ mask-vm.ts           # è’™ç‰ˆ
â”‚   â”‚   â””â”€â”€ canvas-mask-vm.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ text/                    # æ–‡æœ¬å…ƒç´ 
â”‚   â”‚   â”œâ”€â”€ text-vm.ts           # TextVm
â”‚   â”‚   â””â”€â”€ text-sprite.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ shape/                   # å½¢çŠ¶å…ƒç´ 
â”‚   â”‚   â””â”€â”€ shape-vm.ts          # ShapeVm
â”‚   â”‚
â”‚   â”œâ”€â”€ path/                    # è·¯å¾„å…ƒç´ 
â”‚   â”‚   â””â”€â”€ path-vm.ts           # PathVm
â”‚   â”‚
â”‚   â”œâ”€â”€ svg/                     # SVG å…ƒç´ 
â”‚   â”‚   â””â”€â”€ svg-vm.ts            # SvgVm
â”‚   â”‚
â”‚   â”œâ”€â”€ group/                   # ç»„å…ƒç´ 
â”‚   â”‚   â””â”€â”€ group-vm.ts          # GroupVm
â”‚   â”‚
â”‚   â”œâ”€â”€ connector/               # è¿žæŽ¥çº¿
â”‚   â”‚   â””â”€â”€ connector-vm.ts      # ConnectorVm
â”‚   â”‚
â”‚   â”œâ”€â”€ table/                   # è¡¨æ ¼
â”‚   â”‚   â””â”€â”€ table-vm.ts          # TableVm
â”‚   â”‚
â”‚   â”œâ”€â”€ video/                   # è§†é¢‘
â”‚   â”‚   â””â”€â”€ video-vm.ts          # VideoVm
â”‚   â”‚
â”‚   â”œâ”€â”€ chart/                   # å›¾è¡¨
â”‚   â”‚   â””â”€â”€ chart-vm.ts          # ChartVm
â”‚   â”‚
â”‚   â”œâ”€â”€ magnifier/               # æ”¾å¤§é•œ
â”‚   â”‚   â””â”€â”€ magnifier-vm.ts      # MagnifierVm
â”‚   â”‚
â”‚   â”œâ”€â”€ three-text/              # 3D æ–‡å­—
â”‚   â”‚   â””â”€â”€ three-text-vm.ts     # ThreeTextVm
â”‚   â”‚
â”‚   â”œâ”€â”€ effect-text/             # ç‰¹æ•ˆæ–‡å­—
â”‚   â”‚   â””â”€â”€ effect-text-vm.ts    # EffectTextVm
â”‚   â”‚
â”‚   â”œâ”€â”€ magic-brush/             # é­”æ³•ç”»ç¬”
â”‚   â”‚   â””â”€â”€ magic-brush-vm.ts    # MagicBrushVm
â”‚   â”‚
â”‚   â””â”€â”€ fallback/                # é™çº§å¤„ç†
â”‚       â””â”€â”€ fallback-vm.ts       # FallbackVm
â”‚
â”œâ”€â”€ common/                       # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ transform.ts             # çŸ©é˜µå˜æ¢ â­
â”‚   â”œâ”€â”€ hit-test.ts              # ç¢°æ’žæ£€æµ‹
â”‚   â”œâ”€â”€ anchors.ts               # é”šç‚¹è®¡ç®—
â”‚   â”œâ”€â”€ anchor-points.ts         # é”šç‚¹æ•°æ®
â”‚   â””â”€â”€ aspects/                 # åˆ‡é¢
â”‚       â”œâ”€â”€ tap.ts
â”‚       â”œâ”€â”€ prefer-image.ts
â”‚       â””â”€â”€ hidden-on-editing.ts
â”‚
â”œâ”€â”€ context/                      # ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ context.ts               # Context ç±»
â”‚   â”œâ”€â”€ texture-reuse.ts         # çº¹ç†å¤ç”¨
â”‚   â””â”€â”€ adaptor/
â”‚       â””â”€â”€ model-adaptor.ts
â”‚
â”œâ”€â”€ extractor/                    # å¯¼å‡ºå™¨
â”‚   â”œâ”€â”€ extractor.ts             # Extractor
â”‚   â”œâ”€â”€ picker.ts                # Picker
â”‚   â””â”€â”€ helpers.ts
â”‚
â”œâ”€â”€ plugins/                      # æ¸²æŸ“æ’ä»¶
â”‚   â”œâ”€â”€ plugin-system.ts         # æ’ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ background/              # èƒŒæ™¯æ’ä»¶
â”‚
â”œâ”€â”€ extends/                      # æ‰©å±•ç±»
â”‚   â”œâ”€â”€ async-sprite.ts          # å¼‚æ­¥ç²¾çµ
â”‚   â”œâ”€â”€ canvas-sprite.ts         # Canvas ç²¾çµ
â”‚   â”œâ”€â”€ dynamic-sprite.ts        # åŠ¨æ€ç²¾çµ
â”‚   â”œâ”€â”€ oriented-rectangle.ts    # æœ‰å‘çŸ©å½¢
â”‚   â””â”€â”€ safe-sprite.ts           # å®‰å…¨ç²¾çµ
â”‚
â”œâ”€â”€ types/                        # ç±»åž‹å®šä¹‰
â”‚   â”œâ”€â”€ surface.ts
â”‚   â”œâ”€â”€ viewport.ts
â”‚   â”œâ”€â”€ element-vm.ts
â”‚   â”œâ”€â”€ event-boundary.ts
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ utils/                        # å·¥å…·å‡½æ•°
    â”œâ”€â”€ bounds.ts                # åŒ…å›´ç›’è®¡ç®—
    â”œâ”€â”€ math.ts                  # æ•°å­¦å·¥å…·
    â””â”€â”€ unique-id.ts             # ID ç”Ÿæˆ
```

---

### 2. infinite-pluginsï¼ˆæ¸²æŸ“æ’ä»¶ï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/infinite-plugins/`
>
> èŒè´£ï¼šæä¾› 40+ ä¸ªæ¸²æŸ“å±‚æ’ä»¶ï¼Œæ‰©å±•ç”»å¸ƒåŠŸèƒ½

```
infinite-plugins/src/plugins/
â”œâ”€â”€ viewport-plugin/              # è§†å£æŽ§åˆ¶ â­
â”‚   â”œâ”€â”€ viewport-plugin.tsx      # æ’ä»¶å…¥å£
â”‚   â”œâ”€â”€ commands/
â”‚   â”‚   â”œâ”€â”€ zoom.ts              # ç¼©æ”¾å‘½ä»¤ â­
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ hooks/
â”‚       â”œâ”€â”€ use-viewport.ts      # è§†å£çŠ¶æ€
â”‚       â””â”€â”€ use-gesture.ts       # æ‰‹åŠ¿å¤„ç† â­
â”‚
â”œâ”€â”€ guide-plugin/                 # å¯¹é½å‚è€ƒçº¿
â”‚   â””â”€â”€ guide-plugin.ts
â”‚
â”œâ”€â”€ ruler-plugin/                 # æ ‡å°º
â”‚   â””â”€â”€ ruler-plugin.ts
â”‚
â”œâ”€â”€ hand-plugin/                  # æŠ“æ‰‹å·¥å…·
â”‚   â””â”€â”€ hand-plugin.ts
â”‚
â”œâ”€â”€ hover-plugin/                 # æ‚¬åœæ•ˆæžœ
â”‚   â””â”€â”€ hover-plugin.ts
â”‚
â”œâ”€â”€ highlight-plugin/             # é«˜äº®æ•ˆæžœ
â”‚   â””â”€â”€ highlight-plugin.ts
â”‚
â”œâ”€â”€ outline-plugin/               # è½®å»“çº¿
â”‚   â””â”€â”€ outline-plugin.ts
â”‚
â”œâ”€â”€ transform-plugin/             # å…ƒç´ å˜æ¢
â”‚   â””â”€â”€ transform-plugin.ts
â”‚
â”œâ”€â”€ scrollbar-plugin/             # æ»šåŠ¨æ¡
â”‚   â””â”€â”€ scrollbar-plugin.ts
â”‚
â”œâ”€â”€ connector-plugin/             # è¿žæŽ¥çº¿
â”‚   â””â”€â”€ connector-plugin.ts
â”‚
â”œâ”€â”€ magic-brush/                  # é­”æ³•ç”»ç¬”
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ mosaic-plugin/                # é©¬èµ›å…‹
â”‚   â””â”€â”€ mosaic-plugin.ts
â”‚
â”œâ”€â”€ animation-plugin/             # åŠ¨ç”»
â”‚   â””â”€â”€ animation-plugin.ts
â”‚
â”œâ”€â”€ auto-scroll-plugin/           # è‡ªåŠ¨æ»šåŠ¨
â”‚   â””â”€â”€ auto-scroll-plugin.ts
â”‚
â”œâ”€â”€ bin-packing-plugin/           # è‡ªåŠ¨æŽ’ç‰ˆ
â”‚   â””â”€â”€ bin-packing-plugin.ts
â”‚
â”œâ”€â”€ hit-test-plugin/              # ç¢°æ’žæµ‹è¯•
â”‚   â””â”€â”€ hit-test-plugin.ts
â”‚
â”œâ”€â”€ loader-plugin/                # åŠ è½½å™¨
â”‚   â””â”€â”€ loader-plugin.ts
â”‚
â”œâ”€â”€ metrics-plugin/               # åº¦é‡
â”‚   â””â”€â”€ metrics-plugin.ts
â”‚
â””â”€â”€ ... (æ›´å¤šæ’ä»¶)
```

---

### 3. infinite-elementsï¼ˆå…ƒç´ æœåŠ¡ï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/infinite-elements/`
>
> èŒè´£ï¼šå„ç±»å…ƒç´ çš„ä¸šåŠ¡é€»è¾‘å’Œ Vue æ¸²æŸ“ç»„ä»¶

```
infinite-elements/src/
â”œâ”€â”€ renderer.ts                   # æ¸²æŸ“å™¨å…¥å£
â”œâ”€â”€ page/                         # é¡µé¢
â”‚   â”œâ”€â”€ service.ts
â”‚   â”œâ”€â”€ renderer.tsx
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ container.vue        # æ— é™ç”»å¸ƒå®¹å™¨
â”‚
â”œâ”€â”€ layout/                       # ç”»æ¿
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ image/                        # å›¾ç‰‡
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ text/                         # æ–‡æœ¬
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ shape/                        # å½¢çŠ¶
â”‚   â”œâ”€â”€ service.ts
â”‚   â”œâ”€â”€ renderer.ts
â”‚   â””â”€â”€ shape-text-editor/
â”‚
â”œâ”€â”€ path/                         # è·¯å¾„
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ svg/                          # SVG
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ group/                        # ç»„
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ table/                        # è¡¨æ ¼
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ renderer.ts
â”‚
â”œâ”€â”€ connector/                    # è¿žæŽ¥çº¿
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ utils.ts
â”‚
â”œâ”€â”€ video/                        # è§†é¢‘
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ magnifier/                    # æ”¾å¤§é•œ
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ render.ts
â”‚
â”œâ”€â”€ magic-brush/                  # é­”æ³•ç”»ç¬”
â”‚   â”œâ”€â”€ service.ts
â”‚   â””â”€â”€ renderer.ts
â”‚
â””â”€â”€ ... (æ›´å¤šå…ƒç´ )
```

---

### 4. frameworkï¼ˆç¼–è¾‘å™¨æ¡†æž¶ï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/framework/`
>
> èŒè´£ï¼šç¼–è¾‘å™¨æ ¸å¿ƒæ¡†æž¶ï¼ŒåŒ…æ‹¬æ’ä»¶ç³»ç»Ÿã€æœåŠ¡ç³»ç»Ÿã€è§†å£ç®¡ç†

```
framework/src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ framework/               # æ¡†æž¶æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ framework.ts         # æ¡†æž¶ç±»
â”‚   â”‚   â””â”€â”€ create.ts            # åˆ›å»ºç¼–è¾‘å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ viewport/                # è§†å£ç®¡ç†
â”‚   â”‚   â””â”€â”€ viewport.ts          # Viewport ç±» â­
â”‚   â”‚
â”‚   â”œâ”€â”€ plugin/                  # æ’ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ plugin-manager.ts    # æ’ä»¶ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ define.ts            # æ’ä»¶å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ service/                 # æœåŠ¡ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ service-manager.ts   # æœåŠ¡ç®¡ç†å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ renderer/                # æ¸²æŸ“ç®¡ç†
â”‚   â”‚   â””â”€â”€ renderer-manager.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ y-model/                 # Yjs ååŒ
â”‚   â”‚   â”œâ”€â”€ binding.ts
â”‚   â”‚   â””â”€â”€ apply-yjs.ts
â”‚   â”‚
â”‚   â””â”€â”€ methods/                 # ç¼–è¾‘å™¨æ–¹æ³•
â”‚       â”œâ”€â”€ element/             # å…ƒç´ æ“ä½œ
â”‚       â”‚   â”œâ”€â”€ element.ts
â”‚       â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ page.ts              # é¡µé¢æ“ä½œ
â”‚       â”œâ”€â”€ snapshot.ts          # å¿«ç…§
â”‚       â””â”€â”€ data-binding/        # æ•°æ®ç»‘å®š
â”‚
â”œâ”€â”€ containers/                   # å®¹å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ editor-infinite.tsx      # æ— é™ç”»å¸ƒå®¹å™¨ â­
â”‚   â”œâ”€â”€ editor-canvas.tsx        # Canvas å®¹å™¨
â”‚   â””â”€â”€ editor-flow.tsx          # é•¿å›¾å®¹å™¨
â”‚
â”œâ”€â”€ editor/                       # ç¼–è¾‘å™¨å…¥å£
â”‚   â””â”€â”€ editor.js
â”‚
â””â”€â”€ utils/                        # å·¥å…·å‡½æ•°
    â”œâ”€â”€ transform.js             # å˜æ¢å·¥å…·
    â”œâ”€â”€ resize.ts                # å°ºå¯¸è°ƒæ•´
    â””â”€â”€ ...
```

---

### 5. modelsï¼ˆæ•°æ®æ¨¡åž‹ï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/models/`
>
> èŒè´£ï¼šå®šä¹‰ç¼–è¾‘å™¨çš„æ•°æ®æ¨¡åž‹ç±»

```
models/src/
â”œâ”€â”€ base/
â”‚   â”œâ”€â”€ base-element-model.ts    # å…ƒç´ åŸºç±»
â”‚   â”œâ”€â”€ group-base-element-model.ts
â”‚   â””â”€â”€ page-base-model.ts       # é¡µé¢åŸºç±»
â”‚
â”œâ”€â”€ elements/
â”‚   â”œâ”€â”€ image-element-model.ts   # å›¾ç‰‡æ¨¡åž‹
â”‚   â”œâ”€â”€ text-element-model.ts    # æ–‡æœ¬æ¨¡åž‹
â”‚   â”œâ”€â”€ shape-element-model.ts   # å½¢çŠ¶æ¨¡åž‹
â”‚   â”œâ”€â”€ path-element-model.ts    # è·¯å¾„æ¨¡åž‹
â”‚   â”œâ”€â”€ group-element-model.ts   # ç»„æ¨¡åž‹
â”‚   â”œâ”€â”€ layout-model.ts          # ç”»æ¿æ¨¡åž‹
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ page/
    â””â”€â”€ page-model.ts            # é¡µé¢æ¨¡åž‹
```

---

### 6. pluginsï¼ˆä¸šåŠ¡æ’ä»¶ï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/plugins/`
>
> èŒè´£ï¼šç¼–è¾‘å™¨ä¸šåŠ¡å±‚æ’ä»¶

```
plugins/src/
â”œâ”€â”€ edit-mode-plugin/            # ç¼–è¾‘æ¨¡å¼
â”œâ”€â”€ resize-plugin/               # å°ºå¯¸è°ƒæ•´
â”œâ”€â”€ rotate-plugin/               # æ—‹è½¬
â”œâ”€â”€ drag-plugin/                 # æ‹–æ‹½
â”œâ”€â”€ copy-paste-plugin/           # å¤åˆ¶ç²˜è´´
â”œâ”€â”€ undo-redo-plugin/            # æ’¤é”€é‡åš
â”œâ”€â”€ selection-plugin/            # é€‰æ‹©
â”œâ”€â”€ align-plugin/                # å¯¹é½
â”œâ”€â”€ layer-plugin/                # å›¾å±‚
â”œâ”€â”€ lock-plugin/                 # é”å®š
â”œâ”€â”€ group-plugin/                # æˆç»„
â”œâ”€â”€ crop-plugin/                 # è£å‰ª
â”œâ”€â”€ mask-plugin/                 # è’™ç‰ˆ
â””â”€â”€ ...
```

---

### 7. utilsï¼ˆå·¥å…·åº“ï¼‰

> è·¯å¾„ï¼š`domains/editor/packages/editor/utils/`
>
> èŒè´£ï¼šé€šç”¨å·¥å…·å‡½æ•°

```
utils/src/
â”œâ”€â”€ math/                        # æ•°å­¦å·¥å…·
â”‚   â”œâ”€â”€ matrix.ts               # çŸ©é˜µè¿ç®—
â”‚   â”œâ”€â”€ vector.ts               # å‘é‡è¿ç®—
â”‚   â””â”€â”€ geometry.ts             # å‡ ä½•è®¡ç®—
â”‚
â”œâ”€â”€ animation/                   # åŠ¨ç”»å·¥å…·
â”‚   â””â”€â”€ animate.ts              # åŠ¨ç”»å‡½æ•°
â”‚
â”œâ”€â”€ lru-cache/                   # LRU ç¼“å­˜
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ image/                       # å›¾ç‰‡å·¥å…·
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ ...
```

---

## ðŸ”— å…¶ä»–ç›¸å…³æ¨¡å—

### design åŒ…ï¼ˆè®¾è®¡ä¸šåŠ¡å±‚ï¼‰

```
packages/design/
â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â””â”€â”€ content-version/         # å†…å®¹ç‰ˆæœ¬
â”‚       â””â”€â”€ worker/              # Worker ååŒ
â”‚
â”œâ”€â”€ business-ui/                 # ä¸šåŠ¡ UI ç»„ä»¶
â”‚   â””â”€â”€ src/compositions/        # ç»„åˆå¼å‡½æ•°
â”‚
â”œâ”€â”€ ai-chat-vue/                 # AI å¯¹è¯ï¼ˆVueï¼‰
â”œâ”€â”€ ai-chat-react/               # AI å¯¹è¯ï¼ˆReactï¼‰
â””â”€â”€ ...
```

### common åŒ…ï¼ˆé€šç”¨åº“ï¼‰

```
packages/common/
â”œâ”€â”€ resource-manager/            # èµ„æºç®¡ç†
â”‚   â””â”€â”€ src/browser/worker/      # Worker æ± 
â”‚       â”œâ”€â”€ image-bitmap-worker-manager.ts  â­
â”‚       â””â”€â”€ image-bitmap-worker.ts
â”‚
â”œâ”€â”€ drawing-masks/               # ç»˜å›¾è’™ç‰ˆ
â”‚   â””â”€â”€ src/utils/canvas.ts      # Canvas å·¥å…·
â”‚
â”œâ”€â”€ logs/                        # æ—¥å¿—ç³»ç»Ÿ
â”œâ”€â”€ lru-cache/                   # LRU ç¼“å­˜
â”œâ”€â”€ scheduler/                   # è°ƒåº¦å™¨
â””â”€â”€ ...
```

---

## ðŸ“Š åŠŸèƒ½-ä»£ç æ˜ å°„è¡¨

| åŠŸèƒ½ | æ ¸å¿ƒæ–‡ä»¶ | åŒ…å |
|-----|---------|------|
| **è§†å£ç¼©æ”¾** | `viewport-plugin/commands/zoom.ts` | `@editor/infinite-plugins` |
| **æ‰‹åŠ¿å¤„ç†** | `viewport-plugin/hooks/use-gesture.ts` | `@editor/infinite-plugins` |
| **è§†å£ç®¡ç†** | `framework/src/core/viewport/viewport.ts` | `@editor/framework` |
| **ç”»å¸ƒè¡¨é¢** | `infinite-renderer/src/surfaces/surface.ts` | `@editor/infinite-renderer` |
| **ç¢°æ’žæ£€æµ‹** | `infinite-renderer/src/surfaces/event-boundary.ts` | `@editor/infinite-renderer` |
| **è§†å›¾å¼•æ“Ž** | `infinite-renderer/src/vm-engine/vm-engine.ts` | `@editor/infinite-renderer` |
| **å…ƒç´ åŸºç±»** | `infinite-renderer/src/vms/base/base-element-vm.ts` | `@editor/infinite-renderer` |
| **çŸ©é˜µå˜æ¢** | `infinite-renderer/src/common/transform.ts` | `@editor/infinite-renderer` |
| **é¡µé¢ VM** | `infinite-renderer/src/vms/page/page-vm.ts` | `@editor/infinite-renderer` |
| **å›¾ç‰‡ VM** | `infinite-renderer/src/vms/image/image-vm.ts` | `@editor/infinite-renderer` |
| **æ–‡æœ¬ VM** | `infinite-renderer/src/vms/text/text-vm.ts` | `@editor/infinite-renderer` |
| **è¿žæŽ¥çº¿ VM** | `infinite-renderer/src/vms/connector/connector-vm.ts` | `@editor/infinite-renderer` |
| **æ”¾å¤§é•œ VM** | `infinite-renderer/src/vms/magnifier/magnifier-vm.ts` | `@editor/infinite-renderer` |
| **å¯¹é½å‚è€ƒçº¿** | `infinite-plugins/src/plugins/guide-plugin/` | `@editor/infinite-plugins` |
| **æ ‡å°º** | `infinite-plugins/src/plugins/ruler-plugin/` | `@editor/infinite-plugins` |
| **æŠ“æ‰‹å·¥å…·** | `infinite-plugins/src/plugins/hand-plugin/` | `@editor/infinite-plugins` |
| **è½®å»“çº¿** | `infinite-plugins/src/plugins/outline-plugin/` | `@editor/infinite-plugins` |
| **çº¹ç†å¤ç”¨** | `infinite-renderer/src/context/texture-reuse.ts` | `@editor/infinite-renderer` |
| **å›¾ç‰‡å¯¼å‡º** | `infinite-renderer/src/extractor/extractor.ts` | `@editor/infinite-renderer` |
| **Worker æ± ** | `resource-manager/src/browser/worker/` | `@editor/resource-manager` |
| **åŠ¨ç”»ç³»ç»Ÿ** | `utils/src/animation/animate.ts` | `@editor/utils` |

---

## ðŸ·ï¸ åŒ…åä¸Žè·¯å¾„å¯¹ç…§

| npm åŒ…å | æºç è·¯å¾„ |
|---------|---------|
| `@editor/infinite-renderer` | `packages/editor/infinite-renderer/` |
| `@editor/infinite-plugins` | `packages/editor/infinite-plugins/` |
| `@editor/infinite-elements` | `packages/editor/infinite-elements/` |
| `@editor/framework` | `packages/editor/framework/` |
| `@editor/models` | `packages/editor/models/` |
| `@editor/plugins` | `packages/editor/plugins/` |
| `@editor/utils` | `packages/editor/utils/` |
| `@editor/events` | `packages/editor/events/` |
| `@design/types` | `packages/design/types/` |
| `@design/services` | `packages/design/services/` |
| `@editor/resource-manager` | `packages/common/resource-manager/` |

---

## ðŸŽ¨ æ¸²æŸ“å¼•æ“Žä¾èµ–

```
@piso/piso-js          â† PixiJS å®šåˆ¶ç‰ˆï¼ˆæ ¸å¿ƒæ¸²æŸ“å¼•æ“Žï¼‰
â”œâ”€â”€ @piso/core         â† æ ¸å¿ƒæ¨¡å—ï¼ˆTexture, Matrix, Point ç­‰ï¼‰
â”œâ”€â”€ @piso/display      â† æ˜¾ç¤ºæ¨¡å—ï¼ˆContainer, DisplayObjectï¼‰
â”œâ”€â”€ @piso/graphics     â† å›¾å½¢æ¨¡å—ï¼ˆGraphicsï¼‰
â”œâ”€â”€ @piso/sprite       â† ç²¾çµæ¨¡å—ï¼ˆSpriteï¼‰
â”œâ”€â”€ @piso/math         â† æ•°å­¦æ¨¡å—ï¼ˆRectangle, Polygonï¼‰
â””â”€â”€ @piso/app          â† åº”ç”¨æ¨¡å—ï¼ˆApplicationï¼‰
```

---

## ðŸ“ å¿«é€Ÿå®šä½æŠ€å·§

1. **æ‰¾è§†å£ç›¸å…³ä»£ç **ï¼šæœç´¢ `viewport`ã€`zoom`ã€`pan`
2. **æ‰¾å…ƒç´ æ¸²æŸ“ä»£ç **ï¼šåœ¨ `infinite-renderer/src/vms/` ä¸‹æ‰¾å¯¹åº”å…ƒç´ 
3. **æ‰¾ç¢°æ’žæ£€æµ‹ä»£ç **ï¼š`event-boundary.ts`ã€`hit-test.ts`
4. **æ‰¾åæ ‡è½¬æ¢ä»£ç **ï¼š`transform.ts`ã€`getLocalPoint`ã€`getGlobalPoint`
5. **æ‰¾æ’ä»¶ä»£ç **ï¼š`infinite-plugins/src/plugins/` ä¸‹æŒ‰åŠŸèƒ½åæ‰¾

---

> ðŸ“… æ›´æ–°æ—¶é—´ï¼š2026-01-27

# 第 1章 计算机网络体系结构

## 计算机网络概述

### 计算机网络的概念

计算机网络是一个将众多分散的、自治的计算机系统，通过通信设备与线路连接 起来，由功能完善的软件实现资源共享和信息传递的系统。

计算机网络 (简称网络)由若干结点(node，或译为节点)和连接这些结点的链路 (link) 组成。

### 计算机网络的组成

1. **从组成部分看**

计算机网络主要由硬件、软件、协议 三大部分组成。

2. **从工作方式看**

计算机网络(这里主要指Internet，即互联网)可分为边缘部分和核心部分。边缘部分由所有连接到互联网上的供用户直接使用的主机组成，用来进行通信(如传输数据、音频或视频)和资源共享;核心部分由大量网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。

3. **从功能组成看**

 计算机网络由通信子网（下三层）和资源子网（上三层）组成。


### 计算机网络的功能

1. 数据通信

2. 資源共享

3. 分布式处理

4. 提高可靠性

5. 负载均衡


### 电路交换、报文交换与分组交换

1. **电路交换**

电路交换分为三步:连接建立、数据传输和连接释放。 在进行数据传输前，两个结点之间必须先建立 一条专用 (双方独占)的物理通信路径 (由通信双 方之间的交换设备和链路逐段连接而成)，该路径可能经过许多中间结点。

优点：

1️⃣ 通信时延小。因为通信线路为通信双方专用，数据直达，所以传输时延非常小。

2️⃣ 有序传输。双方通信时按发送顺序传送数据，不存在失序问题。

3️⃣ 没有冲 突。不同的通信双方拥有不同的信道，不会出现争用物理信道的问题。

4️⃣ 适用范围广。电路交换既适用于传输模拟信号，又适用于传输数字信号。

5️⃣ 实时性强。通信双方之间的物理通路 一旦建立，双方就可随时通信。

6️⃣ 控制简单。电路交换的交换设备 (交换机等)及控制均较简单。


缺点： 

1️⃣ 建立连接时间长。电路交换的平均连接建立时间对计算机通信来说太长。

2️⃣ 线路利用率低。物理通路被通信双方独占，即使线路空闲，也不能供其他用户使用。 

3️⃣ 灵活性差。物理通路中的任何 一点出现故障，就必须重新拨号建立新的连接。 

4️⃣ 难以规格化。不同类型、不同规格、不同速率的终端很难相互进行通信。

5️⃣ 难以实现差错控制。中间结点不具备存储和检验数据的能力，无法发现并纠正错误。

2. **报文交换**

数据交换的单位是报文，用户数据加上源地址、目的地址等信息后，后封装成报文(message)。报文交换采用存储转发技术，整个报文先传送到相邻的结点，全部存储后查找转发表，转发到下一个结点

优点：

1️⃣ 无须建立连接。通信前无须建立连接，没有建立连接时延，用户可随时发送报文。

2️⃣ 动态分配线路。交换设备存储整个报文后，选择一条合适的空闲线路，转发报文。 

3️⃣ 线路可靠性高。若某条传输路径发生故障，则可重新选择另 一条路径传输数据。

4️⃣ 线路利用率高。报 文在哪段链路 上传送时才占用这段链路的通信资源。

5️⃣ 提供多目标服务。一 个报文可以同时发送给多个目的地址。

缺点：

1️⃣ 转发时延高。 交换结点要将报 文整体接收完后，才能查找转发表转发到下 一个结点。 

2️⃣ 缓存开销大。报文的大小没有限制，这就要求交换结点拥有较大的缓存空间。 

3️⃣ 错误处理低效。报文较长时，发生错误的概率相对更大，重传整个报文的代价也很大。


3. **分组交换**

分组交换也采用存储转发技术，但解决了报文交换中报文过长的问题。

优点：

1️⃣ 无建立时延。通信前无须建立连接，没有建立连接时延，用户可随时发送分组。 

2️⃣ 线路利用率高。分组在哪段链路 上传送时才占用这段链路 的通信资源。相比采用电路交 换传送突发式的计算机数据，分组交换的通信线路利用率大大提高。 

3️⃣ 简化了存储管理(相对于报文交换)。因为分组的长度固定，相应缓冲区的大小也固定， 在交换结点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易。

4️⃣ 加速传输。分组是逐个传输的，可以使后 一个分组的存储操作与前 一个分组的转发操作并 行，这种流水线方式减少了报文的传输时间。此外，传输一个分组比传输 一次报文所需的 缓冲 区小得多，这样，因缓冲区不足而等待发送的概率及时间必然也少得多。

5️⃣ 减小 了出错概率和重发数据量。因为分组较短，其出错概 率必然减小，所以每次重发的 数据量也就大大减少，这样不仅提高了可靠性，而且减小了传输时延。

缺点：

1️⃣ 存在存储转发时延。尽管分组交换比报文交换的传输时延小，但相对于电路交换仍存在存储转发时延，且其结点交换机必须具有更强的处理能力。

2️⃣ 需要传输额外的信 息量。每 个小数据段都要加 上控制信息以构成 分组，这使得传送的信 息量增大了5%~~10% ，进而使得控制复杂，降低了通信效率，增大了处理的时延。 

3️⃣ 当分组交换网采用数据报服务时，可能出现失序、丢失或重复分组的情况，分组到达目 的结点时，要对分组按编号进行排序等工作，而这些工作很麻烦。若采用虚电路服务， 则虽然没有失序问题，但有呼叫建立、数据传输和虚电路释放 三个过程

**流水线分组传输：传输m个分组需要的时间t = 3r + (m-1) x r**